import { Control } from '@antv/l7';
import { useUpdateEffect } from 'ahooks';
import { useEffect, useRef } from 'react';
import { useScene } from "../use-scene";
export var useControl = function useControl(onCreate, onRemove, opts) {
  var scene = useScene();
  var controlRef = useRef();
  useEffect(function () {
    // @ts-ignore
    var custom = new Control(opts);
    custom.onAdd = function () {
      return onCreate(scene);
    };
    // eslint-disable-next-line @typescript-eslint/no-empty-function
    custom.onRemove = function () {};
    controlRef.current = custom;
    scene.addControl(custom);
    return function () {
      if (typeof onRemove === 'function') {
        onRemove(scene);
      }
      controlRef.current = null;
      scene.removeControl(custom);
    };
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);
  useUpdateEffect(function () {
    var _controlRef$current;
    (_controlRef$current = controlRef.current) === null || _controlRef$current === void 0 || _controlRef$current.setOptions(opts);
  }, [opts]);
};