"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useL7ComponentUpdate = void 0;
var _ahooks = require("ahooks");
var _react = require("react");
/**
 * 监听 control 的 options 中各项是否发生变化，若有变化则调用 control.setOptions 传入更新的配置
 * @param control
 * @param options
 */
const useL7ComponentUpdate = (control, options) => {
  const isFirst = (0, _react.useRef)(true);
  const keyList = (0, _react.useMemo)(() => Object.keys(options), [options]);
  (0, _ahooks.useTrackedEffect)(updateIndexes => {
    if (isFirst.current) {
      isFirst.current = false;
      return;
    }
    const updateOptions = {};
    updateIndexes.forEach(updateIndex => {
      const key = keyList[updateIndex];
      updateOptions[key] = options[key];
    });
    control?.setOptions(updateOptions);
  }, Object.values(options));
};
exports.useL7ComponentUpdate = useL7ComponentUpdate;