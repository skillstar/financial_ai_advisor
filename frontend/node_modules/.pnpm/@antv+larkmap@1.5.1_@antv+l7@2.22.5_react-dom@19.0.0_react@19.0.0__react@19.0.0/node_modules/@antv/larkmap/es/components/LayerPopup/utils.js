import ReactDOM from 'react-dom';

/**
 * 将 render 中的 JSX 格式转换成 DOM 和 Portal 的形式
 * @param render
 * @param tag
 */
export var getElementTypePortal = function getElementTypePortal(render, tag) {
  // 若 render 为函数格式，则在其每次调用时重新生成 dom 和 portal
  if (render instanceof Function) {
    var dom = document.createElement(tag);
    return function () {
      var reactNode = render.apply(void 0, arguments);
      var portal = /*#__PURE__*/ReactDOM.createPortal(reactNode, dom);
      ReactDOM.render(portal, dom);
      return dom;
    };
  } else {
    var _dom = document.createElement(tag);
    var portal = /*#__PURE__*/ReactDOM.createPortal(render, _dom);
    ReactDOM.render(portal, _dom);
    return _dom;
  }
};