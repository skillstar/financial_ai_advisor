"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useLayer = void 0;
var _react = require("react");
var _useLayerManager = require("../use-layer-manager");
const useLayer = id => {
  const layerManager = (0, _useLayerManager.useLayerManager)();
  const [layer, setLayer] = (0, _react.useState)(layerManager.getLayer(id));
  (0, _react.useEffect)(() => {
    const onLayerAdd = _layer => {
      if (id === _layer.id) {
        setLayer(_layer);
      }
    };
    const onLayerRemove = layerId => {
      if (id === layerId) {
        setLayer(undefined);
      }
    };
    const _layer = layerManager.getLayer(id);
    if (_layer) {
      setLayer(_layer);
    } else {
      layerManager.on('add', onLayerAdd);
      layerManager.on('remove', onLayerRemove);
    }
    return () => {
      if (_layer === undefined) {
        layerManager.off('add', onLayerAdd);
        layerManager.off('remove', onLayerRemove);
      }
    };
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [id]);
  return layer;
};
exports.useLayer = useLayer;