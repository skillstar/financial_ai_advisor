!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@antv/l7")):"function"==typeof define&&define.amd?define(["exports","@antv/l7"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).L7=t.L7||{},t.L7.Draw={}),t.L7)}(this,(function(t,e){"use strict";var n={draw:"crosshair",pointHover:"pointer",pointDrag:"move",lineHover:"pointer",lineDrag:"move",polygonHover:"pointer",polygonDrag:"move"},r={point:[],line:[],polygon:[],midPoint:[],dashLine:[],text:[]},o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function i(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}var s=i,u=a;function c(t){if(s===setTimeout)return setTimeout(t,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}"function"==typeof o.setTimeout&&(s=setTimeout),"function"==typeof o.clearTimeout&&(u=clearTimeout);var l,f=[],p=!1,h=-1;function d(){p&&l&&(p=!1,l.length?f=l.concat(f):h=-1,f.length&&v())}function v(){if(!p){var t=c(d);p=!0;for(var e=f.length;e;){for(l=f,f=[];++h<e;)l&&l[h].run();h=-1,e=f.length}l=null,p=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===a||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}y.prototype.run=function(){this.fun.apply(null,this.array)};function g(){}var m=g,b=g,w=g,E=g,D=g,P=g,x=g;var A=o.performance||{},M=A.now||A.mozNow||A.msNow||A.oNow||A.webkitNow||function(){return(new Date).getTime()};var k=new Date;var O={nextTick:function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;arguments.length>n;n++)e[n-1]=arguments[n];f.push(new y(t,e)),1!==f.length||p||c(v)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:m,addListener:b,once:w,off:E,removeListener:D,removeAllListeners:P,emit:x,binding:function(t){throw Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*M.call(A),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],0>(r-=t[1])&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-k)/1e3}},S="top",L="bottom",j="right",_="left",R="auto",C=[S,L,j,_],T="start",B="end",F="clippingParents",I="viewport",H="popper",U="reference",N=C.reduce((function(t,e){return t.concat([e+"-"+T,e+"-"+B])}),[]),Y=[].concat(C,[R]).reduce((function(t,e){return t.concat([e,e+"-"+T,e+"-"+B])}),[]),z=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function X(t){return t?(t.nodeName||"").toLowerCase():null}function W(t){if(null==t)return window;if(""+t!="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function q(t){return t instanceof W(t).Element||t instanceof Element}function $(t){return t instanceof W(t).HTMLElement||t instanceof HTMLElement}function G(t){return"undefined"!=typeof ShadowRoot&&(t instanceof W(t).ShadowRoot||t instanceof ShadowRoot)}var V={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},o=e.elements[t];$(o)&&X(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?o.removeAttribute(t):o.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],o=e.attributes[t]||{},i=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});$(r)&&X(r)&&(Object.assign(r.style,i),Object.keys(o).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]};function J(t){return t.split("-")[0]}var K=Math.max,Z=Math.min,Q=Math.round;function tt(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function et(){return!/^((?!chrome|android).)*safari/i.test(tt())}function nt(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=t.getBoundingClientRect(),o=1,i=1;e&&$(t)&&(o=t.offsetWidth>0&&Q(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Q(r.height)/t.offsetHeight||1);var a=(q(t)?W(t):window).visualViewport,s=!et()&&n,u=(r.left+(s&&a?a.offsetLeft:0))/o,c=(r.top+(s&&a?a.offsetTop:0))/i,l=r.width/o,f=r.height/i;return{width:l,height:f,top:c,right:u+l,bottom:c+f,left:u,x:u,y:c}}function rt(t){var e=nt(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)>1||(n=e.width),Math.abs(e.height-r)>1||(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function ot(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&G(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function it(t){return W(t).getComputedStyle(t)}function at(t){return["table","td","th"].indexOf(X(t))>=0}function st(t){return((q(t)?t.ownerDocument:t.document)||window.document).documentElement}function ut(t){return"html"===X(t)?t:t.assignedSlot||t.parentNode||(G(t)?t.host:null)||st(t)}function ct(t){return $(t)&&"fixed"!==it(t).position?t.offsetParent:null}function lt(t){for(var e=W(t),n=ct(t);n&&at(n)&&"static"===it(n).position;)n=ct(n);return n&&("html"===X(n)||"body"===X(n)&&"static"===it(n).position)?e:n||function(t){var e=/firefox/i.test(tt());if(/Trident/i.test(tt())&&$(t)&&"fixed"===it(t).position)return null;var n=ut(t);for(G(n)&&(n=n.host);$(n)&&0>["html","body"].indexOf(X(n));){var r=it(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}function ft(t){return 0>["top","bottom"].indexOf(t)?"y":"x"}function pt(t,e,n){return K(t,Z(e,n))}function ht(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function dt(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var vt={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,o=t.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,s=J(n.placement),u=ft(s),c=[_,j].indexOf(s)>=0?"height":"width";if(i&&a){var l=function(t,e){return ht("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:dt(t,C))}(o.padding,n),f=rt(i),p="y"===u?S:_,h="y"===u?L:j,d=n.rects.reference[c]+n.rects.reference[u]-a[u]-n.rects.popper[c],v=a[u]-n.rects.reference[u],y=lt(i),g=y?"y"===u?y.clientHeight||0:y.clientWidth||0:0,m=g/2-f[c]/2+(d/2-v/2),b=pt(l[p],m,g-f[c]-l[h]);n.modifiersData[r]=((e={})[u]=b,e.centerOffset=b-m,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&ot(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function yt(t){return t.split("-")[1]}var gt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function mt(t){var e,n=t.popper,r=t.popperRect,o=t.placement,i=t.variation,a=t.offsets,s=t.position,u=t.gpuAcceleration,c=t.adaptive,l=t.roundOffsets,f=t.isFixed,p=a.x,h=void 0===p?0:p,d=a.y,v=void 0===d?0:d,y="function"==typeof l?l({x:h,y:v}):{x:h,y:v};h=y.x,v=y.y;var g=a.hasOwnProperty("x"),m=a.hasOwnProperty("y"),b=_,w=S,E=window;if(c){var D=lt(n),P="clientHeight",x="clientWidth";if(D===W(n)&&"static"!==it(D=st(n)).position&&"absolute"===s&&(P="scrollHeight",x="scrollWidth"),o===S||(o===_||o===j)&&i===B)w=L,v-=(f&&D===E&&E.visualViewport?E.visualViewport.height:D[P])-r.height,v*=u?1:-1;if(o===_||(o===S||o===L)&&i===B)b=j,h-=(f&&D===E&&E.visualViewport?E.visualViewport.width:D[x])-r.width,h*=u?1:-1}var A,M=Object.assign({position:s},c&&gt),k=!0===l?function(t,e){var n=t.y,r=e.devicePixelRatio||1;return{x:Q(t.x*r)/r||0,y:Q(n*r)/r||0}}({x:h,y:v},W(n)):{x:h,y:v};return h=k.x,v=k.y,Object.assign({},M,u?((A={})[w]=m?"0":"",A[b]=g?"0":"",A.transform=(E.devicePixelRatio||1)>1?"translate3d("+h+"px, "+v+"px, 0)":"translate("+h+"px, "+v+"px)",A):((e={})[w]=m?v+"px":"",e[b]=g?h+"px":"",e.transform="",e))}var bt={passive:!0};var wt={left:"right",right:"left",bottom:"top",top:"bottom"};function Et(t){return t.replace(/left|right|bottom|top/g,(function(t){return wt[t]}))}var Dt={start:"end",end:"start"};function Pt(t){return t.replace(/start|end/g,(function(t){return Dt[t]}))}function xt(t){var e=W(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function At(t){return nt(st(t)).left+xt(t).scrollLeft}function Mt(t){var e=it(t);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function kt(t){return 0>["html","body","#document"].indexOf(X(t))?$(t)&&Mt(t)?t:kt(ut(t)):t.ownerDocument.body}function Ot(t,e){var n;void 0===e&&(e=[]);var r=kt(t),o=r===(null==(n=t.ownerDocument)?void 0:n.body),i=W(r),a=o?[i].concat(i.visualViewport||[],Mt(r)?r:[]):r,s=e.concat(a);return o?s:s.concat(Ot(ut(a)))}function St(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Lt(t,e,n){return e===I?St(function(t,e){var n=W(t),r=st(t),o=n.visualViewport,i=r.clientWidth,a=r.clientHeight,s=0,u=0;if(o){i=o.width,a=o.height;var c=et();(c||!c&&"fixed"===e)&&(s=o.offsetLeft,u=o.offsetTop)}return{width:i,height:a,x:s+At(t),y:u}}(t,n)):q(e)?function(t,e){var n=nt(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):St(function(t){var e,n=st(t),r=xt(t),o=null==(e=t.ownerDocument)?void 0:e.body,i=K(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),a=K(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-r.scrollLeft+At(t),u=-r.scrollTop;return"rtl"===it(o||n).direction&&(s+=K(n.clientWidth,o?o.clientWidth:0)-i),{width:i,height:a,x:s,y:u}}(st(t)))}function jt(t,e,n,r){var o="clippingParents"===e?function(t){var e=Ot(ut(t)),n=["absolute","fixed"].indexOf(it(t).position)>=0&&$(t)?lt(t):t;return q(n)?e.filter((function(t){return q(t)&&ot(t,n)&&"body"!==X(t)})):[]}(t):[].concat(e),i=[].concat(o,[n]),a=i.reduce((function(e,n){var o=Lt(t,n,r);return e.top=K(o.top,e.top),e.right=Z(o.right,e.right),e.bottom=Z(o.bottom,e.bottom),e.left=K(o.left,e.left),e}),Lt(t,i[0],r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function _t(t){var e,n=t.reference,r=t.element,o=t.placement,i=o?J(o):null,a=o?yt(o):null,s=n.x+n.width/2-r.width/2,u=n.y+n.height/2-r.height/2;switch(i){case S:e={x:s,y:n.y-r.height};break;case L:e={x:s,y:n.y+n.height};break;case j:e={x:n.x+n.width,y:u};break;case _:e={x:n.x-r.width,y:u};break;default:e={x:n.x,y:n.y}}var c=i?ft(i):null;if(null!=c){var l="y"===c?"height":"width";switch(a){case T:e[c]=e[c]-(n[l]/2-r[l]/2);break;case B:e[c]=e[c]+(n[l]/2-r[l]/2)}}return e}function Rt(t,e){void 0===e&&(e={});var n=e.placement,r=void 0===n?t.placement:n,o=e.strategy,i=void 0===o?t.strategy:o,a=e.boundary,s=void 0===a?F:a,u=e.rootBoundary,c=void 0===u?I:u,l=e.elementContext,f=void 0===l?H:l,p=e.altBoundary,h=void 0!==p&&p,d=e.padding,v=void 0===d?0:d,y=ht("number"!=typeof v?v:dt(v,C)),g=t.rects.popper,m=t.elements[h?f===H?U:H:f],b=jt(q(m)?m:m.contextElement||st(t.elements.popper),s,c,i),w=nt(t.elements.reference),E=_t({reference:w,element:g,strategy:"absolute",placement:r}),D=St(Object.assign({},g,E)),P=f===H?D:w,x={top:b.top-P.top+y.top,bottom:P.bottom-b.bottom+y.bottom,left:b.left-P.left+y.left,right:P.right-b.right+y.right},A=t.modifiersData.offset;if(f===H&&A){var M=A[r];Object.keys(x).forEach((function(t){var e=0>[j,L].indexOf(t)?-1:1;x[t]+=M[0>[S,L].indexOf(t)?"x":"y"]*e}))}return x}function Ct(t,e){void 0===e&&(e={});var n=e.boundary,r=e.rootBoundary,o=e.padding,i=e.flipVariations,a=e.allowedAutoPlacements,s=void 0===a?Y:a,u=yt(e.placement),c=u?i?N:N.filter((function(t){return yt(t)===u})):C,l=c.filter((function(t){return s.indexOf(t)>=0}));0===l.length&&(l=c);var f=l.reduce((function(e,i){return e[i]=Rt(t,{placement:i,boundary:n,rootBoundary:r,padding:o})[J(i)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}var Tt={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0===a||a,u=n.fallbackPlacements,c=n.padding,l=n.boundary,f=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,d=void 0===h||h,v=n.allowedAutoPlacements,y=e.options.placement,g=J(y),m=u||(g===y||!d?[Et(y)]:function(t){if(J(t)===R)return[];var e=Et(t);return[Pt(t),e,Pt(e)]}(y)),b=[y].concat(m).reduce((function(t,n){return t.concat(J(n)===R?Ct(e,{placement:n,boundary:l,rootBoundary:f,padding:c,flipVariations:d,allowedAutoPlacements:v}):n)}),[]),w=e.rects.reference,E=e.rects.popper,D=new Map,P=!0,x=b[0],A=0;b.length>A;A++){var M=b[A],k=J(M),O=yt(M)===T,C=[S,L].indexOf(k)>=0,B=C?"width":"height",F=Rt(e,{placement:M,boundary:l,rootBoundary:f,altBoundary:p,padding:c}),I=C?O?j:_:O?L:S;w[B]>E[B]&&(I=Et(I));var H=Et(I),U=[];if(i&&U.push(0>=F[k]),s&&U.push(0>=F[I],0>=F[H]),U.every((function(t){return t}))){x=M,P=!1;break}D.set(M,U)}if(P)for(var N=function(t){var e=b.find((function(e){var n=D.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return x=e,"break"},Y=d?3:1;Y>0;Y--){if("break"===N(Y))break}e.placement!==x&&(e.modifiersData[r]._skip=!0,e.placement=x,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Bt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Ft(t){return[S,j,L,_].some((function(e){return t[e]>=0}))}var It={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.name,r=t.options.offset,o=void 0===r?[0,0]:r,i=Y.reduce((function(t,n){return t[n]=function(t,e,n){var r=J(t),o=0>[_,S].indexOf(r)?1:-1,i="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=i[0],s=i[1];return a=a||0,s=(s||0)*o,0>[_,j].indexOf(r)?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=i[e.placement],s=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=s),e.modifiersData[n]=i}};var Ht={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,o=n.mainAxis,i=void 0===o||o,a=n.altAxis,s=void 0!==a&&a,u=n.tether,c=void 0===u||u,l=n.tetherOffset,f=void 0===l?0:l,p=Rt(e,{boundary:n.boundary,rootBoundary:n.rootBoundary,padding:n.padding,altBoundary:n.altBoundary}),h=J(e.placement),d=yt(e.placement),v=!d,y=ft(h),g="x"===y?"y":"x",m=e.modifiersData.popperOffsets,b=e.rects.reference,w=e.rects.popper,E="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,D="number"==typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(m){if(i){var A,M="y"===y?S:_,k="y"===y?L:j,O="y"===y?"height":"width",R=m[y],C=R+p[M],B=R-p[k],F=c?-w[O]/2:0,I=d===T?b[O]:w[O],H=d===T?-w[O]:-b[O],U=e.elements.arrow,N=c&&U?rt(U):{width:0,height:0},Y=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},z=Y[M],X=Y[k],W=pt(0,b[O],N[O]),q=v?b[O]/2-F-W-z-D.mainAxis:I-W-z-D.mainAxis,$=v?-b[O]/2+F+W+X+D.mainAxis:H+W+X+D.mainAxis,G=e.elements.arrow&&lt(e.elements.arrow),V=null!=(A=null==P?void 0:P[y])?A:0,Q=R+$-V,tt=pt(c?Z(C,R+q-V-(G?"y"===y?G.clientTop||0:G.clientLeft||0:0)):C,R,c?K(B,Q):B);m[y]=tt,x[y]=tt-R}if(s){var et,nt=m[g],ot="y"===g?"height":"width",it=nt+p["x"===y?S:_],at=nt-p["x"===y?L:j],st=-1!==[S,_].indexOf(h),ut=null!=(et=null==P?void 0:P[g])?et:0,ct=st?it:nt-b[ot]-w[ot]-ut+D.altAxis,ht=st?nt+b[ot]+w[ot]-ut-D.altAxis:at,dt=c&&st?function(t,e,n){var r=pt(t,e,n);return r>n?n:r}(ct,nt,ht):pt(c?ct:it,nt,c?ht:at);m[g]=dt,x[g]=dt-nt}e.modifiersData[r]=x}},requiresIfExists:["offset"]};function Ut(t,e,n){void 0===n&&(n=!1);var r,o,i=$(e),a=$(e)&&function(t){var e=t.getBoundingClientRect(),n=Q(e.width)/t.offsetWidth||1,r=Q(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),s=st(e),u=nt(t,a,n),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==X(e)||Mt(s))&&(c=(r=e)!==W(r)&&$(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:xt(r)),$(e)?((l=nt(e,!0)).x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=At(s))),{x:u.left+c.scrollLeft-l.x,y:u.top+c.scrollTop-l.y,width:u.width,height:u.height}}function Nt(t){var e=new Map,n=new Set,r=[];function o(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&o(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||o(t)})),r}var Yt={placement:"bottom",modifiers:[],strategy:"absolute"};function zt(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function Xt(t){void 0===t&&(t={});var e=t.defaultModifiers,n=void 0===e?[]:e,r=t.defaultOptions,o=void 0===r?Yt:r;return function(t,e,r){void 0===r&&(r=o);var i,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yt,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},u=[],c=!1,l={state:s,setOptions:function(r){var i="function"==typeof r?r(s.options):r;f(),s.options=Object.assign({},o,s.options,i),s.scrollParents={reference:q(t)?Ot(t):t.contextElement?Ot(t.contextElement):[],popper:Ot(e)};var a,c,p=function(t){var e=Nt(t);return z.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(n,s.options.modifiers),c=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return s.orderedModifiers=p.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.options,n=t.effect;if("function"==typeof n){var r=n({state:s,name:t.name,instance:l,options:void 0===e?{}:e});u.push(r||function(){})}})),l.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,n=t.popper;if(zt(e,n)){s.rects={reference:Ut(e,lt(n),"fixed"===s.options.strategy),popper:rt(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;s.orderedModifiers.length>r;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],i=o.fn,a=o.options;"function"==typeof i&&(s=i({state:s,options:void 0===a?{}:a,name:o.name,instance:l})||s)}else s.reset=!1,r=-1}}},update:(i=function(){return new Promise((function(t){l.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(i())}))}))),a}),destroy:function(){f(),c=!0}};if(!zt(t,e))return l;function f(){u.forEach((function(t){return t()})),u=[]}return l.setOptions(r).then((function(t){!c&&r.onFirstUpdate&&r.onFirstUpdate(t)})),l}}var Wt=Xt({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,r=t.options,o=r.scroll,i=void 0===o||o,a=r.resize,s=void 0===a||a,u=W(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach((function(t){t.addEventListener("scroll",n.update,bt)})),s&&u.addEventListener("resize",n.update,bt),function(){i&&c.forEach((function(t){t.removeEventListener("scroll",n.update,bt)})),s&&u.removeEventListener("resize",n.update,bt)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state;e.modifiersData[t.name]=_t({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,a=void 0===i||i,s=n.roundOffsets,u=void 0===s||s,c={placement:J(e.placement),variation:yt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,mt(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:u})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,mt(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},V,It,Tt,Ht,vt,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,o=e.rects.popper,i=e.modifiersData.preventOverflow,a=Rt(e,{elementContext:"reference"}),s=Rt(e,{altBoundary:!0}),u=Bt(a,r),c=Bt(s,o,i),l=Ft(u),f=Ft(c);e.modifiersData[n]={referenceClippingOffsets:u,popperEscapeOffsets:c,isReferenceHidden:l,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":f})}}]}),qt="tippy-content",$t="tippy-backdrop",Gt="tippy-arrow",Vt="tippy-svg-arrow",Jt={passive:!0,capture:!0},Kt=function(){return document.body};function Zt(t,e,n){if(Array.isArray(t)){var r=t[e];return null==r?Array.isArray(n)?n[e]:n:r}return t}function Qt(t,e){var n={}.toString.call(t);return 0===n.indexOf("[object")&&n.indexOf(e+"]")>-1}function te(t,e){return"function"==typeof t?t.apply(void 0,e):t}function ee(t,e){return 0===e?t:function(r){clearTimeout(n),n=setTimeout((function(){t(r)}),e)};var n}function ne(t){return[].concat(t)}function re(t,e){-1===t.indexOf(e)&&t.push(e)}function oe(t){return[].slice.call(t)}function ie(t){return Object.keys(t).reduce((function(e,n){return void 0!==t[n]&&(e[n]=t[n]),e}),{})}function ae(){return document.createElement("div")}function se(t){return["Element","Fragment"].some((function(e){return Qt(t,e)}))}function ue(t){return Qt(t,"MouseEvent")}function ce(t){return se(t)?[t]:function(t){return Qt(t,"NodeList")}(t)?oe(t):Array.isArray(t)?t:oe(document.querySelectorAll(t))}function le(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function fe(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function pe(t){var e,n=ne(t)[0];return null!=n&&null!=(e=n.ownerDocument)&&e.body?n.ownerDocument:document}function he(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[r](e,n)}))}function de(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=null==n.getRootNode||null==(r=n.getRootNode())?void 0:r.host}return!1}var ve={isTouch:!1},ye=0;function ge(){ve.isTouch||(ve.isTouch=!0,window.performance&&document.addEventListener("mousemove",me))}function me(){var t=performance.now();20>t-ye&&(ve.isTouch=!1,document.removeEventListener("mousemove",me)),ye=t}function be(){var t,e=document.activeElement;(t=e)&&t._tippy&&t._tippy.reference===t&&(e.blur&&!e._tippy.state.isVisible&&e.blur())}var we=!!("undefined"!=typeof window&&"undefined"!=typeof document)&&!!window.msCrypto,Ee=Object.assign({appendTo:Kt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),De=Object.keys(Ee);function Pe(t){var e=(t.plugins||[]).reduce((function(e,n){var r,o=n.name;o&&(e[o]=void 0!==t[o]?t[o]:null!=(r=Ee[o])?r:n.defaultValue);return e}),{});return Object.assign({},t,e)}function xe(t,e){var n=Object.assign({},e,{content:te(e.content,[t])},e.ignoreAttributes?{}:function(t,e){return(e?Object.keys(Pe(Object.assign({},Ee,{plugins:e}))):De).reduce((function(e,n){var r=(t.getAttribute("data-tippy-"+n)||"").trim();if(!r)return e;if("content"===n)e[n]=r;else try{e[n]=JSON.parse(r)}catch(t){e[n]=r}return e}),{})}(t,e.plugins));return n.aria=Object.assign({},Ee.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?e.interactive:n.aria.expanded,content:"auto"===n.aria.content?e.interactive?null:"describedby":n.aria.content},n}var Ae=function(){return"innerHTML"};function Me(t,e){t[Ae()]=e}function ke(t){var e=ae();return!0===t?e.className=Gt:(e.className=Vt,se(t)?e.appendChild(t):Me(e,t)),e}function Oe(t,e){se(e.content)?(Me(t,""),t.appendChild(e.content)):"function"!=typeof e.content&&(e.allowHTML?Me(t,e.content):t.textContent=e.content)}function Se(t){var e=t.firstElementChild,n=oe(e.children);return{box:e,content:n.find((function(t){return t.classList.contains(qt)})),arrow:n.find((function(t){return t.classList.contains(Gt)||t.classList.contains(Vt)})),backdrop:n.find((function(t){return t.classList.contains($t)}))}}function Le(t){var e=ae(),n=ae();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=ae();function o(n,r){var o=Se(e),i=o.box,a=o.content,s=o.arrow;r.theme?i.setAttribute("data-theme",r.theme):i.removeAttribute("data-theme"),"string"==typeof r.animation?i.setAttribute("data-animation",r.animation):i.removeAttribute("data-animation"),r.inertia?i.setAttribute("data-inertia",""):i.removeAttribute("data-inertia"),i.style.maxWidth="number"==typeof r.maxWidth?r.maxWidth+"px":r.maxWidth,r.role?i.setAttribute("role",r.role):i.removeAttribute("role"),n.content===r.content&&n.allowHTML===r.allowHTML||Oe(a,t.props),r.arrow?s?n.arrow!==r.arrow&&(i.removeChild(s),i.appendChild(ke(r.arrow))):i.appendChild(ke(r.arrow)):s&&i.removeChild(s)}return r.className=qt,r.setAttribute("data-state","hidden"),Oe(r,t.props),e.appendChild(n),n.appendChild(r),o(t.props,t.props),{popper:e,onUpdate:o}}Le.$$tippy=!0;var je=1,_e=[],Re=[];function Ce(t,e){var n,r,o,i,a,s,u,c,l=xe(t,Object.assign({},Ee,Pe(ie(e)))),f=!1,p=!1,h=!1,d=!1,v=[],y=ee($,l.interactiveDebounce),g=je++,m=(c=l.plugins).filter((function(t,e){return c.indexOf(t)===e})),b={id:g,reference:t,popper:ae(),popperInstance:null,props:l,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:m,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(r),cancelAnimationFrame(o)},setProps:function(e){if(b.state.isDestroyed)return;R("onBeforeUpdate",[b,e]),W();var n=b.props,r=xe(t,Object.assign({},n,ie(e),{ignoreAttributes:!0}));b.props=r,X(),n.interactiveDebounce!==r.interactiveDebounce&&(B(),y=ee($,r.interactiveDebounce));n.triggerTarget&&!r.triggerTarget?ne(n.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):r.triggerTarget&&t.removeAttribute("aria-expanded");T(),_(),D&&D(n,r);b.popperInstance&&(K(),Q().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)})));R("onAfterUpdate",[b,e])},setContent:function(t){b.setProps({content:t})},show:function(){var t=b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,r=ve.isTouch&&!b.props.touch,o=Zt(b.props.duration,0,Ee.duration);if(t||e||n||r)return;if(O().hasAttribute("disabled"))return;if(R("onShow",[b],!1),!1===b.props.onShow(b))return;b.state.isVisible=!0,k()&&(E.style.visibility="visible");_(),U(),b.state.isMounted||(E.style.transition="none");if(k()){var i=L();le([i.box,i.content],0)}s=function(){var t;if(b.state.isVisible&&!d){if(d=!0,E.style.transition=b.props.moveTransition,k()&&b.props.animation){var e=L(),n=e.box,r=e.content;le([n,r],o),fe([n,r],"visible")}C(),T(),re(Re,b),null==(t=b.popperInstance)||t.forceUpdate(),R("onMount",[b]),b.props.animation&&k()&&function(t,e){Y(t,e)}(o,(function(){b.state.isShown=!0,R("onShown",[b])}))}},function(){var t,e=b.props.appendTo,n=O();t=b.props.interactive&&e===Kt||"parent"===e?n.parentNode:te(e,[n]);t.contains(E)||t.appendChild(E);b.state.isMounted=!0,K()}()},hide:function(){var t=!b.state.isVisible,e=b.state.isDestroyed,n=!b.state.isEnabled,r=Zt(b.props.duration,1,Ee.duration);if(t||e||n)return;if(R("onHide",[b],!1),!1===b.props.onHide(b))return;b.state.isVisible=!1,b.state.isShown=!1,d=!1,f=!1,k()&&(E.style.visibility="hidden");if(B(),N(),_(!0),k()){var o=L(),i=o.box,a=o.content;b.props.animation&&(le([i,a],r),fe([i,a],"hidden"))}C(),T(),b.props.animation?k()&&function(t,e){Y(t,(function(){!b.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&e()}))}(r,b.unmount):b.unmount()},hideWithInteractivity:function(t){S().addEventListener("mousemove",y),re(_e,y),y(t)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide();if(!b.state.isMounted)return;Z(),Q().forEach((function(t){t._tippy.unmount()})),E.parentNode&&E.parentNode.removeChild(E);Re=Re.filter((function(t){return t!==b})),b.state.isMounted=!1,R("onHidden",[b])},destroy:function(){if(b.state.isDestroyed)return;b.clearDelayTimeouts(),b.unmount(),W(),delete t._tippy,b.state.isDestroyed=!0,R("onDestroy",[b])}};if(!l.render)return b;var w=l.render(b),E=w.popper,D=w.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+b.id,b.popper=E,t._tippy=b,E._tippy=b;var P=m.map((function(t){return t.fn(b)})),x=t.hasAttribute("aria-expanded");return X(),T(),_(),R("onCreate",[b]),l.showOnCreate&&tt(),E.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),E.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&S().addEventListener("mousemove",y)})),b;function A(){var t=b.props.touch;return Array.isArray(t)?t:[t,0]}function M(){return"hold"===A()[0]}function k(){var t;return!(null==(t=b.props.render)||!t.$$tippy)}function O(){return u||t}function S(){var t=O().parentNode;return t?pe(t):document}function L(){return Se(E)}function j(t){return b.state.isMounted&&!b.state.isVisible||ve.isTouch||i&&"focus"===i.type?0:Zt(b.props.delay,t?0:1,Ee.delay)}function _(t){void 0===t&&(t=!1),E.style.pointerEvents=b.props.interactive&&!t?"":"none",E.style.zIndex=""+b.props.zIndex}function R(t,e,n){var r;(void 0===n&&(n=!0),P.forEach((function(n){n[t]&&n[t].apply(n,e)})),n)&&(r=b.props)[t].apply(r,e)}function C(){var e=b.props.aria;if(e.content){var n="aria-"+e.content,r=E.id;ne(b.props.triggerTarget||t).forEach((function(t){var e=t.getAttribute(n);if(b.state.isVisible)t.setAttribute(n,e?e+" "+r:r);else{var o=e&&e.replace(r,"").trim();o?t.setAttribute(n,o):t.removeAttribute(n)}}))}}function T(){!x&&b.props.aria.expanded&&ne(b.props.triggerTarget||t).forEach((function(t){b.props.interactive?t.setAttribute("aria-expanded",b.state.isVisible&&t===O()?"true":"false"):t.removeAttribute("aria-expanded")}))}function B(){S().removeEventListener("mousemove",y),_e=_e.filter((function(t){return t!==y}))}function F(e){if(!ve.isTouch||!h&&"mousedown"!==e.type){var n=e.composedPath&&e.composedPath()[0]||e.target;if(!b.props.interactive||!de(E,n)){if(ne(b.props.triggerTarget||t).some((function(t){return de(t,n)}))){if(ve.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else R("onClickOutside",[b,e]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),p=!0,setTimeout((function(){p=!1})),b.state.isMounted||N())}}}function I(){h=!0}function H(){h=!1}function U(){var t=S();t.addEventListener("mousedown",F,!0),t.addEventListener("touchend",F,Jt),t.addEventListener("touchstart",H,Jt),t.addEventListener("touchmove",I,Jt)}function N(){var t=S();t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchend",F,Jt),t.removeEventListener("touchstart",H,Jt),t.removeEventListener("touchmove",I,Jt)}function Y(t,e){var n=L().box;function r(t){t.target===n&&(he(n,"remove",r),e())}if(0===t)return e();he(n,"remove",a),he(n,"add",r),a=r}function z(e,n,r){void 0===r&&(r=!1),ne(b.props.triggerTarget||t).forEach((function(t){t.addEventListener(e,n,r),v.push({node:t,eventType:e,handler:n,options:r})}))}function X(){var t;M()&&(z("touchstart",q,{passive:!0}),z("touchend",G,{passive:!0})),(t=b.props.trigger,t.split(/\s+/).filter(Boolean)).forEach((function(t){if("manual"!==t)switch(z(t,q),t){case"mouseenter":z("mouseleave",G);break;case"focus":z(we?"focusout":"blur",V);break;case"focusin":z("focusout",V)}}))}function W(){v.forEach((function(t){t.node.removeEventListener(t.eventType,t.handler,t.options)})),v=[]}function q(t){var e,n=!1;if(b.state.isEnabled&&!J(t)&&!p){var r="focus"===(null==(e=i)?void 0:e.type);i=t,u=t.currentTarget,T(),!b.state.isVisible&&ue(t)&&_e.forEach((function(e){return e(t)})),"click"===t.type&&(0>b.props.trigger.indexOf("mouseenter")||f)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:tt(t),"click"===t.type&&(f=!n),n&&!r&&et(t)}}function $(t){var e=t.target,n=O().contains(e)||E.contains(e);if("mousemove"!==t.type||!n){var r=Q().concat(E).map((function(t){var e,n=null==(e=t._tippy.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:l}:null})).filter(Boolean);(function(t,e){var n=e.clientX,r=e.clientY;return t.every((function(t){var e=t.popperRect,o=t.popperState,i=t.props.interactiveBorder,a=o.placement.split("-")[0],s=o.modifiersData.offset;return!s||e.top-r+("bottom"===a?s.top.y:0)>i||r-e.bottom-("top"===a?s.bottom.y:0)>i||e.left-n+("right"===a?s.left.x:0)>i||n-e.right-("left"===a?s.right.x:0)>i}))})(r,t)&&(B(),et(t))}}function G(t){J(t)||b.props.trigger.indexOf("click")>=0&&f||(b.props.interactive?b.hideWithInteractivity(t):et(t))}function V(t){0>b.props.trigger.indexOf("focusin")&&t.target!==O()||b.props.interactive&&t.relatedTarget&&E.contains(t.relatedTarget)||et(t)}function J(t){return!!ve.isTouch&&M()!==t.type.indexOf("touch")>=0}function K(){Z();var e=b.props,n=e.popperOptions,r=e.placement,o=e.offset,i=e.getReferenceClientRect,a=e.moveTransition,u=k()?Se(E).arrow:null,c=i?{getBoundingClientRect:i,contextElement:i.contextElement||O()}:t,l={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(k()){var n=L().box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}},f=[{name:"offset",options:{offset:o}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!a}},l];k()&&u&&f.push({name:"arrow",options:{element:u,padding:3}}),f.push.apply(f,(null==n?void 0:n.modifiers)||[]),b.popperInstance=Wt(c,E,Object.assign({},n,{placement:r,onFirstUpdate:s,modifiers:f}))}function Z(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return oe(E.querySelectorAll("[data-tippy-root]"))}function tt(t){b.clearDelayTimeouts(),t&&R("onTrigger",[b,t]),U();var e=j(!0),r=A(),o=r[1];ve.isTouch&&"hold"===r[0]&&o&&(e=o),e?n=setTimeout((function(){b.show()}),e):b.show()}function et(t){if(b.clearDelayTimeouts(),R("onUntrigger",[b,t]),b.state.isVisible){if(0>b.props.trigger.indexOf("mouseenter")||0>b.props.trigger.indexOf("click")||0>["mouseleave","mousemove"].indexOf(t.type)||!f){var e=j(!1);e?r=setTimeout((function(){b.state.isVisible&&b.hide()}),e):o=requestAnimationFrame((function(){b.hide()}))}}else N()}}function Te(t,e){void 0===e&&(e={});var n=Ee.plugins.concat(e.plugins||[]);document.addEventListener("touchstart",ge,Jt),window.addEventListener("blur",be);var r=Object.assign({},e,{plugins:n}),o=ce(t).reduce((function(t,e){var n=e&&Ce(e,r);return n&&t.push(n),t}),[]);return se(t)?o[0]:o}Te.defaultProps=Ee,Te.setDefaultProps=function(t){Object.keys(t).forEach((function(e){Ee[e]=t[e]}))},Te.currentInput=ve;Object.assign({},V,{effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow)}});var Be={clientX:0,clientY:0},Fe=[];function Ie(t){Be={clientX:t.clientX,clientY:t.clientY}}var He={name:"followCursor",defaultValue:!1,fn:function(t){var e=t.reference,n=pe(t.props.triggerTarget||e),r=!1,o=!1,i=!0,a=t.props;function s(){return"initial"===t.props.followCursor&&t.state.isVisible}function u(){n.addEventListener("mousemove",f)}function c(){n.removeEventListener("mousemove",f)}function l(){r=!0,t.setProps({getReferenceClientRect:null}),r=!1}function f(n){var r=!n.target||e.contains(n.target),o=t.props.followCursor,i=n.clientX,a=n.clientY,s=e.getBoundingClientRect(),u=i-s.left,c=a-s.top;!r&&t.props.interactive||t.setProps({getReferenceClientRect:function(){var t=e.getBoundingClientRect(),n=i,r=a;"initial"===o&&(n=t.left+u,r=t.top+c);var s="horizontal"===o?t.top:r,l="vertical"===o?t.right:n,f="horizontal"===o?t.bottom:r,p="vertical"===o?t.left:n;return{width:l-p,height:f-s,top:s,right:l,bottom:f,left:p}}})}function p(){t.props.followCursor&&(Fe.push({instance:t,doc:n}),function(t){t.addEventListener("mousemove",Ie)}(n))}function h(){0===(Fe=Fe.filter((function(e){return e.instance!==t}))).filter((function(t){return t.doc===n})).length&&function(t){t.removeEventListener("mousemove",Ie)}(n)}return{onCreate:p,onDestroy:h,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(e,n){var i=n.followCursor;r||void 0!==i&&a.followCursor!==i&&(h(),i?(p(),!t.state.isMounted||o||s()||u()):(c(),l()))},onMount:function(){t.props.followCursor&&!o&&(i&&(f(Be),i=!1),s()||u())},onTrigger:function(t,e){ue(e)&&(Be={clientX:e.clientX,clientY:e.clientY}),o="focus"===e.type},onHidden:function(){t.props.followCursor&&(l(),c(),i=!0)}}}};Te.setDefaultProps({render:Le});var Ue,Ne,Ye,ze,Xe,We,qe={showTotalDistance:!1,showDashDistance:!0,showWhen:["normal","active"],format:function(t){return 1e3>t?+t.toFixed(2)+"m":+(t/1e3).toFixed(2)+"km"}},$e={showWhen:["normal","active"],format:function(t){return t>1e6?"".concat(+(t/1e6).toFixed(2),"km²"):"".concat(+t.toFixed(2),"m²")}},Ge={maxSize:100},Ve={remove:["del","backspace"],revert:["command+z","ctrl+z"],redo:["command+shift+z","ctrl+shift+z"]},Je={allowHTML:!0,followCursor:!0,placement:"bottom-start",offset:[-10,20],plugins:[He],trigger:"manual",hideOnClick:!1,theme:"light"},Ke={data:"drawData",pointAdsorbPixel:12,lineAdsorbPixel:10},Ze={dotDuration:100,dotDistance:30};function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);e>n;n++)r[n]=t[n];return r}function tn(t,e,n){return e=sn(e),function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cn()?Reflect.construct(e,n||[],sn(t).constructor):e.apply(t,n))}function en(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nn(t,e){for(var n=0;e.length>n;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vn(r.key),r)}}function rn(t,e,n){return e&&nn(t.prototype,e),n&&nn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function on(t,e,n){return(e=vn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function an(){return an="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=sn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(3>arguments.length?t:n):o.value}},an.apply(null,arguments)}function sn(t){return sn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sn(t)}function un(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pn(t,e)}function cn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cn=function(){return!!t})()}function ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fn(t){for(var e=1;arguments.length>e;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ln(Object(n),!0).forEach((function(e){on(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pn(t,e){return pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pn(t,e)}function hn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||gn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(t){return function(t){if(Array.isArray(t))return Qe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||gn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function gn(t,e){if(t){if("string"==typeof t)return Qe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(t,e):void 0}}(Ue=t.DrawEvent||(t.DrawEvent={})).Init="init",Ue.Destroy="destroy",Ue.Enable="enable",Ue.Disable="disable",Ue.Add="add",Ue.Edit="edit",Ue.Remove="remove",Ue.Clear="clear",Ue.Change="change",Ue.DragStart="dragStart",Ue.Dragging="dragging",Ue.DragEnd="dragEnd",Ue.Select="select",Ue.AddNode="addNode",Ue.RemoveNode="removeNode",(Ne=t.SourceEvent||(t.SourceEvent={})).Change="change",Ne.Update="update",(Ye=t.RenderEvent||(t.RenderEvent={})).Click="click",Ye.UnClick="unclick",Ye.Dragstart="dragstart",Ye.Mousemove="mousemove",Ye.Mouseout="mouseout",Ye.Dragging="dragging",Ye.Dragend="dragend",Ye.DblClick="dblClick",Ye.Contextmenu="contextmenu",(ze=t.LayerEvent||(t.LayerEvent={})).Mousedown="mousedown",ze.Mouseup="mouseup",ze.Click="click",ze.UnClick="unclick",ze.Dblclick="dblclick",ze.Mousemove="mousemove",ze.Mouseover="mouseover",ze.Mouseenter="mouseenter",ze.Mouseleave="mouseleave",ze.Mouseout="mouseout",ze.Contextmenu="contextmenu",(Xe=t.SceneEvent||(t.SceneEvent={})).Loaded="loaded",Xe.MapMove="mapmove",Xe.MoveStart="movestart",Xe.MoveEnd="moveend",Xe.ZoomChange="zoomchange",Xe.ZoomStart="zoomstart",Xe.ZoomEnd="zoomend",Xe.Click="click",Xe.Dblclick="dblclick",Xe.Mousemove="mousemove",Xe.Mousewheel="mousewheel",Xe.Mouseover="mouseover",Xe.Mouseout="mouseout",Xe.Mouseup="mouseup",Xe.Mousedown="mousedown",Xe.Contextmenu="contextmenu",Xe.Dragstart="dragstart",Xe.Dragging="dragging",Xe.Dragend="dragend",(We=t.ControlEvent||(t.ControlEvent={})).DrawChange="drawchange",We.DataChange="datachange",We.DrawSelect="drawselect",We.DrawClear="drawclear";var mn=6371008.8,bn={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260.511392,inches:39.37*mn,kilometers:6371.0088,kilometres:6371.0088,meters:mn,metres:mn,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:mn/1852,radians:1,yards:6967335.223679999},wn={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function En(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Dn(t,e,n){if(void 0===n&&(n={}),!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(2>t.length)throw Error("coordinates must be at least 2 numbers long");if(!Rn(t[0])||!Rn(t[1]))throw Error("coordinates must contain numbers");return En({type:"Point",coordinates:t},e,n)}function Pn(t,e,n){void 0===n&&(n={});for(var r=0,o=t;o.length>r;r++){var i=o[r];if(4>i.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;i[i.length-1].length>a;a++)if(i[i.length-1][a]!==i[0][a])throw Error("First and last Position are not equivalent.")}return En({type:"Polygon",coordinates:t},e,n)}function xn(t,e,n){if(void 0===n&&(n={}),2>t.length)throw Error("coordinates must be an array of two or more positions");return En({type:"LineString",coordinates:t},e,n)}function An(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Mn(t,e,n){return void 0===n&&(n={}),En({type:"MultiLineString",coordinates:t},e,n)}function kn(t,e,n){return void 0===n&&(n={}),En({type:"MultiPoint",coordinates:t},e,n)}function On(t,e,n){return void 0===n&&(n={}),En({type:"MultiPolygon",coordinates:t},e,n)}function Sn(t,e){void 0===e&&(e="kilometers");var n=bn[e];if(!n)throw Error(e+" units is invalid");return t*n}function Ln(t,e){void 0===e&&(e="kilometers");var n=bn[e];if(!n)throw Error(e+" units is invalid");return t/n}function jn(t){return 180*(t%(2*Math.PI))/Math.PI}function _n(t){return t%360*Math.PI/180}function Rn(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Cn(t){return!!t&&t.constructor===Object}var Tn=Object.freeze({__proto__:null,earthRadius:mn,factors:bn,unitsFactors:{centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/mn,yards:1.0936133},areaFactors:wn,feature:En,geometry:function(t,e,n){switch(t){case"Point":return Dn(e).geometry;case"LineString":return xn(e).geometry;case"Polygon":return Pn(e).geometry;case"MultiPoint":return kn(e).geometry;case"MultiLineString":return Mn(e).geometry;case"MultiPolygon":return On(e).geometry;default:throw Error(t+" is invalid")}},point:Dn,points:function(t,e,n){return void 0===n&&(n={}),An(t.map((function(t){return Dn(t,e)})),n)},polygon:Pn,polygons:function(t,e,n){return void 0===n&&(n={}),An(t.map((function(t){return Pn(t,e)})),n)},lineString:xn,lineStrings:function(t,e,n){return void 0===n&&(n={}),An(t.map((function(t){return xn(t,e)})),n)},featureCollection:An,multiLineString:Mn,multiPoint:kn,multiPolygon:On,geometryCollection:function(t,e,n){return void 0===n&&(n={}),En({type:"GeometryCollection",geometries:t},e,n)},round:function(t,e){if(void 0===e&&(e=0),e&&e<0)throw Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},radiansToLength:Sn,lengthToRadians:Ln,lengthToDegrees:function(t,e){return jn(Ln(t,e))},bearingToAzimuth:function(t){var e=t%360;return 0>e&&(e+=360),e},radiansToDegrees:jn,degreesToRadians:_n,convertLength:function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),t<0)throw Error("length must be a positive number");return Sn(Ln(t,e),n)},convertArea:function(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),t<0)throw Error("area must be a positive number");var r=wn[e];if(!r)throw Error("invalid original units");var o=wn[n];if(!o)throw Error("invalid final units");return t/r*o},isNumber:Rn,isObject:Cn,validateBBox:function(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Rn(t))throw Error("bbox must only contain numbers")}))},validateId:function(t){if(!t)throw Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw Error("id must be a number or a string")}});function Bn(t,e,n){if(null!==t)for(var r,o,i,a,s,u,c,l,f=0,p=0,h=t.type,d="FeatureCollection"===h,v="Feature"===h,y=d?t.features.length:1,g=0;y>g;g++){s=(l=!!(c=d?t.features[g].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;s>m;m++){var b=0,w=0;if(null!==(a=l?c.geometries[m]:c)){u=a.coordinates;var E=a.type;switch(f=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(u,p,g,b,w))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;u.length>r;r++){if(!1===e(u[r],p,g,b,w))return!1;p++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(r=0;u.length>r;r++){for(o=0;u[r].length-f>o;o++){if(!1===e(u[r][o],p,g,b,w))return!1;p++}"MultiLineString"===E&&b++,"Polygon"===E&&w++}"Polygon"===E&&b++;break;case"MultiPolygon":for(r=0;u.length>r;r++){for(w=0,o=0;u[r].length>o;o++){for(i=0;u[r][o].length-f>i;i++){if(!1===e(u[r][o][i],p,g,b,w))return!1;p++}w++}b++}break;case"GeometryCollection":for(r=0;a.geometries.length>r;r++)if(!1===Bn(a.geometries[r],e,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function Fn(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;t.features.length>n&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function In(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;t.features.length>n&&!1!==e(t.features[n],n);n++);}function Hn(t){var e=[];return Bn(t,(function(t){e.push(t)})),e}function Un(t,e){var n,r,o,i,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,v=h?t.features.length:1;for(n=0;v>n;n++){for(c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!(s=h?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;a>o;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;i.geometries.length>r;r++)if(!1===e(i.geometries[r],p,c,l,f))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,f))return!1;p++}}function Nn(t,e,n){var r=n;return Un(t,(function(t,o,i,a,s){r=0===o&&void 0===n?t:e(r,t,o,i,a,s)})),r}function Yn(t,e){Un(t,(function(t,n,r,o,i){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(En(t,r,{bbox:o,id:i}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;t.coordinates.length>u;u++){if(!1===e(En({type:a,coordinates:t.coordinates[u]},r),n,u))return!1}}))}function zn(t,e){Yn(t,(function(t,n,r){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var a,s=0,u=0,c=0;return!1!==Bn(t,(function(i,l,f,p,h){if(void 0===a||n>s||p>u||h>c)return a=i,s=n,u=p,c=h,void(o=0);var d=xn([a,i],t.properties);if(!1===e(d,n,r,h,o))return!1;o++,a=i}))&&void 0}}}))}function Xn(t,e,n){var r=n,o=!1;return zn(t,(function(t,i,a,s,u){r=!1===o&&void 0===n?t:e(r,t,i,a,s,u),o=!0})),r}function Wn(t,e){if(!t)throw Error("geojson is required");Yn(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var i=0;o.length>i;i++)if(!1===e(xn(o[i],t.properties),n,r,i))return!1}}}))}var qn=Object.freeze({__proto__:null,coordAll:Hn,coordEach:Bn,coordReduce:function(t,e,n,r){var o=n;return Bn(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},featureEach:In,featureReduce:function(t,e,n){var r=n;return In(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r},findPoint:function(t,e){if(!Cn(e=e||{}))throw Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":0>r&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Dn(u,s,e);case"MultiPoint":return 0>o&&(o=u.length+o),Dn(u[o],s,e);case"LineString":return 0>a&&(a=u.length+a),Dn(u[a],s,e);case"Polygon":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a),Dn(u[i][a],s,e);case"MultiLineString":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a),Dn(u[o][a],s,e);case"MultiPolygon":return 0>o&&(o=u.length+o),0>i&&(i=u[o].length+i),0>a&&(a=u[o][i].length-a),Dn(u[o][i][a],s,e)}throw Error("geojson is invalid")},findSegment:function(t,e){if(!Cn(e=e||{}))throw Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":0>r&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>a&&(a=u.length+a-1),xn([u[a],u[a+1]],s,e);case"Polygon":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a-1),xn([u[i][a],u[i][a+1]],s,e);case"MultiLineString":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a-1),xn([u[o][a],u[o][a+1]],s,e);case"MultiPolygon":return 0>o&&(o=u.length+o),0>i&&(i=u[o].length+i),0>a&&(a=u[o][i].length-a-1),xn([u[o][i][a],u[o][i][a+1]],s,e)}throw Error("geojson is invalid")},flattenEach:Yn,flattenReduce:function(t,e,n){var r=n;return Yn(t,(function(t,o,i){r=0===o&&0===i&&void 0===n?t:e(r,t,o,i)})),r},geomEach:Un,geomReduce:Nn,lineEach:Wn,lineReduce:function(t,e,n){var r=n;return Wn(t,(function(t,o,i,a){r=0===o&&void 0===n?t:e(r,t,o,i,a)})),r},propEach:Fn,propReduce:function(t,e,n){var r=n;return Fn(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r},segmentEach:zn,segmentReduce:Xn});function $n(t){var e=[1/0,1/0,-1/0,-1/0];return Bn(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),t[0]>e[2]&&(e[2]=t[0]),t[1]>e[3]&&(e[3]=t[1])})),e}function Gn(t){if(!t)throw Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw Error("coord must be GeoJSON Point or an Array of numbers")}function Vn(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Jn(t){return"Feature"===t.type?t.geometry:t}function Kn(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}function Zn(t,e,n,r,o){Qn(t,e,n||0,r||t.length-1,o||er)}function Qn(t,e,n,r,o){for(;r>n;){if(r-n>600){var i=r-n+1,a=e-n+1,s=Math.log(i),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(i-u)/i)*(0>a-i/2?-1:1);Qn(t,e,Math.max(n,Math.floor(e-a*u/i+c)),Math.min(r,Math.floor(e+(i-a)*u/i+c)),o)}var l=t[e],f=n,p=r;for(tr(t,n,e),o(t[r],l)>0&&tr(t,n,r);p>f;){for(tr(t,f,p),f++,p--;0>o(t[f],l);)f++;for(;o(t[p],l)>0;)p--}0===o(t[n],l)?tr(t,n,p):tr(t,++p,r),p>e||(n=p+1),e>p||(r=p-1)}}function tr(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function er(t,e){return e>t?-1:t>e?1:0}$n.default=$n;function nr(t,e,n){if(!n)return e.indexOf(t);for(let r=0;e.length>r;r++)if(n(t,e[r]))return r;return-1}function rr(t,e){or(t,0,t.children.length,e,t)}function or(t,e,n,r,o){o||(o=hr(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let i=e;n>i;i++){const e=t.children[i];ir(o,t.leaf?r(e):e)}return o}function ir(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function ar(t,e){return t.minX-e.minX}function sr(t,e){return t.minY-e.minY}function ur(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function cr(t){return t.maxX-t.minX+(t.maxY-t.minY)}function lr(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,i-r)}function fr(t,e){return!(t.minX>e.minX||t.minY>e.minY||e.maxX>t.maxX||e.maxY>t.maxY)}function pr(t,e){return!(e.minX>t.maxX||e.minY>t.maxY||t.minX>e.maxX||t.minY>e.maxY)}function hr(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dr(t,e,n,r,o){const i=[e,n];for(;i.length;){if(r>=(n=i.pop())-(e=i.pop()))continue;const a=e+Math.ceil((n-e)/r/2)*r;Zn(t,a,e,n,o),i.push(e,a,a,n)}}var vr=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!pr(t,e))return n;const r=this.toBBox,o=[];for(;e;){for(let i=0;e.children.length>i;i++){const a=e.children[i],s=e.leaf?r(a):a;pr(t,s)&&(e.leaf?n.push(a):fr(t,s)?this._all(a,n):o.push(a))}e=o.pop()}return n}collides(t){let e=this.data;if(!pr(t,e))return!1;const n=[];for(;e;){for(let r=0;e.children.length>r;r++){const o=e.children[r],i=e.leaf?this.toBBox(o):o;if(pr(t,i)){if(e.leaf||fr(t,i))return!0;n.push(o)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(this._minEntries>t.length){for(let e=0;t.length>e;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(e.height>this.data.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=hr([]),this}remove(t,e){if(!t)return this;let n=this.data;const r=this.toBBox(t),o=[],i=[];let a,s,u;for(;n||o.length;){if(n||(n=o.pop(),s=o[o.length-1],a=i.pop(),u=!0),n.leaf){const r=nr(t,n.children,e);if(-1!==r)return n.children.splice(r,1),o.push(n),this._condense(o),this}u||n.leaf||!fr(n,r)?s?(a++,n=s.children[a],u=!1):n=null:(o.push(n),i.push(a),a=0,s=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,r){const o=n-e+1;let i,a=this._maxEntries;if(a>=o)return i=hr(t.slice(e,n+1)),rr(i,this.toBBox),i;r||(a=Math.ceil(o/Math.pow(a,(r=Math.ceil(Math.log(o)/Math.log(a)))-1))),i=hr([]),i.leaf=!1,i.height=r;const s=Math.ceil(o/a),u=s*Math.ceil(Math.sqrt(a));dr(t,e,n,u,this.compareMinX);for(let o=e;n>=o;o+=u){const e=Math.min(o+u-1,n);dr(t,o,e,s,this.compareMinY);for(let n=o;e>=n;n+=s){i.children.push(this._build(t,n,Math.min(n+s-1,e),r-1))}}return rr(i,this.toBBox),i}_chooseSubtree(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){let n,r=1/0,a=1/0;for(let s=0;e.children.length>s;s++){const u=e.children[s],c=ur(u),l=(Math.max((i=u).maxX,(o=t).maxX)-Math.min(i.minX,o.minX))*(Math.max(i.maxY,o.maxY)-Math.min(i.minY,o.minY))-c;a>l?(a=l,r=r>c?c:r,n=u):l===a&&r>c&&(r=c,n=u)}e=n||e.children[0]}var o,i;return e}_insert(t,e,n){const r=n?t:this.toBBox(t),o=[],i=this._chooseSubtree(r,this.data,e,o);for(i.children.push(t),ir(i,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)}_split(t,e){const n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const i=this._chooseSplitIndex(n,o,r),a=hr(n.children.splice(i,n.children.length-i));a.height=n.height,a.leaf=n.leaf,rr(n,this.toBBox),rr(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=hr([t,e]),this.data.height=t.height+1,this.data.leaf=!1,rr(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,o=1/0,i=1/0;for(let a=e;n-e>=a;a++){const e=or(t,0,a,this.toBBox),s=or(t,a,n,this.toBBox),u=lr(e,s),c=ur(e)+ur(s);o>u?(o=u,r=a,i=i>c?c:i):u===o&&i>c&&(i=c,r=a)}return r||n-e}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:ar,o=t.leaf?this.compareMinY:sr,i=this._allDistMargin(t,e,n,r);this._allDistMargin(t,e,n,o)>i&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const o=this.toBBox,i=or(t,0,e,o),a=or(t,n-e,n,o);let s=cr(i)+cr(a);for(let r=e;n-e>r;r++){const e=t.children[r];ir(i,t.leaf?o(e):e),s+=cr(i)}for(let r=n-e-1;r>=e;r--){const e=t.children[r];ir(a,t.leaf?o(e):e),s+=cr(a)}return s}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)ir(e[r],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():rr(t[n],this.toBBox)}}});function yr(t,e){return e>t?-1:t>e?1:0}var gr=Object.freeze({__proto__:null,default:class{constructor(t=[],e=yr){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,r=e[t];for(;t>0;){const o=t-1>>1,i=e[o];if(n(r,i)>=0)break;e[t]=i,t=o}e[t]=r}_down(t){const{data:e,compare:n}=this,r=this.length>>1,o=e[t];for(;r>t;){let r=1+(t<<1),i=e[r];const a=r+1;if(this.length>a&&0>n(e[a],i)&&(r=a,i=e[a]),n(i,o)>=0)break;e[t]=i,t=r}e[t]=o}}}),mr=function(t,e,n,r){var o=t[0],i=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=(r-n)/2,u=0,c=s-1;s>u;c=u++){var l=e[n+2*u+0],f=e[n+2*u+1],p=e[n+2*c+1];f>i!=p>i&&(e[n+2*c+0]-l)*(i-f)/(p-f)+l>o&&(a=!a)}return a},br=function(t,e,n,r){var o=t[0],i=t[1],a=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var s=r-n,u=0,c=s-1;s>u;c=u++){var l=e[u+n][0],f=e[u+n][1],p=e[c+n][1];f>i!=p>i&&(e[c+n][0]-l)*(i-f)/(p-f)+l>o&&(a=!a)}return a},wr=function(t,e,n,r){return e.length>0&&Array.isArray(e[0])?br(t,e,n,r):mr(t,e,n,r)},Er=mr;wr.nested=br,wr.flat=Er;var Dr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pr(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}function xr(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}var Ar=Pr((function(t,e){!function(t){const e=134217729,n=33306690738754706e-32;function r(t,e,n,r,o){let i,a,s,u,c=e[0],l=r[0],f=0,p=0;l>c==l>-c?(i=c,c=e[++f]):(i=l,l=r[++p]);let h=0;if(t>f&&n>p)for(l>c==l>-c?(s=i-((a=c+i)-c),c=e[++f]):(s=i-((a=l+i)-l),l=r[++p]),i=a,0!==s&&(o[h++]=s);t>f&&n>p;)l>c==l>-c?(s=i-((a=i+c)-(u=a-i))+(c-u),c=e[++f]):(s=i-((a=i+l)-(u=a-i))+(l-u),l=r[++p]),i=a,0!==s&&(o[h++]=s);for(;t>f;)s=i-((a=i+c)-(u=a-i))+(c-u),c=e[++f],i=a,0!==s&&(o[h++]=s);for(;n>p;)s=i-((a=i+l)-(u=a-i))+(l-u),l=r[++p],i=a,0!==s&&(o[h++]=s);return 0===i&&0!==h||(o[h++]=i),h}function o(t){return new Float64Array(t)}const i=33306690738754716e-32,a=22204460492503146e-32,s=11093356479670487e-47,u=o(4),c=o(8),l=o(12),f=o(16),p=o(4);t.orient2d=function(t,o,h,d,v,y){const g=(o-y)*(h-v),m=(t-v)*(d-y),b=g-m;if(0===g||0===m||g>0!=m>0)return b;const w=Math.abs(g+m);return i*w>Math.abs(b)?-function(t,o,i,h,d,v,y){let g,m,b,w,E,D,P,x,A,M,k,O,S,L,j,_,R,C;const T=t-d,B=i-d,F=o-v,I=h-v;E=(j=(x=T-(P=(D=e*T)-(D-T)))*(M=I-(A=(D=e*I)-(D-I)))-((L=T*I)-P*A-x*A-P*M))-(k=j-(R=(x=F-(P=(D=e*F)-(D-F)))*(M=B-(A=(D=e*B)-(D-B)))-((_=F*B)-P*A-x*A-P*M))),u[0]=j-(k+E)+(E-R),E=(S=L-((O=L+k)-(E=O-L))+(k-E))-(k=S-_),u[1]=S-(k+E)+(E-_),E=(C=O+k)-O,u[2]=O-(C-E)+(k-E),u[3]=C;let H=function(t,e){let n=e[0];for(let r=1;t>r;r++)n+=e[r];return n}(4,u),U=a*y;if(H>=U||-H>=U)return H;if(g=t-(T+(E=t-T))+(E-d),b=i-(B+(E=i-B))+(E-d),m=o-(F+(E=o-F))+(E-v),w=h-(I+(E=h-I))+(E-v),0===g&&0===m&&0===b&&0===w)return H;if(U=s*y+n*Math.abs(H),(H+=T*w+I*g-(F*b+B*m))>=U||-H>=U)return H;E=(j=(x=g-(P=(D=e*g)-(D-g)))*(M=I-(A=(D=e*I)-(D-I)))-((L=g*I)-P*A-x*A-P*M))-(k=j-(R=(x=m-(P=(D=e*m)-(D-m)))*(M=B-(A=(D=e*B)-(D-B)))-((_=m*B)-P*A-x*A-P*M))),p[0]=j-(k+E)+(E-R),E=(S=L-((O=L+k)-(E=O-L))+(k-E))-(k=S-_),p[1]=S-(k+E)+(E-_),E=(C=O+k)-O,p[2]=O-(C-E)+(k-E),p[3]=C;const N=r(4,u,4,p,c);E=(j=(x=T-(P=(D=e*T)-(D-T)))*(M=w-(A=(D=e*w)-(D-w)))-((L=T*w)-P*A-x*A-P*M))-(k=j-(R=(x=F-(P=(D=e*F)-(D-F)))*(M=b-(A=(D=e*b)-(D-b)))-((_=F*b)-P*A-x*A-P*M))),p[0]=j-(k+E)+(E-R),E=(S=L-((O=L+k)-(E=O-L))+(k-E))-(k=S-_),p[1]=S-(k+E)+(E-_),E=(C=O+k)-O,p[2]=O-(C-E)+(k-E),p[3]=C;const Y=r(N,c,4,p,l);E=(j=(x=g-(P=(D=e*g)-(D-g)))*(M=w-(A=(D=e*w)-(D-w)))-((L=g*w)-P*A-x*A-P*M))-(k=j-(R=(x=m-(P=(D=e*m)-(D-m)))*(M=b-(A=(D=e*b)-(D-b)))-((_=m*b)-P*A-x*A-P*M))),p[0]=j-(k+E)+(E-R),E=(S=L-((O=L+k)-(E=O-L))+(k-E))-(k=S-_),p[1]=S-(k+E)+(E-_),E=(C=O+k)-O,p[2]=O-(C-E)+(k-E),p[3]=C;const z=r(Y,l,4,p,f);return f[z-1]}(t,o,h,d,v,y,w):b},t.orient2dfast=function(t,e,n,r,o,i){return(e-i)*(n-o)-(t-o)*(r-i)},Object.defineProperty(t,"__esModule",{value:!0})}(e)})),Mr=xr(vr),kr=xr(gr),Or=Ar.orient2d;kr.default&&(kr=kr.default);var Sr=Lr;function Lr(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=function(t){for(var e=t[0],n=t[0],r=t[0],o=t[0],i=0;t.length>i;i++){var a=t[i];e[0]>a[0]&&(e=a),a[0]>r[0]&&(r=a),n[1]>a[1]&&(n=a),a[1]>o[1]&&(o=a)}var s=[e,n,r,o],u=s.slice();for(i=0;t.length>i;i++)wr(t[i],s)||u.push(t[i]);return function(t){t.sort(Yr);for(var e=[],n=0;t.length>n;n++){for(;e.length>=2&&0>=Br(e[e.length-2],e[e.length-1],t[n]);)e.pop();e.push(t[n])}for(var r=[],o=t.length-1;o>=0;o--){for(;r.length>=2&&0>=Br(r[r.length-2],r[r.length-1],t[o]);)r.pop();r.push(t[o])}return r.pop(),e.pop(),e.concat(r)}(u)}(t),o=new Mr(16);o.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},o.compareMinX=function(t,e){return t[0]-e[0]},o.compareMinY=function(t,e){return t[1]-e[1]},o.load(t);for(var i,a=[],s=0;r.length>s;s++){var u=r[s];o.remove(u),i=Ir(u,i),a.push(i)}var c=new Mr(16);for(s=0;a.length>s;s++)c.insert(Fr(a[s]));for(var l=e*e,f=n*n;a.length;){var p=a.shift(),h=p.p,d=p.next.p,v=Hr(h,d);if(v>=f){var y=v/l;(u=jr(o,p.prev.p,h,d,p.next.next.p,y,c))&&Math.min(Hr(u,h),Hr(u,d))<=y&&(a.push(p),a.push(Ir(u,p)),o.remove(u),c.remove(p),c.insert(Fr(p)),c.insert(Fr(p.next)))}}p=i;var g=[];do{g.push(p.p),p=p.next}while(p!==i);return g.push(p.p),g}function jr(t,e,n,r,o,i,a){for(var s=new kr([],_r),u=t.data;u;){for(var c=0;u.children.length>c;c++){var l=u.children[c],f=u.leaf?Ur(l,n,r):Rr(n,r,l);i<f||s.push({node:l,dist:f})}for(;s.length&&!s.peek().node.children;){var p=s.pop(),h=p.node,d=Ur(h,e,n),v=Ur(h,r,o);if(d>p.dist&&v>p.dist&&Tr(n,h,a)&&Tr(r,h,a))return h}(u=s.pop())&&(u=u.node)}return null}function _r(t,e){return t.dist-e.dist}function Rr(t,e,n){if(Cr(t,n)||Cr(e,n))return 0;var r=Nr(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var o=Nr(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===o)return 0;var i=Nr(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===i)return 0;var a=Nr(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===a?0:Math.min(r,o,i,a)}function Cr(t,e){return!(e.minX>t[0]||t[0]>e.maxX||e.minY>t[1]||t[1]>e.maxY)}function Tr(t,e,n){for(var r,o,i,a,s=n.search({minX:Math.min(t[0],e[0]),minY:Math.min(t[1],e[1]),maxX:Math.max(t[0],e[0]),maxY:Math.max(t[1],e[1])}),u=0;s.length>u;u++)if(o=s[u].next.p,i=t,(r=s[u].p)!==(a=e)&&o!==i&&Br(r,o,i)>0!=Br(r,o,a)>0&&Br(i,a,r)>0!=Br(i,a,o)>0)return!1;return!0}function Br(t,e,n){return Or(t[0],t[1],e[0],e[1],n[0],n[1])}function Fr(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function Ir(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function Hr(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ur(t,e,n){var r=e[0],o=e[1],i=n[0]-r,a=n[1]-o;if(0!==i||0!==a){var s=((t[0]-r)*i+(t[1]-o)*a)/(i*i+a*a);s>1?(r=n[0],o=n[1]):s>0&&(r+=i*s,o+=a*s)}return(i=t[0]-r)*i+(a=t[1]-o)*a}function Nr(t,e,n,r,o,i,a,s){var u,c,l,f,p=n-t,h=r-e,d=a-o,v=s-i,y=t-o,g=e-i,m=p*p+h*h,b=p*d+h*v,w=d*d+v*v,E=p*y+h*g,D=d*y+v*g,P=m*w-b*b,x=P,A=P;0===P?(c=0,x=1,f=D,A=w):(f=m*D-b*E,0>(c=b*D-w*E)?(c=0,f=D,A=w):c>x&&(c=x,f=D+b,A=w)),0>f?(f=0,0>-E?c=0:-E>m?c=x:(c=-E,x=m)):f>A&&(f=A,0>-E+b?c=0:-E+b>m?c=x:(c=-E+b,x=m));var M=(1-(l=0===f?0:f/A))*o+l*a-((1-(u=0===c?0:c/x))*t+u*n),k=(1-l)*i+l*s-((1-u)*e+u*r);return M*M+k*k}function Yr(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function zr(t,e,n){void 0===n&&(n={});var r=Gn(t),o=Gn(e),i=_n(o[1]-r[1]),a=_n(o[0]-r[0]),s=_n(r[1]),u=_n(o[1]),c=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(s)*Math.cos(u);return Sn(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function Xr(t){return function(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),i=Number(t[3]);if(6===t.length)throw Error("@turf/bbox-polygon does not support BBox with 6 positions");var a=[n,r];return Pn([[a,[o,r],[o,i],[n,i],a]],e.properties,{bbox:t,id:e.id})}($n(t))}function Wr(t,e,n,r){void 0===r&&(r={});var o=Gn(t),i=_n(o[0]),a=_n(o[1]),s=_n(n),u=Ln(e,r.units),c=Math.asin(Math.sin(a)*Math.cos(u)+Math.cos(a)*Math.sin(u)*Math.cos(s));return Dn([jn(i+Math.atan2(Math.sin(s)*Math.sin(u)*Math.cos(a),Math.cos(u)-Math.sin(a)*Math.sin(c))),jn(c)],r.properties)}function qr(t,e,n){if(void 0===n&&(n={}),!0===n.final)return function(t,e){var n=qr(e,t);return n=(n+180)%360}(t,e);var r=Gn(t),o=Gn(e),i=_n(r[0]),a=_n(o[0]),s=_n(r[1]),u=_n(o[1]);return jn(Math.atan2(Math.sin(a-i)*Math.cos(u),Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(a-i)))}function $r(t,e){void 0===e&&(e={});var n=$n(t);return Dn([(n[0]+n[2])/2,(n[1]+n[3])/2],e.properties,e)}function Gr(t,e){void 0===e&&(e={});var n=0,r=0,o=0;return Bn(t,(function(t){n+=t[0],r+=t[1],o++}),!0),Dn([n/o,r/o],e.properties)}function Vr(t,e){switch(void 0===e&&(e={}),Kn(t)){case"Point":return Dn(Gn(t),e.properties);case"Polygon":var n=[];Bn(t,(function(t){n.push(t)}));var r,o,i,a,s,u,c,l,f=Gr(t,{properties:e.properties}),p=f.geometry.coordinates,h=0,d=0,v=0,y=n.map((function(t){return[t[0]-p[0],t[1]-p[1]]}));for(r=0;n.length-1>r;r++)v+=l=(a=(o=y[r])[0])*(c=(i=y[r+1])[1])-(s=i[0])*(u=o[1]),h+=(a+s)*l,d+=(u+c)*l;if(0===v)return f;var g=1/(6*(.5*v));return Dn([p[0]+g*h,p[1]+g*d],e.properties);default:var m=function(t,e){void 0===e&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(Bn(t,(function(t){n.push([t[0],t[1]])})),!n.length)return null;var r=Sr(n,e.concavity);return r.length>3?Pn([r]):null}(t);return m?Vr(m,{properties:e.properties}):Gr(t,{properties:e.properties})}}function Jr(t){if(!t)throw Error("geojson is required");var e=[];return Yn(t,(function(t){!function(t,e){var n=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":n=Vn(r);break;case"LineString":n=[Vn(r)]}n.forEach((function(n){var r=function(t,e){var n=[];return t.reduce((function(t,r){var o,i,a,s,u,c,l=xn([t,r],e);return l.bbox=[(u=(i=r)[0])>(a=(o=t)[0])?a:u,(c=i[1])>(s=o[1])?s:c,a>u?a:u,s>c?s:c],n.push(l),r})),n}(n,t.properties);r.forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),An(e)}Sr.default=Lr;function Kr(t,e,n){if(!n)return e.indexOf(t);for(let r=0;e.length>r;r++)if(n(t,e[r]))return r;return-1}function Zr(t,e){Qr(t,0,t.children.length,e,t)}function Qr(t,e,n,r,o){o||(o=uo(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let i=e;n>i;i++){const e=t.children[i];to(o,t.leaf?r(e):e)}return o}function to(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function eo(t,e){return t.minX-e.minX}function no(t,e){return t.minY-e.minY}function ro(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function oo(t){return t.maxX-t.minX+(t.maxY-t.minY)}function io(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,i-r)}function ao(t,e){return!(t.minX>e.minX||t.minY>e.minY||e.maxX>t.maxX||e.maxY>t.maxY)}function so(t,e){return!(e.minX>t.maxX||e.minY>t.maxY||t.minX>e.maxX||t.minY>e.maxY)}function uo(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function co(t,e,n,r,o){const i=[e,n];for(;i.length;){if(r>=(n=i.pop())-(e=i.pop()))continue;const a=e+Math.ceil((n-e)/r/2)*r;Zn(t,a,e,n,o),i.push(e,a,a,n)}}var lo,fo=Object.freeze({__proto__:null,default:class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!so(t,e))return n;const r=this.toBBox,o=[];for(;e;){for(let i=0;e.children.length>i;i++){const a=e.children[i],s=e.leaf?r(a):a;so(t,s)&&(e.leaf?n.push(a):ao(t,s)?this._all(a,n):o.push(a))}e=o.pop()}return n}collides(t){let e=this.data;if(!so(t,e))return!1;const n=[];for(;e;){for(let r=0;e.children.length>r;r++){const o=e.children[r],i=e.leaf?this.toBBox(o):o;if(so(t,i)){if(e.leaf||ao(t,i))return!0;n.push(o)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(this._minEntries>t.length){for(let e=0;t.length>e;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(e.height>this.data.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=uo([]),this}remove(t,e){if(!t)return this;let n=this.data;const r=this.toBBox(t),o=[],i=[];let a,s,u;for(;n||o.length;){if(n||(n=o.pop(),s=o[o.length-1],a=i.pop(),u=!0),n.leaf){const r=Kr(t,n.children,e);if(-1!==r)return n.children.splice(r,1),o.push(n),this._condense(o),this}u||n.leaf||!ao(n,r)?s?(a++,n=s.children[a],u=!1):n=null:(o.push(n),i.push(a),a=0,s=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,r){const o=n-e+1;let i,a=this._maxEntries;if(a>=o)return i=uo(t.slice(e,n+1)),Zr(i,this.toBBox),i;r||(a=Math.ceil(o/Math.pow(a,(r=Math.ceil(Math.log(o)/Math.log(a)))-1))),i=uo([]),i.leaf=!1,i.height=r;const s=Math.ceil(o/a),u=s*Math.ceil(Math.sqrt(a));co(t,e,n,u,this.compareMinX);for(let o=e;n>=o;o+=u){const e=Math.min(o+u-1,n);co(t,o,e,s,this.compareMinY);for(let n=o;e>=n;n+=s){i.children.push(this._build(t,n,Math.min(n+s-1,e),r-1))}}return Zr(i,this.toBBox),i}_chooseSubtree(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){let n,r=1/0,a=1/0;for(let s=0;e.children.length>s;s++){const u=e.children[s],c=ro(u),l=(Math.max((i=u).maxX,(o=t).maxX)-Math.min(i.minX,o.minX))*(Math.max(i.maxY,o.maxY)-Math.min(i.minY,o.minY))-c;a>l?(a=l,r=r>c?c:r,n=u):l===a&&r>c&&(r=c,n=u)}e=n||e.children[0]}var o,i;return e}_insert(t,e,n){const r=n?t:this.toBBox(t),o=[],i=this._chooseSubtree(r,this.data,e,o);for(i.children.push(t),to(i,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)}_split(t,e){const n=t[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const i=this._chooseSplitIndex(n,o,r),a=uo(n.children.splice(i,n.children.length-i));a.height=n.height,a.leaf=n.leaf,Zr(n,this.toBBox),Zr(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)}_splitRoot(t,e){this.data=uo([t,e]),this.data.height=t.height+1,this.data.leaf=!1,Zr(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,o=1/0,i=1/0;for(let a=e;n-e>=a;a++){const e=Qr(t,0,a,this.toBBox),s=Qr(t,a,n,this.toBBox),u=io(e,s),c=ro(e)+ro(s);o>u?(o=u,r=a,i=i>c?c:i):u===o&&i>c&&(i=c,r=a)}return r||n-e}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:eo,o=t.leaf?this.compareMinY:no,i=this._allDistMargin(t,e,n,r);this._allDistMargin(t,e,n,o)>i&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const o=this.toBBox,i=Qr(t,0,e,o),a=Qr(t,n-e,n,o);let s=oo(i)+oo(a);for(let r=e;n-e>r;r++){const e=t.children[r];to(i,t.leaf?o(e):e),s+=oo(i)}for(let r=n-e-1;r>=e;r--){const e=t.children[r];to(a,t.leaf?o(e):e),s+=oo(a)}return s}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)to(e[r],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():Zr(t[n],this.toBBox)}}}),po=Object.prototype.toString,ho=function(t){var e=po.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===po.call(t.callee)),n};if(!Object.keys){var vo=Object.prototype.hasOwnProperty,yo=Object.prototype.toString,go=ho,mo=Object.prototype.propertyIsEnumerable,bo=!mo.call({toString:null},"toString"),wo=mo.call((function(){}),"prototype"),Eo=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Do=function(t){var e=t.constructor;return e&&e.prototype===t},Po={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},xo=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!Po["$"+t]&&vo.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{Do(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();lo=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===yo.call(t),r=go(t),o=e&&"[object String]"===yo.call(t),i=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var a=wo&&n;if(o&&t.length>0&&!vo.call(t,0))for(var s=0;t.length>s;++s)i.push(s+"");if(r&&t.length>0)for(var u=0;t.length>u;++u)i.push(u+"");else for(var c in t)a&&"prototype"===c||!vo.call(t,c)||i.push(c+"");if(bo)for(var l=function(t){if("undefined"==typeof window||!xo)return Do(t);try{return Do(t)}catch(t){return!1}}(t),f=0;Eo.length>f;++f)l&&"constructor"===Eo[f]||!vo.call(t,Eo[f])||i.push(Eo[f]);return i}}var Ao=Array.prototype.slice,Mo=Object.keys,ko=Mo?function(t){return Mo(t)}:lo,Oo=Object.keys;ko.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return ho(t)?Oo(Ao.call(t)):Oo(t)})}else Object.keys=ko;return Object.keys||ko};var So,Lo=ko,jo=Error,_o=EvalError,Ro=RangeError,Co=ReferenceError,To=SyntaxError,Bo=TypeError,Fo=URIError,Io=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(t,e);if(42!==o.value||!0!==o.enumerable)return!1}return!0},Ho="undefined"!=typeof Symbol&&Symbol,Uo=function(){return"function"==typeof Ho&&("function"==typeof Symbol&&("symbol"==typeof Ho("foo")&&("symbol"==typeof Symbol("bar")&&Io())))},No={__proto__:null,foo:{}},Yo=Object,zo=Object.prototype.toString,Xo=Math.max,Wo=function(t,e){for(var n=[],r=0;t.length>r;r+=1)n[r]=t[r];for(var o=0;e.length>o;o+=1)n[o+t.length]=e[o];return n},qo=Function.prototype.bind||function(t){var e=this;if("function"!=typeof e||"[object Function]"!==zo.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,r=function(t,e){for(var n=[],r=e||0,o=0;t.length>r;r+=1,o+=1)n[o]=t[r];return n}(arguments,1),o=Xo(0,e.length-r.length),i=[],a=0;o>a;a++)i[a]="$"+a;if(n=Function("binder","return function ("+function(t,e){for(var n="",r=0;t.length>r;r+=1)n+=t[r],t.length>r+1&&(n+=e);return n}(i,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var o=e.apply(this,Wo(r,arguments));return Object(o)===o?o:this}return e.apply(t,Wo(r,arguments))})),e.prototype){var s=function(){};s.prototype=e.prototype,n.prototype=new s,s.prototype=null}return n},$o=qo.call(Function.prototype.call,Object.prototype.hasOwnProperty),Go=Function,Vo=function(t){try{return Go('"use strict"; return ('+t+").constructor;")()}catch(t){}},Jo=Object.getOwnPropertyDescriptor;if(Jo)try{Jo({},"")}catch(t){Jo=null}var Ko=function(){throw new Bo},Zo=Jo?function(){try{return Ko}catch(t){try{return Jo(arguments,"callee").get}catch(t){return Ko}}}():Ko,Qo=Uo(),ti=Object.getPrototypeOf||({__proto__:No}.foo===No.foo&&!(No instanceof Yo)?function(t){return t.__proto__}:null),ei={},ni="undefined"!=typeof Uint8Array&&ti?ti(Uint8Array):So,ri={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?So:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?So:ArrayBuffer,"%ArrayIteratorPrototype%":Qo&&ti?ti([][Symbol.iterator]()):So,"%AsyncFromSyncIteratorPrototype%":So,"%AsyncFunction%":ei,"%AsyncGenerator%":ei,"%AsyncGeneratorFunction%":ei,"%AsyncIteratorPrototype%":ei,"%Atomics%":"undefined"==typeof Atomics?So:Atomics,"%BigInt%":"undefined"==typeof BigInt?So:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?So:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?So:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?So:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":jo,"%eval%":eval,"%EvalError%":_o,"%Float32Array%":"undefined"==typeof Float32Array?So:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?So:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?So:FinalizationRegistry,"%Function%":Go,"%GeneratorFunction%":ei,"%Int8Array%":"undefined"==typeof Int8Array?So:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?So:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?So:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qo&&ti?ti(ti([][Symbol.iterator]())):So,"%JSON%":"object"==typeof JSON?JSON:So,"%Map%":"undefined"==typeof Map?So:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Qo&&ti?ti((new Map)[Symbol.iterator]()):So,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?So:Promise,"%Proxy%":"undefined"==typeof Proxy?So:Proxy,"%RangeError%":Ro,"%ReferenceError%":Co,"%Reflect%":"undefined"==typeof Reflect?So:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?So:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Qo&&ti?ti((new Set)[Symbol.iterator]()):So,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?So:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qo&&ti?ti(""[Symbol.iterator]()):So,"%Symbol%":Qo?Symbol:So,"%SyntaxError%":To,"%ThrowTypeError%":Zo,"%TypedArray%":ni,"%TypeError%":Bo,"%Uint8Array%":"undefined"==typeof Uint8Array?So:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?So:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?So:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?So:Uint32Array,"%URIError%":Fo,"%WeakMap%":"undefined"==typeof WeakMap?So:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?So:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?So:WeakSet};if(ti)try{null.error}catch(t){var oi=ti(ti(t));ri["%Error.prototype%"]=oi}var ii=function t(e){var n;if("%AsyncFunction%"===e)n=Vo("async function () {}");else if("%GeneratorFunction%"===e)n=Vo("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=Vo("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var o=t("%AsyncGenerator%");o&&ti&&(n=ti(o.prototype))}return ri[e]=n,n},ai={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},si=qo.call(Function.call,Array.prototype.concat),ui=qo.call(Function.apply,Array.prototype.splice),ci=qo.call(Function.call,String.prototype.replace),li=qo.call(Function.call,String.prototype.slice),fi=qo.call(Function.call,RegExp.prototype.exec),pi=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hi=/\\(\\)?/g,di=function(t,e){var n,r=t;if($o(ai,r)&&(r="%"+(n=ai[r])[0]+"%"),$o(ri,r)){var o=ri[r];if(o===ei&&(o=ii(r)),void 0===o&&!e)throw new Bo("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new To("intrinsic "+t+" does not exist!")},vi=function(t,e){if("string"!=typeof t||0===t.length)throw new Bo("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new Bo('"allowMissing" argument must be a boolean');if(null===fi(/^%?[^%]*%?$/,t))throw new To("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=li(t,0,1),n=li(t,-1);if("%"===e&&"%"!==n)throw new To("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new To("invalid intrinsic syntax, expected opening `%`");var r=[];return ci(t,pi,(function(t,e,n,o){r[r.length]=n?ci(o,hi,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",o=di("%"+r+"%",e),i=o.name,a=o.value,s=!1,u=o.alias;u&&(r=u[0],ui(n,si([0,1],u)));for(var c=1,l=!0;n.length>c;c+=1){var f=n[c],p=li(f,0,1),h=li(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===h||"'"===h||"`"===h)&&p!==h)throw new To("property names with quotes must have matching quotes");if("constructor"!==f&&l||(s=!0),$o(ri,i="%"+(r+="."+f)+"%"))a=ri[i];else if(null!=a){if(!(f in a)){if(!e)throw new Bo("base intrinsic for "+t+" exists, but the property is not available.");return}if(Jo&&c+1>=n.length){var d=Jo(a,f);a=(l=!!d)&&"get"in d&&!("originalValue"in d.get)?d.get:a[f]}else l=$o(a,f),a=a[f];l&&!s&&(ri[i]=a)}}return a},yi=vi("%Object.defineProperty%",!0)||!1;if(yi)try{yi({},"a",{value:1})}catch(t){yi=!1}var gi=yi,mi=vi("%Object.getOwnPropertyDescriptor%",!0);if(mi)try{mi([],"length")}catch(t){mi=null}var bi=mi,wi=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Bo("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new Bo("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Bo("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Bo("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Bo("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Bo("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,i=arguments.length>5?arguments[5]:null,a=arguments.length>6&&arguments[6],s=!!bi&&bi(t,e);if(gi)gi(t,e,{configurable:null===i&&s?s.configurable:!i,enumerable:null===r&&s?s.enumerable:!r,value:n,writable:null===o&&s?s.writable:!o});else{if(!a&&(r||o||i))throw new To("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}},Ei=function(){return!!gi};Ei.hasArrayLengthDefineBug=function(){if(!gi)return null;try{return 1!==gi([],"length",{value:1}).length}catch(t){return!0}};var Di=Ei,Pi="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),xi=Object.prototype.toString,Ai=Array.prototype.concat,Mi=Di(),ki=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(o=r)||"[object Function]"!==xi.call(o)||!r())return;var o;Mi?wi(t,e,n,!0):wi(t,e,n)},Oi=function(t,e){var n=arguments.length>2?arguments[2]:{},r=Lo(e);Pi&&(r=Ai.call(r,Object.getOwnPropertySymbols(e)));for(var o=0;r.length>o;o+=1)ki(t,r[o],e[r[o]],n[r[o]])};Oi.supportsDescriptors=!!Mi;var Si=Oi,Li=Di(),ji=vi("%Math.floor%"),_i=Pr((function(t){var e=vi("%Function.prototype.apply%"),n=vi("%Function.prototype.call%"),r=vi("%Reflect.apply%",!0)||qo.call(n,e),o=vi("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new Bo("a function is required");return function(t,e){if("function"!=typeof t)throw new Bo("`fn` is not a function");if("number"!=typeof e||0>e||e>4294967295||ji(e)!==e)throw new Bo("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,o=!0;if("length"in t&&bi){var i=bi(t,"length");i&&!i.configurable&&(r=!1),i&&!i.writable&&(o=!1)}return(r||o||!n)&&(Li?wi(t,"length",e,!0,!0):wi(t,"length",e)),t}(r(qo,n,arguments),1+o(0,t.length-(arguments.length-1)),!0)};var i=function(){return r(qo,e,arguments)};gi?gi(t.exports,"apply",{value:i}):t.exports.apply=i})),Ri=_i(vi("String.prototype.indexOf")),Ci=function(t,e){var n=vi(t,!!e);return"function"==typeof n&&Ri(t,".prototype.")>-1?_i(n):n},Ti=Io(),Bi=Object,Fi=Ci("Array.prototype.push"),Ii=Ci("Object.prototype.propertyIsEnumerable"),Hi=Ti?Object.getOwnPropertySymbols:null,Ui=function(t,e){if(null==t)throw new TypeError("target must be an object");var n=Bi(t);if(1===arguments.length)return n;for(var r=1;arguments.length>r;++r){var o=Bi(arguments[r]),i=Lo(o),a=Ti&&(Object.getOwnPropertySymbols||Hi);if(a)for(var s=a(o),u=0;s.length>u;++u){var c=s[u];Ii(o,c)&&Fi(i,c)}for(var l=0;i.length>l;++l){var f=i[l];if(Ii(o,f))n[f]=o[f]}}return n},Ni=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},r=0;e.length>r;++r)n[e[r]]=e[r];var o=Object.assign({},n),i="";for(var a in o)i+=a;return t!==i}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?Ui:Object.assign:Ui},Yi=_i.apply(Ni()),zi=function(t,e){return Yi(Object,arguments)};Si(zi,{getPolyfill:Ni,implementation:Ui,shim:function(){var t=Ni();return Si(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t}});var Xi=zi,Wi=function(){return!0},qi=Object.getOwnPropertyDescriptor;if(qi)try{qi([],"length")}catch(t){qi=null}Wi.functionsHaveConfigurableNames=function(){if(!qi)return!1;var t=qi((function(){}),"name");return!!t&&!!t.configurable};var $i=Function.prototype.bind;Wi.boundFunctionsHaveNames=function(){return"function"==typeof $i&&""!==function(){}.bind().name};var Gi=Wi,Vi=Di(),Ji=Gi.functionsHaveConfigurableNames(),Ki=Object,Zi=function(t,e){if("function"!=typeof t)throw new Bo("`fn` is not a function");return arguments.length>2&&!!arguments[2]&&!Ji||(Vi?wi(t,"name",e,!0,!0):wi(t,"name",e)),t}((function(){if(null==this||this!==Ki(this))throw new Bo("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"get flags",!0),Qi=Si.supportsDescriptors,ta=Object.getOwnPropertyDescriptor,ea=function(){if(Qi){var t=ta(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(n,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return Zi},na=Si.supportsDescriptors,ra=Object.getOwnPropertyDescriptor,oa=Object.defineProperty,ia=TypeError,aa=Object.getPrototypeOf,sa=/a/,ua=_i(ea());Si(ua,{getPolyfill:ea,implementation:Zi,shim:function(){if(!na||!aa)throw new ia("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=ea(),e=aa(sa),n=ra(e,"flags");return n&&n.get===t||oa(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}});var ca=ua,la=function(){return Io()&&!!Symbol.toStringTag},fa=la(),pa=Ci("Object.prototype.toString"),ha=function(t){return!(fa&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===pa(t)},da=function(t){return!!ha(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==pa(t)&&"[object Function]"===pa(t.callee)},va=function(){return ha(arguments)}();ha.isLegacyArguments=da;var ya=va?ha:da,ga=[],ma=[],ba="undefined"!=typeof Uint8Array?Uint8Array:Array,wa=!1;function Ea(){wa=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;64>e;++e)ga[e]=t[e],ma[t.charCodeAt(e)]=e;ma[45]=62,ma[95]=63}function Da(t,e,n){for(var r,o=[],i=e;n>i;i+=3)o.push(ga[(r=(t[i]<<16)+(t[i+1]<<8)+t[i+2])>>18&63]+ga[r>>12&63]+ga[r>>6&63]+ga[63&r]);return o.join("")}function Pa(t){var e;wa||Ea();for(var n=t.length,r=n%3,o="",i=[],a=16383,s=0,u=n-r;u>s;s+=a)i.push(Da(t,s,s+a>u?u:s+a));return 1===r?(o+=ga[(e=t[n-1])>>2],o+=ga[e<<4&63],o+="=="):2===r&&(o+=ga[(e=(t[n-2]<<8)+t[n-1])>>10],o+=ga[e>>4&63],o+=ga[e<<2&63],o+="="),i.push(o),i.join("")}function xa(t,e,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?o-1:0,p=n?-1:1,h=t[e+f];for(f+=p,i=h&(1<<-l)-1,h>>=-l,l+=s;l>0;i=256*i+t[e+f],f+=p,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=p,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=c}return(h?-1:1)*a*Math.pow(2,i-r)}function Aa(t,e,n,r,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,p=23===o?5.960464477539062e-8:0,h=r?0:i-1,d=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=l):(1>e*(u=Math.pow(2,-(a=Math.floor(Math.log(e)/Math.LN2))))&&(a--,u*=2),2>(e+=1>a+f?p*Math.pow(2,1-f):p/u)*u||(a++,u/=2),l>a+f?1>a+f?(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0):(s=(e*u-1)*Math.pow(2,o),a+=f):(s=0,a=l));o>=8;t[n+h]=255&s,h+=d,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;t[n+h]=255&a,h+=d,a/=256,c-=8);t[n+h-d]|=128*v}var Ma={}.toString,ka=Array.isArray||function(t){return"[object Array]"==Ma.call(t)};function Oa(){return La.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Sa(t,e){if(Oa()<e)throw new RangeError("Invalid typed array length");return La.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=La.prototype:(null===t&&(t=new La(e)),t.length=e),t}function La(t,e,n){if(!(La.TYPED_ARRAY_SUPPORT||this instanceof La))return new La(t,e,n);if("number"==typeof t){if("string"==typeof e)throw Error("If encoding is specified then the first argument must be a string");return Ra(this,t)}return ja(this,t,e,n)}function ja(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(0>n||n>e.byteLength)throw new RangeError("'offset' is out of bounds");if(n+(r||0)>e.byteLength)throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);La.TYPED_ARRAY_SUPPORT?(t=e).__proto__=La.prototype:t=Ca(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!La.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Fa(e,n);t=Sa(t,r);var o=t.write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(Ba(e)){var n=0|Ta(e.length);return 0===(t=Sa(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?Sa(t,0):Ca(t,e);if("Buffer"===e.type&&ka(e.data))return Ca(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function _a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function Ra(t,e){if(_a(e),t=Sa(t,0>e?0:0|Ta(e)),!La.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;++n)t[n]=0;return t}function Ca(t,e){var n=0>e.length?0:0|Ta(e.length);t=Sa(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function Ta(t){if(t>=Oa())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Oa().toString(16)+" bytes");return 0|t}function Ba(t){return!(null==t||!t._isBuffer)}function Fa(t,e){if(Ba(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return ls(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return fs(t).length;default:if(r)return ls(t).length;e=(""+e).toLowerCase(),r=!0}}function Ia(t,e,n){var r=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((e>>>=0)>=(n>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Qa(this,e,n);case"utf8":case"utf-8":return Va(this,e,n);case"ascii":return Ka(this,e,n);case"latin1":case"binary":return Za(this,e,n);case"base64":return Ga(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ts(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function Ha(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Ua(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),isNaN(n=+n)&&(n=o?0:t.length-1),0>n&&(n=t.length+n),t.length>n){if(0>n){if(!o)return-1;n=0}}else{if(o)return-1;n=t.length-1}if("string"==typeof e&&(e=La.from(e,r)),Ba(e))return 0===e.length?-1:Na(t,e,n,r,o);if("number"==typeof e)return e&=255,La.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Na(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Na(t,e,n,r,o){var i,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>t.length||2>e.length)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=n;s>i;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var f=!0,p=0;u>p;p++)if(c(t,i+p)!==c(e,p)){f=!1;break}if(f)return i}return-1}function Ya(t,e,n,r){var o=t.length-(n=Number(n)||0);r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;r>a;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function za(t,e,n,r){return ps(ls(e,t.length-n),t,n,r)}function Xa(t,e,n,r){return ps(function(t){for(var e=[],n=0;t.length>n;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function Wa(t,e,n,r){return Xa(t,e,n,r)}function qa(t,e,n,r){return ps(fs(e),t,n,r)}function $a(t,e,n,r){return ps(function(t,e){for(var n,r,o=[],i=0;t.length>i&&0<=(e-=2);++i)r=(n=t.charCodeAt(i))>>8,o.push(n%256),o.push(r);return o}(e,t.length-n),t,n,r)}function Ga(t,e,n){return Pa(0===e&&n===t.length?t:t.slice(e,n))}function Va(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;n>o;){var i,a,s,u,c=t[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(n>=o+f)switch(f){case 1:128>c&&(l=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:a=t[o+2],128==(192&(i=t[o+1]))&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(55296>u||u>57343)&&(l=u);break;case 4:a=t[o+2],s=t[o+3],128==(192&(i=t[o+1]))&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&1114112>u&&(l=u)}null===l?(l=65533,f=1):l>65535&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(t){var e=t.length;if(Ja>=e)return String.fromCharCode.apply(String,t);var n="",r=0;for(;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Ja));return n}(r)}La.TYPED_ARRAY_SUPPORT=void 0===o.TYPED_ARRAY_SUPPORT||o.TYPED_ARRAY_SUPPORT,La.poolSize=8192,La._augment=function(t){return t.__proto__=La.prototype,t},La.from=function(t,e,n){return ja(null,t,e,n)},La.TYPED_ARRAY_SUPPORT&&(La.prototype.__proto__=Uint8Array.prototype,La.__proto__=Uint8Array),La.alloc=function(t,e,n){return function(t,e,n,r){return _a(e),e>0&&void 0!==n?"string"==typeof r?Sa(t,e).fill(n,r):Sa(t,e).fill(n):Sa(t,e)}(null,t,e,n)},La.allocUnsafe=function(t){return Ra(null,t)},La.allocUnsafeSlow=function(t){return Ra(null,t)},La.isBuffer=function(t){return null!=t&&(!!t._isBuffer||hs(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&hs(t.slice(0,0))}(t))},La.compare=function(t,e){if(!Ba(t)||!Ba(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);i>o;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return r>n?-1:n>r?1:0},La.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},La.concat=function(t,e){if(!ka(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return La.alloc(0);var n;if(void 0===e)for(e=0,n=0;t.length>n;++n)e+=t[n].length;var r=La.allocUnsafe(e),o=0;for(n=0;t.length>n;++n){var i=t[n];if(!Ba(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},La.byteLength=Fa,La.prototype._isBuffer=!0,La.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;t>e;e+=2)Ha(this,e,e+1);return this},La.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;t>e;e+=4)Ha(this,e,e+3),Ha(this,e+1,e+2);return this},La.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;t>e;e+=8)Ha(this,e,e+7),Ha(this,e+1,e+6),Ha(this,e+2,e+5),Ha(this,e+3,e+4);return this},La.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Va(this,0,t):Ia.apply(this,arguments)},La.prototype.equals=function(t){if(!Ba(t))throw new TypeError("Argument must be a Buffer");return this===t||0===La.compare(this,t)},La.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},La.prototype.compare=function(t,e,n,r,o){if(!Ba(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>e||n>t.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(r,o),c=t.slice(e,n),l=0;s>l;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return a>i?-1:i>a?1:0},La.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},La.prototype.indexOf=function(t,e,n){return Ua(this,t,e,n,!0)},La.prototype.lastIndexOf=function(t,e,n){return Ua(this,t,e,n,!1)},La.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return Ya(this,t,e,n);case"utf8":case"utf-8":return za(this,t,e,n);case"ascii":return Xa(this,t,e,n);case"latin1":case"binary":return Wa(this,t,e,n);case"base64":return qa(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $a(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},La.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ja=4096;function Ka(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;++o)r+=String.fromCharCode(127&t[o]);return r}function Za(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;++o)r+=String.fromCharCode(t[o]);return r}function Qa(t,e,n){var r=t.length;e&&e>=0||(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;++i)o+=cs(t[i]);return o}function ts(t,e,n){for(var r=t.slice(e,n),o="",i=0;r.length>i;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function es(t,e,n){if(t%1!=0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function ns(t,e,n,r,o,i){if(!Ba(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||i>e)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function rs(t,e,n,r){0>e&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);i>o;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function os(t,e,n,r){0>e&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);i>o;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function is(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function as(t,e,n,r,o){return o||is(t,0,n,4),Aa(t,e,n,r,23,4),n+4}function ss(t,e,n,r,o){return o||is(t,0,n,8),Aa(t,e,n,r,52,8),n+8}La.prototype.slice=function(t,e){var n,r=this.length;if(0>(t=~~t)?0>(t+=r)&&(t=0):t>r&&(t=r),0>(e=void 0===e?r:~~e)?0>(e+=r)&&(e=0):e>r&&(e=r),t>e&&(e=t),La.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=La.prototype;else{var o=e-t;n=new La(o,void 0);for(var i=0;o>i;++i)n[i]=this[i+t]}return n},La.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||es(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},La.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||es(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},La.prototype.readUInt8=function(t,e){return e||es(t,1,this.length),this[t]},La.prototype.readUInt16LE=function(t,e){return e||es(t,2,this.length),this[t]|this[t+1]<<8},La.prototype.readUInt16BE=function(t,e){return e||es(t,2,this.length),this[t]<<8|this[t+1]},La.prototype.readUInt32LE=function(t,e){return e||es(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},La.prototype.readUInt32BE=function(t,e){return e||es(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},La.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||es(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return(o*=128)>r||(r-=Math.pow(2,8*e)),r},La.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||es(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return(o*=128)>i||(i-=Math.pow(2,8*e)),i},La.prototype.readInt8=function(t,e){return e||es(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},La.prototype.readInt16LE=function(t,e){e||es(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},La.prototype.readInt16BE=function(t,e){e||es(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},La.prototype.readInt32LE=function(t,e){return e||es(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},La.prototype.readInt32BE=function(t,e){return e||es(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},La.prototype.readFloatLE=function(t,e){return e||es(t,4,this.length),xa(this,t,!0,23,4)},La.prototype.readFloatBE=function(t,e){return e||es(t,4,this.length),xa(this,t,!1,23,4)},La.prototype.readDoubleLE=function(t,e){return e||es(t,8,this.length),xa(this,t,!0,52,8)},La.prototype.readDoubleBE=function(t,e){return e||es(t,8,this.length),xa(this,t,!1,52,8)},La.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||ns(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},La.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||ns(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},La.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,1,255,0),La.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},La.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,2,65535,0),La.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):rs(this,t,e,!0),e+2},La.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,2,65535,0),La.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):rs(this,t,e,!1),e+2},La.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,4,4294967295,0),La.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):os(this,t,e,!0),e+4},La.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,4,4294967295,0),La.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):os(this,t,e,!1),e+4},La.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);ns(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)0>t&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a|0)-s&255;return e+n},La.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);ns(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)0>t&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a|0)-s&255;return e+n},La.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,1,127,-128),La.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},La.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,2,32767,-32768),La.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):rs(this,t,e,!0),e+2},La.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,2,32767,-32768),La.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):rs(this,t,e,!1),e+2},La.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,4,2147483647,-2147483648),La.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):os(this,t,e,!0),e+4},La.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||ns(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),La.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):os(this,t,e,!1),e+4},La.prototype.writeFloatLE=function(t,e,n){return as(this,t,e,!0,n)},La.prototype.writeFloatBE=function(t,e,n){return as(this,t,e,!1,n)},La.prototype.writeDoubleLE=function(t,e,n){return ss(this,t,e,!0,n)},La.prototype.writeDoubleBE=function(t,e,n){return ss(this,t,e,!1,n)},La.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),t.length>e||(e=t.length),e||(e=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),r-n>t.length-e&&(r=t.length-e+n);var o,i=r-n;if(this===t&&e>n&&r>e)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(1e3>i||!La.TYPED_ARRAY_SUPPORT)for(o=0;i>o;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},La.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);256>o&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!La.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(0>e||e>this.length||n>this.length)throw new RangeError("Out of range index");if(e>=n)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;n>i;++i)this[i]=t;else{var a=Ba(t)?t:ls(""+new La(t,r)),s=a.length;for(i=0;n-e>i;++i)this[i+e]=a[i%s]}return this};var us=/[^+\/0-9A-Za-z-_]/g;function cs(t){return 16>t?"0"+t.toString(16):t.toString(16)}function ls(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;r>a;++a){if((n=t.charCodeAt(a))>55295&&57344>n){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,128>n){if(0>(e-=1))break;i.push(n)}else if(2048>n){if(0>(e-=2))break;i.push(n>>6|192,63&n|128)}else if(65536>n){if(0>(e-=3))break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(n>=1114112)throw Error("Invalid code point");if(0>(e-=4))break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function fs(t){return function(t){var e,n,r,o,i,a;wa||Ea();var s=t.length;if(s%4>0)throw Error("Invalid string. Length must be a multiple of 4");a=new ba(3*s/4-(i="="===t[s-2]?2:"="===t[s-1]?1:0)),r=i>0?s-4:s;var u=0;for(e=0,n=0;r>e;e+=4,n+=3)o=ma[t.charCodeAt(e)]<<18|ma[t.charCodeAt(e+1)]<<12|ma[t.charCodeAt(e+2)]<<6|ma[t.charCodeAt(e+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=ma[t.charCodeAt(e)]<<2|ma[t.charCodeAt(e+1)]>>4,a[u++]=255&o):1===i&&(o=ma[t.charCodeAt(e)]<<10|ma[t.charCodeAt(e+1)]<<4|ma[t.charCodeAt(e+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}(function(t){if(2>(t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(us,"")).length)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function ps(t,e,n,r){for(var o=0;r>o&&(o+n<e.length&&o<t.length);++o)e[o+n]=t[o];return o}function hs(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var ds="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},vs=/%[sdj%]/g;function ys(t){if(!_s(t)){for(var e=[],n=0;arguments.length>n;n++)e.push(Es(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,i=(t+"").replace(vs,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return r[n++]+"";case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),a=r[n];o>n;a=r[++n])Ss(a)||!Bs(a)?i+=" "+a:i+=" "+Es(a);return i}function gs(t,e){if(Cs(o.process))return function(){return gs(t,e).apply(this,arguments)};var n=!1;return function(){return n||(console.error(e),n=!0),t.apply(this,arguments)}}var ms,bs={};function ws(t){if(Cs(ms)&&(ms=""),t=t.toUpperCase(),!bs[t])if(RegExp("\\b"+t+"\\b","i").test(ms)){bs[t]=function(){var e=ys.apply(null,arguments);console.error("%s %d: %s",t,0,e)}}else bs[t]=function(){};return bs[t]}function Es(t,e){var n={seen:[],stylize:Ps};return 3>arguments.length||(n.depth=arguments[2]),4>arguments.length||(n.colors=arguments[3]),Os(e)?n.showHidden=e:e&&qs(n,e),Cs(n.showHidden)&&(n.showHidden=!1),Cs(n.depth)&&(n.depth=2),Cs(n.colors)&&(n.colors=!1),Cs(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Ds),xs(n,t,n.depth)}function Ds(t,e){var n=Es.styles[e];return n?"["+Es.colors[n][0]+"m"+t+"["+Es.colors[n][1]+"m":t}function Ps(t,e){return t}function xs(t,e,n){if(t.customInspect&&e&&Hs(e.inspect)&&e.inspect!==Es&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return _s(r)||(r=xs(t,r,n)),r}var o=function(t,e){if(Cs(e))return t.stylize("undefined","undefined");if(_s(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(js(e))return t.stylize(""+e,"number");if(Os(e))return t.stylize(""+e,"boolean");if(Ss(e))return t.stylize("null","null")}(t,e);if(o)return o;var i=Object.keys(e),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),Is(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return As(e);if(0===i.length){if(Hs(e))return t.stylize("[Function"+(e.name?": "+e.name:"")+"]","special");if(Ts(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Fs(e))return t.stylize(Date.prototype.toString.call(e),"date");if(Is(e))return As(e)}var s,u="",c=!1,l=["{","}"];(ks(e)&&(c=!0,l=["[","]"]),Hs(e))&&(u=" [Function"+(e.name?": "+e.name:"")+"]");return Ts(e)&&(u=" "+RegExp.prototype.toString.call(e)),Fs(e)&&(u=" "+Date.prototype.toUTCString.call(e)),Is(e)&&(u=" "+As(e)),0!==i.length||c&&0!=e.length?0>n?Ts(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),s=c?function(t,e,n,r,o){for(var i=[],a=0,s=e.length;s>a;++a)$s(e,a+"")?i.push(Ms(t,e,n,r,a+"",!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(Ms(t,e,n,r,o,!0))})),i}(t,e,n,a,i):i.map((function(r){return Ms(t,e,n,a,r,c)})),t.seen.pop(),function(t,e,n){var r=t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(s,u,l)):l[0]+u+l[1]}function As(t){return"["+Error.prototype.toString.call(t)+"]"}function Ms(t,e,n,r,o,i){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?s=t.stylize(u.set?"[Getter/Setter]":"[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),$s(r,o)||(a="["+o+"]"),s||(0>t.seen.indexOf(u.value)?(s=Ss(n)?xs(t,u.value,null):xs(t,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),Cs(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function ks(t){return Array.isArray(t)}function Os(t){return"boolean"==typeof t}function Ss(t){return null===t}function Ls(t){return null==t}function js(t){return"number"==typeof t}function _s(t){return"string"==typeof t}function Rs(t){return"symbol"==typeof t}function Cs(t){return void 0===t}function Ts(t){return Bs(t)&&"[object RegExp]"===Ys(t)}function Bs(t){return"object"==typeof t&&null!==t}function Fs(t){return Bs(t)&&"[object Date]"===Ys(t)}function Is(t){return Bs(t)&&("[object Error]"===Ys(t)||t instanceof Error)}function Hs(t){return"function"==typeof t}function Us(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function Ns(t){return La.isBuffer(t)}function Ys(t){return Object.prototype.toString.call(t)}function zs(t){return 10>t?"0"+t.toString(10):t.toString(10)}Es.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Es.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Xs=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ws(){var t,e;console.log("%s - %s",(e=[zs((t=new Date).getHours()),zs(t.getMinutes()),zs(t.getSeconds())].join(":"),[t.getDate(),Xs[t.getMonth()],e].join(" ")),ys.apply(null,arguments))}function qs(t,e){if(!e||!Bs(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function $s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Gs=xr(Object.freeze({__proto__:null,format:ys,deprecate:gs,debuglog:ws,inspect:Es,isArray:ks,isBoolean:Os,isNull:Ss,isNullOrUndefined:Ls,isNumber:js,isString:_s,isSymbol:Rs,isUndefined:Cs,isRegExp:Ts,isObject:Bs,isDate:Fs,isError:Is,isFunction:Hs,isPrimitive:Us,isBuffer:Ns,log:Ws,inherits:ds,_extend:qs,default:{inherits:ds,_extend:qs,log:Ws,isBuffer:Ns,isPrimitive:Us,isFunction:Hs,isError:Is,isDate:Fs,isObject:Bs,isRegExp:Ts,isUndefined:Cs,isSymbol:Rs,isString:_s,isNumber:js,isNullOrUndefined:Ls,isNull:Ss,isBoolean:Os,isArray:ks,inspect:Es,deprecate:gs,format:ys,debuglog:ws}})).inspect,Vs="function"==typeof Map&&Map.prototype,Js=Object.getOwnPropertyDescriptor&&Vs?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ks=Vs&&Js&&"function"==typeof Js.get?Js.get:null,Zs=Vs&&Map.prototype.forEach,Qs="function"==typeof Set&&Set.prototype,tu=Object.getOwnPropertyDescriptor&&Qs?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,eu=Qs&&tu&&"function"==typeof tu.get?tu.get:null,nu=Qs&&Set.prototype.forEach,ru="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,ou="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,iu="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,au=Boolean.prototype.valueOf,su=Object.prototype.toString,uu=Function.prototype.toString,cu=String.prototype.match,lu=String.prototype.slice,fu=String.prototype.replace,pu=String.prototype.toUpperCase,hu=String.prototype.toLowerCase,du=RegExp.prototype.test,vu=Array.prototype.concat,yu=Array.prototype.join,gu=Array.prototype.slice,mu=Math.floor,bu="function"==typeof BigInt?BigInt.prototype.valueOf:null,wu=Object.getOwnPropertySymbols,Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Du="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Pu="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Du||"symbol")?Symbol.toStringTag:null,xu=Object.prototype.propertyIsEnumerable,Au=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Mu(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&1e3>t||du.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof t){var r=0>t?-mu(-t):mu(t);if(r!==t){var o=r+"",i=lu.call(e,o.length+1);return fu.call(o,n,"$&_")+"."+fu.call(fu.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return fu.call(e,n,"$&_")}var ku=Gs.custom,Ou=Cu(ku)?ku:null,Su=function t(e,n,r,o){var i=n||{};if(Bu(i,"quoteStyle")&&"single"!==i.quoteStyle&&"double"!==i.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Bu(i,"maxStringLength")&&("number"==typeof i.maxStringLength?0>i.maxStringLength&&i.maxStringLength!==1/0:null!==i.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=!Bu(i,"customInspect")||i.customInspect;if("boolean"!=typeof a&&"symbol"!==a)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Bu(i,"indent")&&null!==i.indent&&"\t"!==i.indent&&(parseInt(i.indent,10)!==i.indent||0>=i.indent))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Bu(i,"numericSeparator")&&"boolean"!=typeof i.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=i.numericSeparator;if(void 0===e)return"undefined";if(null===e)return"null";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e)return Hu(e,i);if("number"==typeof e){if(0===e)return 1/0/e>0?"0":"-0";var u=e+"";return s?Mu(e,u):u}if("bigint"==typeof e){var c=e+"n";return s?Mu(e,c):c}var l=void 0===i.depth?5:i.depth;if(void 0===r&&(r=0),r>=l&&l>0&&"object"==typeof e)return _u(e)?"[Array]":"[Object]";var f=function(t,e){var n;if("\t"===t.indent)n="\t";else{if("number"!=typeof t.indent||0>=t.indent)return null;n=yu.call(Array(t.indent+1)," ")}return{base:n,prev:yu.call(Array(e+1),n)}}(i,r);if(void 0===o)o=[];else if(Iu(o,e)>=0)return"[Circular]";function p(e,n,a){if(n&&(o=gu.call(o)).push(n),a){var s={depth:i.depth};return Bu(i,"quoteStyle")&&(s.quoteStyle=i.quoteStyle),t(e,s,r+1,o)}return t(e,i,r+1,o)}if("function"==typeof e&&!Ru(e)){var h=function(t){if(t.name)return t.name;var e=cu.call(uu.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),d=Wu(e,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(d.length>0?" { "+yu.call(d,", ")+" }":"")}if(Cu(e)){var v=Du?fu.call(e+"",/^(Symbol\(.*\))_[^)]*$/,"$1"):Eu.call(e);return"object"!=typeof e||Du?v:Nu(v)}if(function(t){if(!t||"object"!=typeof t)return!1;if("undefined"!=typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"==typeof t.nodeName&&"function"==typeof t.getAttribute}(e)){for(var y="<"+hu.call(e.nodeName+""),g=e.attributes||[],m=0;g.length>m;m++)y+=" "+g[m].name+"="+Lu(ju(g[m].value),"double",i);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+hu.call(e.nodeName+"")+">"}if(_u(e)){if(0===e.length)return"[]";var b=Wu(e,p);return f&&!function(t){for(var e=0;t.length>e;e++)if(Iu(t[e],"\n")>=0)return!1;return!0}(b)?"["+Xu(b,f)+"]":"[ "+yu.call(b,", ")+" ]"}if(function(t){return!("[object Error]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}(e)){var w=Wu(e,p);return"cause"in Error.prototype||!("cause"in e)||xu.call(e,"cause")?0===w.length?"["+e+"]":"{ ["+e+"] "+yu.call(w,", ")+" }":"{ ["+e+"] "+yu.call(vu.call("[cause]: "+p(e.cause),w),", ")+" }"}if("object"==typeof e&&a){if(Ou&&"function"==typeof e[Ou]&&Gs)return Gs(e,{depth:l-r});if("symbol"!==a&&"function"==typeof e.inspect)return e.inspect()}if(function(t){if(!Ks||!t||"object"!=typeof t)return!1;try{Ks.call(t);try{eu.call(t)}catch(t){return!0}return t instanceof Map}catch(t){}return!1}(e)){var E=[];return Zs&&Zs.call(e,(function(t,n){E.push(p(n,e,!0)+" => "+p(t,e))})),zu("Map",Ks.call(e),E,f)}if(function(t){if(!eu||!t||"object"!=typeof t)return!1;try{eu.call(t);try{Ks.call(t)}catch(t){return!0}return t instanceof Set}catch(t){}return!1}(e)){var D=[];return nu&&nu.call(e,(function(t){D.push(p(t,e))})),zu("Set",eu.call(e),D,f)}if(function(t){if(!ru||!t||"object"!=typeof t)return!1;try{ru.call(t,ru);try{ou.call(t,ou)}catch(t){return!0}return t instanceof WeakMap}catch(t){}return!1}(e))return Yu("WeakMap");if(function(t){if(!ou||!t||"object"!=typeof t)return!1;try{ou.call(t,ou);try{ru.call(t,ru)}catch(t){return!0}return t instanceof WeakSet}catch(t){}return!1}(e))return Yu("WeakSet");if(function(t){if(!iu||!t||"object"!=typeof t)return!1;try{return iu.call(t),!0}catch(t){}return!1}(e))return Yu("WeakRef");if(function(t){return!("[object Number]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}(e))return Nu(p(Number(e)));if(function(t){if(!t||"object"!=typeof t||!bu)return!1;try{return bu.call(t),!0}catch(t){}return!1}(e))return Nu(p(bu.call(e)));if(function(t){return!("[object Boolean]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}(e))return Nu(au.call(e));if(function(t){return!("[object String]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}(e))return Nu(p(e+""));if("undefined"!=typeof window&&e===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&e===globalThis||void 0!==Dr&&e===Dr)return"{ [object globalThis] }";if(!function(t){return!("[object Date]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}(e)&&!Ru(e)){var P=Wu(e,p),x=Au?Au(e)===Object.prototype:e instanceof Object||e.constructor===Object,A=e instanceof Object?"":"null prototype",M=!x&&Pu&&Object(e)===e&&Pu in e?lu.call(Fu(e),8,-1):A?"Object":"",k=(x||"function"!=typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(M||A?"["+yu.call(vu.call([],M||[],A||[]),": ")+"] ":"");return 0===P.length?k+"{}":f?k+"{"+Xu(P,f)+"}":k+"{ "+yu.call(P,", ")+" }"}return e+""};function Lu(t,e,n){var r="double"===(n.quoteStyle||e)?'"':"'";return r+t+r}function ju(t){return fu.call(t+"",/"/g,"&quot;")}function _u(t){return!("[object Array]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}function Ru(t){return!("[object RegExp]"!==Fu(t)||Pu&&"object"==typeof t&&Pu in t)}function Cu(t){if(Du)return t&&"object"==typeof t&&t instanceof Symbol;if("symbol"==typeof t)return!0;if(!t||"object"!=typeof t||!Eu)return!1;try{return Eu.call(t),!0}catch(t){}return!1}var Tu=Object.prototype.hasOwnProperty||function(t){return t in this};function Bu(t,e){return Tu.call(t,e)}function Fu(t){return su.call(t)}function Iu(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}function Hu(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return Hu(lu.call(t,0,e.maxStringLength),e)+r}return Lu(fu.call(fu.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Uu),"single",e)}function Uu(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(16>e?"0":"")+pu.call(e.toString(16))}function Nu(t){return"Object("+t+")"}function Yu(t){return t+" { ? }"}function zu(t,e,n,r){return t+" ("+e+") {"+(r?Xu(n,r):yu.call(n,", "))+"}"}function Xu(t,e){if(0===t.length)return"";var n="\n"+e.prev+e.base;return n+yu.call(t,","+n)+"\n"+e.prev}function Wu(t,e){var n=_u(t),r=[];if(n){r.length=t.length;for(var o=0;t.length>o;o++)r[o]=Bu(t,o)?e(t[o],t):""}var i,a="function"==typeof wu?wu(t):[];if(Du){i={};for(var s=0;a.length>s;s++)i["$"+a[s]]=a[s]}for(var u in t)Bu(t,u)&&(n&&Number(u)+""===u&&t.length>u||Du&&i["$"+u]instanceof Symbol||(du.call(/[^\w$]/,u)?r.push(e(u,t)+": "+e(t[u],t)):r.push(u+": "+e(t[u],t))));if("function"==typeof wu)for(var c=0;a.length>c;c++)xu.call(t,a[c])&&r.push("["+e(a[c])+"]: "+e(t[a[c]],t));return r}var qu=vi("%WeakMap%",!0),$u=vi("%Map%",!0),Gu=Ci("WeakMap.prototype.get",!0),Vu=Ci("WeakMap.prototype.set",!0),Ju=Ci("WeakMap.prototype.has",!0),Ku=Ci("Map.prototype.get",!0),Zu=Ci("Map.prototype.set",!0),Qu=Ci("Map.prototype.has",!0),tc=function(t,e){for(var n,r=t;null!==(n=r.next);r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},ec=function(){var t,e,n,r={assert:function(t){if(!r.has(t))throw new Bo("Side channel does not contain "+Su(t))},get:function(r){if(qu&&r&&("object"==typeof r||"function"==typeof r)){if(t)return Gu(t,r)}else if($u){if(e)return Ku(e,r)}else if(n)return function(t,e){var n=tc(t,e);return n&&n.value}(n,r)},has:function(r){if(qu&&r&&("object"==typeof r||"function"==typeof r)){if(t)return Ju(t,r)}else if($u){if(e)return Qu(e,r)}else if(n)return function(t,e){return!!tc(t,e)}(n,r);return!1},set:function(r,o){qu&&r&&("object"==typeof r||"function"==typeof r)?(t||(t=new qu),Vu(t,r,o)):$u?(e||(e=new $u),Zu(e,r,o)):(n||(n={key:{},next:null}),function(t,e,n){var r=tc(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}}(n,r,o))}};return r},nc=ec(),rc={assert:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Bo("`O` is not an object");if("string"!=typeof e)throw new Bo("`slot` must be a string");if(nc.assert(t),!rc.has(t,e))throw new Bo("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Bo("`O` is not an object");if("string"!=typeof e)throw new Bo("`slot` must be a string");var n=nc.get(t);return n&&n["$"+e]},has:function(t,e){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Bo("`O` is not an object");if("string"!=typeof e)throw new Bo("`slot` must be a string");var n=nc.get(t);return!!n&&$o(n,"$"+e)},set:function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new Bo("`O` is not an object");if("string"!=typeof e)throw new Bo("`slot` must be a string");var r=nc.get(t);r||nc.set(t,r={}),r["$"+e]=n}};Object.freeze&&Object.freeze(rc);var oc,ic=rc,ac=SyntaxError,sc="object"==typeof StopIteration?StopIteration:null,uc=function(t){if(!sc)throw new ac("this environment lacks StopIteration");ic.set(t,"[[Done]]",!1);var e={next:function(){var t=ic.get(this,"[[Iterator]]"),e=ic.get(t,"[[Done]]");try{return{done:e,value:e?void 0:t.next()}}catch(e){if(ic.set(t,"[[Done]]",!0),e!==sc)throw e;return{done:!0,value:void 0}}}};return ic.set(e,"[[Iterator]]",t),e},cc={}.toString,lc=Array.isArray||function(t){return"[object Array]"==cc.call(t)},fc=String.prototype.valueOf,pc=Object.prototype.toString,hc=la(),dc=function(t){return"string"==typeof t||"object"==typeof t&&(hc?function(t){try{return fc.call(t),!0}catch(t){return!1}}(t):"[object String]"===pc.call(t))},vc="function"==typeof Map&&Map.prototype?Map:null,yc="function"==typeof Set&&Set.prototype?Set:null;vc||(oc=function(t){return!1});var gc=vc?Map.prototype.has:null,mc=yc?Set.prototype.has:null;oc||gc||(oc=function(t){return!1});var bc,wc=oc||function(t){if(!t||"object"!=typeof t)return!1;try{if(gc.call(t),mc)try{mc.call(t)}catch(t){return!0}return t instanceof vc}catch(t){}return!1},Ec="function"==typeof Map&&Map.prototype?Map:null,Dc="function"==typeof Set&&Set.prototype?Set:null;Dc||(bc=function(t){return!1});var Pc=Ec?Map.prototype.has:null,xc=Dc?Set.prototype.has:null;bc||xc||(bc=function(t){return!1});var Ac=bc||function(t){if(!t||"object"!=typeof t)return!1;try{if(xc.call(t),Pc)try{Pc.call(t)}catch(t){return!0}return t instanceof Dc}catch(t){}return!1},Mc=Pr((function(t){if(Uo()||Io()){var e=Symbol.iterator;t.exports=function(t){return null!=t&&void 0!==t[e]?t[e]():ya(t)?Array.prototype[e].call(t):void 0}}else{var n=lc,r=dc,o=vi,i=o("%Map%",!0),a=o("%Set%",!0),s=Ci,u=s("Array.prototype.push"),c=s("String.prototype.charCodeAt"),l=s("String.prototype.slice"),f=function(t){var e=0;return{next:function(){var n,r=e>=t.length;return r||(n=t[e],e+=1),{done:r,value:n}}}},p=function(t,e){if(n(t)||ya(t))return f(t);if(r(t)){var o=0;return{next:function(){var e=function(t,e){if(e+1>=t.length)return e+1;var n=c(t,e);if(55296>n||n>56319)return e+1;var r=c(t,e+1);return 56320>r||r>57343?e+1:e+2}(t,o),n=l(t,o,e);return o=e,{done:e>t.length,value:n}}}}return e&&void 0!==t["_es6-shim iterator_"]?t["_es6-shim iterator_"]():void 0};if(i||a){var h=wc,d=Ac,v=s("Map.prototype.forEach",!0),y=s("Set.prototype.forEach",!0);if(void 0===O||!O.versions||!O.versions.node)var g=s("Map.prototype.iterator",!0),m=s("Set.prototype.iterator",!0);var b=s("Map.prototype.@@iterator",!0)||s("Map.prototype._es6-shim iterator_",!0),w=s("Set.prototype.@@iterator",!0)||s("Set.prototype._es6-shim iterator_",!0);t.exports=function(t){return function(t){if(h(t)){if(g)return uc(g(t));if(b)return b(t);if(v){var e=[];return v(t,(function(t,n){u(e,[n,t])})),f(e)}}if(d(t)){if(m)return uc(m(t));if(w)return w(t);if(y){var n=[];return y(t,(function(t){u(n,t)})),f(n)}}}(t)||p(t)}}else t.exports=function(t){if(null!=t)return p(t,!0)}}})),kc=function(t){return t!=t},Oc=function(t,e){return 0===t&&0===e?1/t==1/e:t===e||!(!kc(t)||!kc(e))},Sc=function(){return"function"==typeof Object.is?Object.is:Oc},Lc=_i(Sc(),Object);Si(Lc,{getPolyfill:Sc,implementation:Oc,shim:function(){var t=Sc();return Si(Object,{is:t},{is:function(){return Object.is!==t}}),t}});var jc,_c,Rc,Cc,Tc=Lc,Bc=vi("%ArrayBuffer%",!0),Fc=Ci("ArrayBuffer.prototype.byteLength",!0),Ic=Ci("Object.prototype.toString"),Hc=!!Bc&&!Fc&&new Bc(0).slice,Uc=!!Hc&&_i(Hc),Nc=Fc||Uc?function(t){if(!t||"object"!=typeof t)return!1;try{return Fc?Fc(t):Uc(t,0),!0}catch(t){return!1}}:Bc?function(t){return"[object ArrayBuffer]"===Ic(t)}:function(t){return!1},Yc=Date.prototype.getDay,zc=Object.prototype.toString,Xc=la(),Wc=function(t){return"object"==typeof t&&null!==t&&(Xc?function(t){try{return Yc.call(t),!0}catch(t){return!1}}(t):"[object Date]"===zc.call(t))},qc=la();if(qc){jc=Ci("Object.prototype.hasOwnProperty"),_c=Ci("RegExp.prototype.exec"),Rc={};var $c=function(){throw Rc};Cc={toString:$c,valueOf:$c},"symbol"==typeof Symbol.toPrimitive&&(Cc[Symbol.toPrimitive]=$c)}var Gc,Vc=Ci("Object.prototype.toString"),Jc=Object.getOwnPropertyDescriptor,Kc=qc?function(t){if(!t||"object"!=typeof t)return!1;var e=Jc(t,"lastIndex");if(!(e&&jc(e,"value")))return!1;try{_c(t,Cc)}catch(t){return t===Rc}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===Vc(t)},Zc=Ci("SharedArrayBuffer.prototype.byteLength",!0),Qc=Zc?function(t){if(!t||"object"!=typeof t)return!1;try{return Zc(t),!0}catch(t){return!1}}:function(t){return!1},tl=Number.prototype.toString,el=Object.prototype.toString,nl=la(),rl=function(t){return"number"==typeof t||"object"==typeof t&&(nl?function(t){try{return tl.call(t),!0}catch(t){return!1}}(t):"[object Number]"===el.call(t))},ol=Ci("Boolean.prototype.toString"),il=Ci("Object.prototype.toString"),al=la(),sl=function(t){return"boolean"==typeof t||null!==t&&"object"==typeof t&&(al&&Symbol.toStringTag in t?function(t){try{return ol(t),!0}catch(t){return!1}}(t):"[object Boolean]"===il(t))},ul=Pr((function(t){var e=Object.prototype.toString;if(Uo()){var n=Symbol.prototype.toString,r=/^Symbol\(.*\)$/;t.exports=function(t){if("symbol"==typeof t)return!0;if("[object Symbol]"!==e.call(t))return!1;try{return function(t){return"symbol"==typeof t.valueOf()&&r.test(n.call(t))}(t)}catch(t){return!1}}}else t.exports=function(t){return!1}})),cl="undefined"!=typeof BigInt&&BigInt,ll=Pr((function(t){if("function"==typeof cl&&"function"==typeof BigInt&&"bigint"==typeof cl(42)&&"bigint"==typeof BigInt(42)){var e=BigInt.prototype.valueOf;t.exports=function(t){return null!=t&&"boolean"!=typeof t&&"string"!=typeof t&&"number"!=typeof t&&"symbol"!=typeof t&&"function"!=typeof t&&("bigint"==typeof t||function(t){try{return e.call(t),!0}catch(t){}return!1}(t))}}else t.exports=function(t){return!1}})),fl=function(t){return null==t||"object"!=typeof t&&"function"!=typeof t?null:dc(t)?"String":rl(t)?"Number":sl(t)?"Boolean":ul(t)?"Symbol":ll(t)?"BigInt":void 0},pl="function"==typeof WeakMap&&WeakMap.prototype?WeakMap:null,hl="function"==typeof WeakSet&&WeakSet.prototype?WeakSet:null;pl||(Gc=function(t){return!1});var dl=pl?pl.prototype.has:null,vl=hl?hl.prototype.has:null;Gc||dl||(Gc=function(t){return!1});var yl,gl,ml=Gc||function(t){if(!t||"object"!=typeof t)return!1;try{if(dl.call(t,dl),vl)try{vl.call(t,vl)}catch(t){return!0}return t instanceof pl}catch(t){}return!1},bl=Pr((function(t){var e=vi("%WeakSet%",!0),n=Ci("WeakSet.prototype.has",!0);if(n){var r=Ci("WeakMap.prototype.has",!0);t.exports=function(t){if(!t||"object"!=typeof t)return!1;try{if(n(t,n),r)try{r(t,r)}catch(t){return!0}return t instanceof e}catch(t){}return!1}}else t.exports=function(t){return!1}})),wl=function(t){if(t&&"object"==typeof t){if(wc(t))return"Map";if(Ac(t))return"Set";if(ml(t))return"WeakMap";if(bl(t))return"WeakSet"}return!1},El=Function.prototype.toString,Dl="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof Dl&&"function"==typeof Object.defineProperty)try{yl=Object.defineProperty({},"length",{get:function(){throw gl}}),gl={},Dl((function(){throw 42}),null,yl)}catch(t){t!==gl&&(Dl=null)}else Dl=null;var Pl=/^\s*class\b/,xl=function(t){try{var e=El.call(t);return Pl.test(e)}catch(t){return!1}},Al=function(t){try{return!xl(t)&&(El.call(t),!0)}catch(t){return!1}},Ml=Object.prototype.toString,kl="function"==typeof Symbol&&!!Symbol.toStringTag,Ol=!(0 in[,]),Sl=function(){return!1};if("object"==typeof document){var Ll=document.all;Ml.call(Ll)===Ml.call(document.all)&&(Sl=function(t){if((Ol||!t)&&(void 0===t||"object"==typeof t))try{var e=Ml.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}var jl=Dl?function(t){if(Sl(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{Dl(t,null,yl)}catch(t){if(t!==gl)return!1}return!xl(t)&&Al(t)}:function(t){if(Sl(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(kl)return Al(t);if(xl(t))return!1;var e=Ml.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&Al(t)},_l=Object.prototype.toString,Rl=Object.prototype.hasOwnProperty,Cl=function(t,e,n){if(!jl(e))throw new TypeError("iterator must be a function");var r;3>arguments.length||(r=n),"[object Array]"===_l.call(t)?function(t,e,n){for(var r=0,o=t.length;o>r;r++)Rl.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,r):"string"==typeof t?function(t,e,n){for(var r=0,o=t.length;o>r;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,r):function(t,e,n){for(var r in t)Rl.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,r)},Tl=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Bl="undefined"==typeof globalThis?Dr:globalThis,Fl=Ci("Object.prototype.toString"),Il=la(),Hl="undefined"==typeof globalThis?Dr:globalThis,Ul=function(){for(var t=[],e=0;Tl.length>e;e++)"function"==typeof Bl[Tl[e]]&&(t[t.length]=Tl[e]);return t}(),Nl=Ci("String.prototype.slice"),Yl=Object.getPrototypeOf,zl=Ci("Array.prototype.indexOf",!0)||function(t,e){for(var n=0;t.length>n;n+=1)if(t[n]===e)return n;return-1},Xl={__proto__:null};Cl(Ul,Il&&bi&&Yl?function(t){var e=new Hl[t];if(Symbol.toStringTag in e){var n=Yl(e),r=bi(n,Symbol.toStringTag);if(!r){var o=Yl(n);r=bi(o,Symbol.toStringTag)}Xl["$"+t]=_i(r.get)}}:function(t){var e=new Hl[t],n=e.slice||e.set;n&&(Xl["$"+t]=_i(n))});var Wl=function(t){if(!t||"object"!=typeof t)return!1;if(!Il){var e=Nl(Fl(t),8,-1);return zl(Ul,e)>-1?e:"Object"===e&&function(t){var e=!1;return Cl(Xl,(function(n,r){if(!e)try{n(t),e=Nl(r,1)}catch(t){}})),e}(t)}return bi?function(t){var e=!1;return Cl(Xl,(function(n,r){if(!e)try{"$"+n(t)===r&&(e=Nl(r,1))}catch(t){}})),e}(t):null},ql=Ci("ArrayBuffer.prototype.byteLength",!0),$l=function(t){return Nc(t)?ql?ql(t):t.byteLength:NaN},Gl=Ci("SharedArrayBuffer.prototype.byteLength",!0),Vl=Ci("Date.prototype.getTime"),Jl=Object.getPrototypeOf,Kl=Ci("Object.prototype.toString"),Zl=vi("%Set%",!0),Ql=Ci("Map.prototype.has",!0),tf=Ci("Map.prototype.get",!0),ef=Ci("Map.prototype.size",!0),nf=Ci("Set.prototype.add",!0),rf=Ci("Set.prototype.delete",!0),of=Ci("Set.prototype.has",!0),af=Ci("Set.prototype.size",!0);function sf(t,e,n,r){for(var o,i=Mc(t);(o=i.next())&&!o.done;)if(pf(e,o.value,n,r))return rf(t,o.value),!0;return!1}function uf(t){return void 0===t?null:"object"!=typeof t?"symbol"!=typeof t&&("string"!=typeof t&&"number"!=typeof t||+t==+t):void 0}function cf(t,e,n,r,o,i){var a=uf(n);if(null!=a)return a;var s=tf(e,a),u=Xi({},o,{strict:!1});return!(void 0===s&&!Ql(e,a)||!pf(r,s,u,i))&&(!Ql(t,a)&&pf(r,s,u,i))}function lf(t,e,n){var r=uf(n);return null!=r?r:of(e,r)&&!of(t,r)}function ff(t,e,n,r,o,i){for(var a,s,u=Mc(t);(a=u.next())&&!a.done;)if(pf(n,s=a.value,o,i)&&pf(r,tf(e,s),o,i))return rf(t,s),!0;return!1}function pf(t,e,n,r){var o=n||{};if(o.strict?Tc(t,e):t===e)return!0;if(fl(t)!==fl(e))return!1;if(!t||!e||"object"!=typeof t&&"object"!=typeof e)return o.strict?Tc(t,e):t==e;var i,a=r.has(t),s=r.has(e);if(a&&s){if(r.get(t)===r.get(e))return!0}else i={};return a||r.set(t,i),s||r.set(e,i),function(t,e,n,r){var o,i;if(typeof t!=typeof e)return!1;if(null==t||null==e)return!1;if(Kl(t)!==Kl(e))return!1;if(ya(t)!==ya(e))return!1;var a=lc(t),s=lc(e);if(a!==s)return!1;var u=t instanceof Error,c=e instanceof Error;if(u!==c)return!1;if((u||c)&&(t.name!==e.name||t.message!==e.message))return!1;var l=Kc(t),f=Kc(e);if(l!==f)return!1;if((l||f)&&(t.source!==e.source||ca(t)!==ca(e)))return!1;var p=Wc(t),h=Wc(e);if(p!==h)return!1;if((p||h)&&Vl(t)!==Vl(e))return!1;if(n.strict&&Jl&&Jl(t)!==Jl(e))return!1;var d=Wl(t),v=Wl(e);if(d!==v)return!1;if(d||v){if(t.length!==e.length)return!1;for(o=0;t.length>o;o++)if(t[o]!==e[o])return!1;return!0}var y=hf(t),g=hf(e);if(y!==g)return!1;if(y||g){if(t.length!==e.length)return!1;for(o=0;t.length>o;o++)if(t[o]!==e[o])return!1;return!0}var m=Nc(t),b=Nc(e);if(m!==b)return!1;if(m||b)return $l(t)===$l(e)&&("function"==typeof Uint8Array&&pf(new Uint8Array(t),new Uint8Array(e),n,r));var w=Qc(t),E=Qc(e);if(w!==E)return!1;if(w||E)return Gl(t)===Gl(e)&&("function"==typeof Uint8Array&&pf(new Uint8Array(t),new Uint8Array(e),n,r));if(typeof t!=typeof e)return!1;var D=Lo(t),P=Lo(e);if(D.length!==P.length)return!1;for(D.sort(),P.sort(),o=D.length-1;o>=0;o--)if(D[o]!=P[o])return!1;for(o=D.length-1;o>=0;o--)if(!pf(t[i=D[o]],e[i],n,r))return!1;var x=wl(t),A=wl(e);if(x!==A)return!1;if("Set"===x||"Set"===A)return function(t,e,n,r){if(af(t)!==af(e))return!1;var o,i,a,s=Mc(t),u=Mc(e);for(;(o=s.next())&&!o.done;)if(o.value&&"object"==typeof o.value)a||(a=new Zl),nf(a,o.value);else if(!of(e,o.value)){if(n.strict)return!1;if(!lf(t,e,o.value))return!1;a||(a=new Zl),nf(a,o.value)}if(a){for(;(i=u.next())&&!i.done;)if(i.value&&"object"==typeof i.value){if(!sf(a,i.value,n.strict,r))return!1}else if(!n.strict&&!of(t,i.value)&&!sf(a,i.value,n.strict,r))return!1;return 0===af(a)}return!0}(t,e,n,r);if("Map"===x)return function(t,e,n,r){if(ef(t)!==ef(e))return!1;var o,i,a,s,u,c,l=Mc(t),f=Mc(e);for(;(o=l.next())&&!o.done;)if(u=o.value[1],(s=o.value[0])&&"object"==typeof s)a||(a=new Zl),nf(a,s);else if(void 0===(c=tf(e,s))&&!Ql(e,s)||!pf(u,c,n,r)){if(n.strict)return!1;if(!cf(t,e,s,u,n,r))return!1;a||(a=new Zl),nf(a,s)}if(a){for(;(i=f.next())&&!i.done;)if(c=i.value[1],(s=i.value[0])&&"object"==typeof s){if(!ff(a,t,s,c,n,r))return!1}else if(!(n.strict||t.has(s)&&pf(tf(t,s),c,n,r)||ff(a,t,s,c,Xi({},n,{strict:!1}),r)))return!1;return 0===af(a)}return!0}(t,e,n,r);return!0}(t,e,o,r)}function hf(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&((0>=t.length||"number"==typeof t[0])&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))))}var df=Object.defineProperty,vf=(t,e)=>df(t,"name",{value:e,configurable:!0});function yf(t,e){return t.coordinates?t.coordinates.length===e.coordinates.length:t.length===e.length}function gf(t){return t.coordinates.map((e=>({type:t.type.replace("Multi",""),coordinates:e})))}vf(class{constructor(t){var e,n,r;this.direction=!1,this.compareProperties=!0,this.precision=10**-(null!=(e=null==t?void 0:t.precision)?e:17),this.direction=null!=(n=null==t?void 0:t.direction)&&n,this.compareProperties=null==(r=null==t?void 0:t.compareProperties)||r}compare(t,e){if(t.type!==e.type)return!1;if(!yf(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates);case"Polygon":return this.comparePolygon(t,e);case"GeometryCollection":return this.compareGeometryCollection(t,e);case"Feature":return this.compareFeature(t,e);case"FeatureCollection":return this.compareFeatureCollection(t,e);default:if(t.type.startsWith("Multi")){const n=gf(t),r=gf(e);return n.every((t=>r.some((e=>this.compare(t,e)))))}}return!1}compareCoord(t,e){return t.length===e.length&&t.every(((t,n)=>this.precision>Math.abs(t-e[n])))}compareLine(t,e,n=0,r=!1){if(!yf(t,e))return!1;const o=t;let i=e;if(r&&!this.compareCoord(o[0],i[0])){const t=this.fixStartIndex(i,o);if(!t)return!1;i=t}const a=this.compareCoord(o[n],i[n]);return this.direction||a?this.comparePath(o,i):!!this.compareCoord(o[n],i[i.length-(1+n)])&&this.comparePath(o.slice().reverse(),i)}fixStartIndex(t,e){let n,r=-1;for(let n=0;t.length>n;n++)if(this.compareCoord(t[n],e[0])){r=n;break}return 0>r||(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n}comparePath(t,e){return t.every(((t,n)=>this.compareCoord(t,e[n])))}comparePolygon(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){const n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length);return n.every((t=>r.some((e=>this.compareLine(t,e,1,!0)))))}return!1}compareGeometryCollection(t,e){return yf(t.geometries,e.geometries)&&this.compareBBox(t,e)&&t.geometries.every(((t,n)=>this.compare(t,e.geometries[n])))}compareFeature(t,e){return t.id===e.id&&(!this.compareProperties||pf(t.properties,e.properties,n,ec()))&&this.compareBBox(t,e)&&this.compare(t.geometry,e.geometry);var n}compareFeatureCollection(t,e){return yf(t.features,e.features)&&this.compareBBox(t,e)&&t.features.every(((t,n)=>this.compare(t,e.features[n])))}compareBBox(t,e){return!(t.bbox||e.bbox)||!(!t.bbox||!e.bbox)&&this.compareCoord(t.bbox,e.bbox)}},"GeojsonEquality"),vf(yf,"sameLength"),vf(gf,"explode");var mf=6371008.8,bf={centimeters:637100880,centimetres:637100880,degrees:360/(2*Math.PI),feet:20902260.511392,inches:250826616.45599997,kilometers:6371.0088,kilometres:6371.0088,meters:mf,metres:mf,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:3440.069546436285,radians:1,yards:6967335.223679999},wf={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,nauticalmiles:2.9155334959812285e-7,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ef(t,e,n={}){const r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Df(t,e,n={}){if(!t)throw Error("coordinates is required");if(!Array.isArray(t))throw Error("coordinates must be an Array");if(2>t.length)throw Error("coordinates must be at least 2 numbers long");if(!_f(t[0])||!_f(t[1]))throw Error("coordinates must contain numbers");return Ef({type:"Point",coordinates:t},e,n)}function Pf(t,e,n={}){for(const e of t){if(4>e.length)throw Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(e[e.length-1].length!==e[0].length)throw Error("First and last Position are not equivalent.");for(let t=0;e[e.length-1].length>t;t++)if(e[e.length-1][t]!==e[0][t])throw Error("First and last Position are not equivalent.")}return Ef({type:"Polygon",coordinates:t},e,n)}function xf(t,e,n={}){if(2>t.length)throw Error("coordinates must be an array of two or more positions");return Ef({type:"LineString",coordinates:t},e,n)}function Af(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Mf(t,e,n={}){return Ef({type:"MultiLineString",coordinates:t},e,n)}function kf(t,e,n={}){return Ef({type:"MultiPoint",coordinates:t},e,n)}function Of(t,e,n={}){return Ef({type:"MultiPolygon",coordinates:t},e,n)}function Sf(t,e="kilometers"){const n=bf[e];if(!n)throw Error(e+" units is invalid");return t*n}function Lf(t,e="kilometers"){const n=bf[e];if(!n)throw Error(e+" units is invalid");return t/n}function jf(t){return 180*(t%(2*Math.PI))/Math.PI}function _f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Rf(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)}vf(Ef,"feature"),vf((function(t,e,n={}){switch(t){case"Point":return Df(e).geometry;case"LineString":return xf(e).geometry;case"Polygon":return Pf(e).geometry;case"MultiPoint":return kf(e).geometry;case"MultiLineString":return Mf(e).geometry;case"MultiPolygon":return Of(e).geometry;default:throw Error(t+" is invalid")}}),"geometry"),vf(Df,"point"),vf((function(t,e,n={}){return Af(t.map((t=>Df(t,e))),n)}),"points"),vf(Pf,"polygon"),vf((function(t,e,n={}){return Af(t.map((t=>Pf(t,e))),n)}),"polygons"),vf(xf,"lineString"),vf((function(t,e,n={}){return Af(t.map((t=>xf(t,e))),n)}),"lineStrings"),vf(Af,"featureCollection"),vf(Mf,"multiLineString"),vf(kf,"multiPoint"),vf(Of,"multiPolygon"),vf((function(t,e,n={}){return Ef({type:"GeometryCollection",geometries:t},e,n)}),"geometryCollection"),vf((function(t,e=0){if(e&&e<0)throw Error("precision must be a positive number");const n=Math.pow(10,e||0);return Math.round(t*n)/n}),"round"),vf(Sf,"radiansToLength"),vf(Lf,"lengthToRadians"),vf((function(t,e){return jf(Lf(t,e))}),"lengthToDegrees"),vf((function(t){let e=t%360;return 0>e&&(e+=360),e}),"bearingToAzimuth"),vf(jf,"radiansToDegrees"),vf((function(t){return t%360*Math.PI/180}),"degreesToRadians"),vf((function(t,e="kilometers",n="kilometers"){if(t<0)throw Error("length must be a positive number");return Sf(Lf(t,e),n)}),"convertLength"),vf((function(t,e="meters",n="kilometers"){if(t<0)throw Error("area must be a positive number");const r=wf[e];if(!r)throw Error("invalid original units");const o=wf[n];if(!o)throw Error("invalid final units");return t/r*o}),"convertArea"),vf(_f,"isNumber"),vf(Rf,"isObject"),vf((function(t){if(!t)throw Error("bbox is required");if(!Array.isArray(t))throw Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw Error("bbox must be an Array of 4 or 6 numbers");t.forEach((t=>{if(!_f(t))throw Error("bbox must only contain numbers")}))}),"validateBBox"),vf((function(t){if(!t)throw Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw Error("id must be a number or a string")}),"validateId");var Cf=Object.defineProperty,Tf=(t,e)=>Cf(t,"name",{value:e,configurable:!0});function Bf(t,e,n){if(null!==t)for(var r,o,i,a,s,u,c,l,f=0,p=0,h=t.type,d="FeatureCollection"===h,v="Feature"===h,y=d?t.features.length:1,g=0;y>g;g++){s=(l=!!(c=d?t.features[g].geometry:v?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var m=0;s>m;m++){var b=0,w=0;if(null!==(a=l?c.geometries[m]:c)){u=a.coordinates;var E=a.type;switch(f=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===e(u,p,g,b,w))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(r=0;u.length>r;r++){if(!1===e(u[r],p,g,b,w))return!1;p++,"MultiPoint"===E&&b++}"LineString"===E&&b++;break;case"Polygon":case"MultiLineString":for(r=0;u.length>r;r++){for(o=0;u[r].length-f>o;o++){if(!1===e(u[r][o],p,g,b,w))return!1;p++}"MultiLineString"===E&&b++,"Polygon"===E&&w++}"Polygon"===E&&b++;break;case"MultiPolygon":for(r=0;u.length>r;r++){for(w=0,o=0;u[r].length>o;o++){for(i=0;u[r][o].length-f>i;i++){if(!1===e(u[r][o][i],p,g,b,w))return!1;p++}w++}b++}break;case"GeometryCollection":for(r=0;a.geometries.length>r;r++)if(!1===Bf(a.geometries[r],e,n))return!1;break;default:throw Error("Unknown Geometry Type")}}}}}function Ff(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;t.features.length>n&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function If(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;t.features.length>n&&!1!==e(t.features[n],n);n++);}function Hf(t,e){var n,r,o,i,a,s,u,c,l,f,p=0,h="FeatureCollection"===t.type,d="Feature"===t.type,v=h?t.features.length:1;for(n=0;v>n;n++){for(c=h?t.features[n].properties:d?t.properties:{},l=h?t.features[n].bbox:d?t.bbox:void 0,f=h?t.features[n].id:d?t.id:void 0,a=(u=!!(s=h?t.features[n].geometry:d?t.geometry:t)&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;a>o;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,c,l,f))return!1;break;case"GeometryCollection":for(r=0;i.geometries.length>r;r++)if(!1===e(i.geometries[r],p,c,l,f))return!1;break;default:throw Error("Unknown Geometry Type")}else if(!1===e(null,p,c,l,f))return!1;p++}}function Uf(t,e){Hf(t,(function(t,n,r,o,i){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Ef(t,r,{bbox:o,id:i}),n,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;t.coordinates.length>u;u++){if(!1===e(Ef({type:a,coordinates:t.coordinates[u]},r),n,u))return!1}}))}function Nf(t,e){Uf(t,(function(t,n,r){var o=0;if(t.geometry){var i=t.geometry.type;if("Point"!==i&&"MultiPoint"!==i){var a,s=0,u=0,c=0;return!1!==Bf(t,(function(i,l,f,p,h){if(void 0===a||n>s||p>u||h>c)return a=i,s=n,u=p,c=h,void(o=0);var d=xf([a,i],t.properties);if(!1===e(d,n,r,h,o))return!1;o++,a=i}))&&void 0}}}))}function Yf(t,e){if(!t)throw Error("geojson is required");Uf(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.coordinates;switch(t.geometry.type){case"LineString":if(!1===e(t,n,r,0,0))return!1;break;case"Polygon":for(var i=0;o.length>i;i++)if(!1===e(xf(o[i],t.properties),n,r,i))return!1}}}))}Tf(Bf,"coordEach"),Tf((function(t,e,n,r){var o=n;return Bf(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o}),"coordReduce"),Tf(Ff,"propEach"),Tf((function(t,e,n){var r=n;return Ff(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r}),"propReduce"),Tf(If,"featureEach"),Tf((function(t,e,n){var r=n;return If(t,(function(t,o){r=0===o&&void 0===n?t:e(r,t,o)})),r}),"featureReduce"),Tf((function(t){var e=[];return Bf(t,(function(t){e.push(t)})),e}),"coordAll"),Tf(Hf,"geomEach"),Tf((function(t,e,n){var r=n;return Hf(t,(function(t,o,i,a,s){r=0===o&&void 0===n?t:e(r,t,o,i,a,s)})),r}),"geomReduce"),Tf(Uf,"flattenEach"),Tf((function(t,e,n){var r=n;return Uf(t,(function(t,o,i){r=0===o&&0===i&&void 0===n?t:e(r,t,o,i)})),r}),"flattenReduce"),Tf(Nf,"segmentEach"),Tf((function(t,e,n){var r=n,o=!1;return Nf(t,(function(t,i,a,s,u){r=!1===o&&void 0===n?t:e(r,t,i,a,s,u),o=!0})),r}),"segmentReduce"),Tf(Yf,"lineEach"),Tf((function(t,e,n){var r=n;return Yf(t,(function(t,o,i,a){r=0===o&&void 0===n?t:e(r,t,o,i,a)})),r}),"lineReduce"),Tf((function(t,e){if(!Rf(e=e||{}))throw Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,a=e.segmentIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":0>r&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return 0>a&&(a=u.length+a-1),xf([u[a],u[a+1]],s,e);case"Polygon":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a-1),xf([u[i][a],u[i][a+1]],s,e);case"MultiLineString":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a-1),xf([u[o][a],u[o][a+1]],s,e);case"MultiPolygon":return 0>o&&(o=u.length+o),0>i&&(i=u[o].length+i),0>a&&(a=u[o][i].length-a-1),xf([u[o][i][a],u[o][i][a+1]],s,e)}throw Error("geojson is invalid")}),"findSegment"),Tf((function(t,e){if(!Rf(e=e||{}))throw Error("options is invalid");var n,r=e.featureIndex||0,o=e.multiFeatureIndex||0,i=e.geometryIndex||0,a=e.coordIndex||0,s=e.properties;switch(t.type){case"FeatureCollection":0>r&&(r=t.features.length+r),s=s||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":s=s||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return Df(u,s,e);case"MultiPoint":return 0>o&&(o=u.length+o),Df(u[o],s,e);case"LineString":return 0>a&&(a=u.length+a),Df(u[a],s,e);case"Polygon":return 0>i&&(i=u.length+i),0>a&&(a=u[i].length+a),Df(u[i][a],s,e);case"MultiLineString":return 0>o&&(o=u.length+o),0>a&&(a=u[o].length+a),Df(u[o][a],s,e);case"MultiPolygon":return 0>o&&(o=u.length+o),0>i&&(i=u[o].length+i),0>a&&(a=u[o][i].length-a),Df(u[o][i][a],s,e)}throw Error("geojson is invalid")}),"findPoint");function zf(t,e={}){if(null!=t.bbox&&!0!==e.recompute)return t.bbox;const n=[1/0,1/0,-1/0,-1/0];return Bf(t,(t=>{n[0]>t[0]&&(n[0]=t[0]),n[1]>t[1]&&(n[1]=t[1]),t[0]>n[2]&&(n[2]=t[0]),t[1]>n[3]&&(n[3]=t[1])})),n}(0,Object.defineProperty)(zf,"name",{value:"bbox",configurable:!0});var Xf=Object.freeze({__proto__:null,bbox:zf,default:zf}),Wf=xr(fo),qf=xr(Tn),$f=xr(qn),Gf=xr(Xf).default,Vf=$f.featureEach,Jf=qf.featureCollection;function Kf(t){var e=new Wf(t);return e.insert=function(t){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:Gf(t),Wf.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:Gf(t),e.push(t)})):Vf(t,(function(t){if("Feature"!==t.type)throw Error("invalid features");t.bbox=t.bbox?t.bbox:Gf(t),e.push(t)})),Wf.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw Error("invalid feature");return t.bbox=t.bbox?t.bbox:Gf(t),Wf.prototype.remove.call(this,t,e)},e.clear=function(){return Wf.prototype.clear.call(this)},e.search=function(t){var e=Wf.prototype.search.call(this,this.toBBox(t));return Jf(e)},e.collides=function(t){return Wf.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Wf.prototype.all.call(this);return Jf(t)},e.toJSON=function(){return Wf.prototype.toJSON.call(this)},e.fromJSON=function(t){return Wf.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=Gf(t);else{if("FeatureCollection"!==t.type)throw Error("invalid geojson");e=Gf(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}var Zf=Kf;function Qf(t,e){var n={},r=[];if("LineString"===t.type&&(t=En(t)),"LineString"===e.type&&(e=En(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=tp(t,e);return o&&r.push(o),An(r)}var i=Zf();return i.load(Jr(e)),In(Jr(t),(function(t){In(i.search(t),(function(e){var o=tp(t,e);if(o){var i=Vn(o).join(",");n[i]||(n[i]=!0,r.push(o))}}))})),An(r)}function tp(t,e){var n=Vn(t),r=Vn(e);if(2!==n.length)throw Error("<intersects> line1 must only contain 2 coordinates");if(2!==r.length)throw Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],i=n[0][1],a=n[1][0],s=n[1][1],u=r[0][0],c=r[0][1],l=r[1][0],f=r[1][1],p=(f-c)*(a-o)-(l-u)*(s-i),h=(l-u)*(i-c)-(f-c)*(o-u),d=(a-o)*(i-c)-(s-i)*(o-u);if(0===p)return null;var v=h/p,y=d/p;return 0>v||v>1||0>y||y>1?null:Dn([o+v*(a-o),i+v*(s-i)])}Zf.default=Kf;var ep=6378137;function np(t){return Nn(t,(function(t,e){return t+function(t){var e,n=0;switch(t.type){case"Polygon":return rp(t.coordinates);case"MultiPolygon":for(e=0;t.coordinates.length>e;e++)n+=rp(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)}),0)}function rp(t){var e=0;if(t&&t.length>0){e+=Math.abs(op(t[0]));for(var n=1;t.length>n;n++)e-=Math.abs(op(t[n]))}return e}function op(t){var e,n,r,o,i,a,s=0,u=t.length;if(u>2){for(a=0;u>a;a++)a===u-2?(r=u-2,o=u-1,i=0):a===u-1?(r=u-1,o=0,i=1):(r=a,o=a+1,i=a+2),e=t[r],n=t[o],s+=(ip(t[i][0])-ip(e[0]))*Math.sin(ip(n[1]));s=s*ep*ep/2}return s}function ip(t){return t*Math.PI/180}function ap(t,e){return void 0===e&&(e={}),Xn(t,(function(t,n){var r=n.geometry.coordinates;return t+zr(r[0],r[1],e)}),0)}function sp(t,e){void 0===e&&(e={});var n=Jn(t);switch(e.properties||"Feature"!==t.type||(e.properties=t.properties),n.type){case"Polygon":return function(t,e){void 0===e&&(e={});var n=Jn(t),r=n.coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{};return up(r,o)}(n,e);case"MultiPolygon":return function(t,e){void 0===e&&(e={});var n=Jn(t),r=n.coordinates,o=e.properties?e.properties:"Feature"===t.type?t.properties:{},i=[];return r.forEach((function(t){i.push(up(t,o))})),An(i)}(n,e);default:throw Error("invalid poly")}}function up(t,e){return t.length>1?Mn(t,e):xn(t[0],e)}function cp(t){for(var e,n,r=Vn(t),o=0,i=1;r.length>i;)e=n||r[0],o+=((n=r[i])[0]-e[0])*(n[1]+e[1]),i++;return o>0}var lp=Pr((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new o(r,i||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},s.prototype.listeners=function(t){var e=this._events[n?n+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,o=e.length,i=Array(o);o>r;r++)i[r]=e[r].fn;return i},s.prototype.listenerCount=function(t){var e=this._events[n?n+t:t];return e?e.fn?1:e.length:0},s.prototype.emit=function(t,e,r,o,i,a){var s=n?n+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,a),!0}for(c=1,u=Array(f-1);f>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,h=l.length;for(c=0;h>c;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,r);break;case 4:l[c].fn.call(l[c].context,e,r,o);break;default:if(!u)for(p=1,u=Array(f-1);f>p;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var s=this._events[i];if(s.fn)s.fn!==e||o&&!s.once||r&&s.context!==r||a(this,i);else{for(var u=0,c=[],l=s.length;l>u;u++)(s[u].fn!==e||o&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?this._events[e=n?n+t:t]&&a(this,e):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})),fp=function(t){function e(t,n){var r,o=n.style;return en(this,e),(r=tn(this,e)).scene=void 0,r.style=void 0,r.layers=void 0,r.data=[],r.scene=t,r.style=o,r.layers=r.initLayers(),r.layers.forEach((function(e){t.addLayer(e)})),o.callback instanceof Function&&o.callback(r.layers),r}return un(e,t),rn(e,[{key:"getLayers",value:function(){return this.layers}},{key:"show",value:function(){this.layers.forEach((function(t){t.show()}))}},{key:"hide",value:function(){this.layers.forEach((function(t){t.hide()}))}},{key:"setData",value:function(t){var e=dn(t).sort((function(t,e){return+t.properties.isActive-+e.properties.isActive}));this.data=e,this.layers.forEach((function(t){t.setData(An(e))}))}},{key:"destroy",value:function(){var t=this;this.layers.forEach((function(e){t.scene.removeLayer(e)}))}}])}(lp.EventEmitter),pp=function(t){function n(){return en(this,n),tn(this,n,arguments)}return un(n,t),rn(n,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.style,o=t.options;return[new e.LineLayer(null!=o?o:{}).source(An([])).size(n.size).color(n.color).shape("line").style(r)]}}])}(fp);var hp=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},dp="object"==typeof Dr&&Dr&&Dr.Object===Object&&Dr,vp="object"==typeof self&&self&&self.Object===Object&&self,yp=dp||vp||Function("return this")(),gp=function(){return yp.Date.now()},mp=/\s/;var bp=function(t){for(var e=t.length;e--&&mp.test(t.charAt(e)););return e},wp=/^\s+/;var Ep=function(t){return t?t.slice(0,bp(t)+1).replace(wp,""):t},Dp=yp.Symbol,Pp=Object.prototype,xp=Pp.hasOwnProperty,Ap=Pp.toString,Mp=Dp?Dp.toStringTag:void 0;var kp=function(t){var e=xp.call(t,Mp),n=t[Mp];try{t[Mp]=void 0;var r=!0}catch(t){}var o=Ap.call(t);return r&&(e?t[Mp]=n:delete t[Mp]),o},Op=Object.prototype.toString;var Sp=function(t){return Op.call(t)},Lp=Dp?Dp.toStringTag:void 0;var jp=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Lp&&Lp in Object(t)?kp(t):Sp(t)};var _p=function(t){return null!=t&&"object"==typeof t};var Rp=function(t){return"symbol"==typeof t||_p(t)&&"[object Symbol]"==jp(t)},Cp=/^[-+]0x[0-9a-f]+$/i,Tp=/^0b[01]+$/i,Bp=/^0o[0-7]+$/i,Fp=parseInt;var Ip=function(t){if("number"==typeof t)return t;if(Rp(t))return NaN;if(hp(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=hp(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ep(t);var n=Tp.test(t);return n||Bp.test(t)?Fp(t.slice(2),n?2:8):Cp.test(t)?NaN:+t},Hp=Math.max,Up=Math.min;var Np=function(t,e,n){var r,o,i,a,s,u,c=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function h(e){var n=r,i=o;return r=o=void 0,c=e,a=t.apply(i,n)}function d(t){var n=t-u;return void 0===u||n>=e||0>n||f&&t-c>=i}function v(){var t=gp();if(d(t))return y(t);s=setTimeout(v,function(t){var n=e-(t-u);return f?Up(n,i-(t-c)):n}(t))}function y(t){return s=void 0,p&&r?h(t):(r=o=void 0,a)}function g(){var t=gp(),n=d(t);if(r=arguments,o=this,u=t,n){if(void 0===s)return function(t){return c=t,s=setTimeout(v,e),l?h(t):a}(u);if(f)return clearTimeout(s),s=setTimeout(v,e),h(u)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Ip(e)||0,hp(n)&&(l=!!n.leading,i=(f="maxWait"in n)?Hp(Ip(n.maxWait)||0,e):i,p="trailing"in n?!!n.trailing:p),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=u=o=s=void 0},g.flush=function(){return void 0===s?a:y(gp())},g},Yp=function(n){function r(){var e;en(this,r);for(var n=arguments.length,o=Array(n),i=0;n>i;i++)o[i]=arguments[i];return(e=tn(this,r,[].concat(o))).onMouseMove=function(n){e.emit(t.RenderEvent.Mousemove,n)},e.onMouseOut=function(n){e.emit(t.RenderEvent.Mouseout,n)},e.onMouseDown=function(n){e.emit(t.RenderEvent.Dragstart,n)},e.onDragging=function(n){e.emit(t.RenderEvent.Dragging,n)},e.onDragEnd=Np((function(n){e.emit(t.RenderEvent.Dragend,n)}),0),e.onUnClick=function(n){e.emit(t.RenderEvent.UnClick,n)},e.enableHover=function(){var n,r;e.disableHover(),null===(n=e.layers[0])||void 0===n||n.on(t.LayerEvent.Mousemove,e.onMouseMove),null===(r=e.layers[0])||void 0===r||r.on(t.LayerEvent.Mouseout,e.onMouseOut)},e.disableHover=function(){var n,r;null===(n=e.layers[0])||void 0===n||n.off(t.LayerEvent.Mousemove,e.onMouseMove),null===(r=e.layers[0])||void 0===r||r.off(t.LayerEvent.Mouseout,e.onMouseOut)},e}return un(r,n),rn(r,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.hover,o=t.active,i=t.style,a=t.options;return[new e.LineLayer(null!=a?a:{}).source(An([])).size("isHover*isActive",(function(t,e){return e?o.size:t?r.size:n.size})).color("isHover*isActive",(function(t,e){return e?o.color:t?r.color:n.color})).shape("line").style(i)]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(t.SceneEvent.Dragging,this.onDragging),this.scene.on(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(t.SceneEvent.Dragging,this.onDragging),this.scene.off(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(t.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(t.LayerEvent.UnClick,this.onUnClick)}}])}(fp),zp=function(n){function r(){var e;en(this,r);for(var n=arguments.length,o=Array(n),i=0;n>i;i++)o[i]=arguments[i];return(e=tn(this,r,[].concat(o))).onMouseMove=function(n){e.emit(t.RenderEvent.Mousemove,n)},e.onMouseOut=function(n){e.emit(t.RenderEvent.Mouseout,n)},e.onMouseDown=function(n){e.emit(t.RenderEvent.Click,n)},e}return un(r,n),rn(r,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.style,o=void 0===r?{}:r,i=t.options,a=n.shape,s=n.size,u=n.color;return[new e.PointLayer(null!=i?i:{}).source(An([])).size(s).color(u).shape(a).style(o)]}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(t.LayerEvent.Mousedown,this.onMouseDown)}},{key:"disableClick",value:function(){this.layers[0].off(t.LayerEvent.Mousedown,this.onMouseDown)}},{key:"enableHover",value:function(){var e,n;this.disableHover(),null===(e=this.layers[0])||void 0===e||e.on(t.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.on(t.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var e,n;null===(e=this.layers[0])||void 0===e||e.off(t.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.off(t.LayerEvent.Mouseout,this.onMouseOut)}}])}(fp),Xp=function(n){function r(){var e;en(this,r);for(var n=arguments.length,o=Array(n),i=0;n>i;i++)o[i]=arguments[i];return(e=tn(this,r,[].concat(o))).onCreate=function(n){e.emit(t.RenderEvent.UnClick,n)},e.onMouseMove=function(n){e.emit(t.RenderEvent.Mousemove,n)},e.onMouseOut=function(n){e.emit(t.RenderEvent.Mouseout,n)},e.onMouseDown=function(n){e.emit(t.RenderEvent.Dragstart,n)},e.onDragging=function(n){e.emit(t.RenderEvent.Dragging,n)},e.onDragEnd=Np((function(n){e.emit(t.RenderEvent.Dragend,n)}),0),e.onClick=function(n){e.emit(t.RenderEvent.Click,n)},e.onContextmenu=function(n){e.emit(t.RenderEvent.Contextmenu,n)},e}return un(r,n),rn(r,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.hover,o=t.active,i=t.style,a=void 0===i?{}:i,s=t.options;return[new e.PointLayer(null!=s?s:{}).source(An([])).size("isHover*isActive",(function(t,e){return e?o.size:t?r.size:n.size})).color("isHover*isActive",(function(t,e){return e?o.color:t?r.color:n.color})).shape("isHover*isActive",(function(t,e){return e?o.shape:t?r.shape:n.shape})).style(a)]}},{key:"enableCreate",value:function(){this.disableCreate(),this.layers[0].on(t.LayerEvent.UnClick,this.onCreate)}},{key:"disableCreate",value:function(){this.layers[0].off(t.LayerEvent.UnClick,this.onCreate)}},{key:"enableHover",value:function(){var e,n;this.disableHover(),null===(e=this.layers[0])||void 0===e||e.on(t.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.on(t.LayerEvent.Mouseout,this.onMouseOut)}},{key:"disableHover",value:function(){var e,n;null===(e=this.layers[0])||void 0===e||e.off(t.LayerEvent.Mousemove,this.onMouseMove),null===(n=this.layers[0])||void 0===n||n.off(t.LayerEvent.Mouseout,this.onMouseOut)}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(t.SceneEvent.Dragging,this.onDragging),this.scene.on(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(t.SceneEvent.Dragging,this.onDragging),this.scene.off(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableClick",value:function(){this.disableClick(),this.layers[0].on(t.LayerEvent.Click,this.onClick)}},{key:"disableClick",value:function(){this.layers[0].off(t.LayerEvent.Click,this.onClick)}},{key:"enableContextMenu",value:function(){this.disableContextMenu(),this.layers[0].on(t.LayerEvent.Contextmenu,this.onContextmenu)}},{key:"disableContextMenu",value:function(){this.layers[0].off(t.LayerEvent.Contextmenu,this.onContextmenu)}}])}(fp),Wp=function(n){function r(){var e;en(this,r);for(var n=arguments.length,o=Array(n),i=0;n>i;i++)o[i]=arguments[i];return(e=tn(this,r,[].concat(o))).onMouseMove=function(n){e.emit(t.RenderEvent.Mousemove,n)},e.onMouseOut=function(n){e.emit(t.RenderEvent.Mouseout,n)},e.onMouseDown=function(n){e.emit(t.RenderEvent.Dragstart,n)},e.onDragging=function(n){e.emit(t.RenderEvent.Dragging,n)},e.onDragEnd=Np((function(n){e.emit(t.RenderEvent.Dragend,n)}),0),e.onUnClick=function(n){e.emit(t.RenderEvent.UnClick,n)},e.enableHover=function(){var n,r;e.disableHover(),null===(n=e.layers[0])||void 0===n||n.on(t.LayerEvent.Mousemove,e.onMouseMove),null===(r=e.layers[0])||void 0===r||r.on(t.LayerEvent.Mouseout,e.onMouseOut)},e.disableHover=function(){var n,r;null===(n=e.layers[0])||void 0===n||n.off(t.LayerEvent.Mousemove,e.onMouseMove),null===(r=e.layers[0])||void 0===r||r.off(t.LayerEvent.Mouseout,e.onMouseOut)},e}return un(r,n),rn(r,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.hover,o=t.active,i=t.style,a=t.options,s=new e.PolygonLayer(null!=a?a:{});return s.source(An([])).color("isHover*isActive",(function(t,e){return e?o.color:t?r.color:n.color})).style(i),[s]}},{key:"enableDrag",value:function(){this.disableDrag(),this.layers[0].on(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.on(t.SceneEvent.Dragging,this.onDragging),this.scene.on(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.layers[0].off(t.LayerEvent.Mousedown,this.onMouseDown),this.scene.off(t.SceneEvent.Dragging,this.onDragging),this.scene.off(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableUnClick",value:function(){this.disableUnClick(),this.layers[0].on(t.LayerEvent.UnClick,this.onUnClick)}},{key:"disableUnClick",value:function(){this.layers[0].off(t.LayerEvent.UnClick,this.onUnClick)}}])}(fp),qp=function(e){function n(e){var r;return en(this,n),(r=tn(this,n)).scene=void 0,r.previousClick=void 0,r.onDblClick=function(e){var n,o,i=null!==(n=null!==(o=e.pixel)&&void 0!==o?o:e.point)&&void 0!==n?n:{},a=i.x,s=void 0===a?0:a,u=i.y,c=void 0===u?0:u,l=Date.now();if(r.previousClick){var f=r.previousClick,p=f.y;300>l-f.time&&5>Math.abs(s-f.x)&&5>Math.abs(c-p)&&r.emit(t.RenderEvent.DblClick,e)}r.previousClick={x:s,y:c,time:l}},r.onMouseMove=function(e){r.emit(t.RenderEvent.Mousemove,e)},r.onMouseDown=function(e){r.emit(t.RenderEvent.Dragstart,e)},r.onDragging=function(e){r.emit(t.RenderEvent.Dragging,e)},r.onDragEnd=Np((function(e){r.emit(t.RenderEvent.Dragend,e)}),0),r.scene=e,r}return un(n,e),rn(n,[{key:"enableDrag",value:function(){this.disableDrag(),this.scene.on(t.SceneEvent.Mousedown,this.onMouseDown),this.scene.on(t.SceneEvent.Dragging,this.onDragging),this.scene.on(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.on(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"disableDrag",value:function(){this.scene.off(t.SceneEvent.Mousedown,this.onMouseDown),this.scene.off(t.SceneEvent.Dragging,this.onDragging),this.scene.off(t.SceneEvent.Mouseup,this.onDragEnd),this.scene.off(t.SceneEvent.Dragend,this.onDragEnd)}},{key:"enableMouseMove",value:function(){this.disableMouseMove(),this.scene.on(t.SceneEvent.Mousemove,this.onMouseMove)}},{key:"disableMouseMove",value:function(){this.scene.off(t.SceneEvent.Mousemove,this.onMouseMove)}},{key:"enableDblClick",value:function(){this.disableDblClick(),this.scene.on(t.SceneEvent.Mousedown,this.onDblClick)}},{key:"disableDblClick",value:function(){this.scene.off(t.SceneEvent.Mousedown,this.onDblClick)}}])}(lp),$p=function(t){function n(){return en(this,n),tn(this,n,arguments)}return un(n,t),rn(n,[{key:"initLayers",value:function(){var t=this.style,n=t.normal,r=t.active,o=t.style,i=void 0===o?{}:o,a=t.options;return[new e.PointLayer(null!=a?a:{}).source(An([])).size("isActive",(function(t){return t?r.size:n.size})).color("isActive",(function(t){return t?r.color:n.color})).shape("text","text").style(i)]}}])}(fp),Gp={point:Xp,line:Yp,dashLine:pp,midPoint:zp,text:$p,polygon:Wp},Vp="#1990FF",Jp="#ED9D48",Kp={blend:"normal",pickingBuffer:5},Zp={color:Vp,shape:"circle",size:6},Qp={color:Jp,shape:"circle",size:6},th={shape:"circle",size:6,color:Jp},eh={options:Kp,normal:Zp,hover:fn(fn({},Zp),{},{size:8}),active:fn(fn({},Zp),{},{size:8,color:Jp}),style:{stroke:"#ffffff",strokeWidth:2}},nh={options:Kp,normal:Qp,hover:fn(fn({},Qp),{},{size:8}),active:fn(fn({},Qp),{},{size:8}),style:{stroke:"#ffffff",strokeWidth:2}},rh={color:Vp,size:12},oh={point:nh,line:{options:Kp,normal:{color:Vp,size:2},hover:{color:Vp,size:2},active:{color:Jp,size:2},style:{}},polygon:{options:Kp,normal:{color:Vp},hover:{color:Vp},active:{color:Jp},style:{opacity:.15}},midPoint:{options:Kp,normal:th},dashLine:{options:Kp,normal:{color:Jp,size:2},style:{lineType:"dash",dashArray:[6,6]}},text:{options:Kp,normal:rh,active:fn(fn({},rh),{},{color:Jp}),style:{fontWeight:"800",textOffset:[0,rh.size+6],textAllowOverlap:!0,stroke:"#ffffff",strokeWidth:2}}},ih={draw:"单击绘制点",pointHover:"可拖拽调整点位置",pointDrag:null},ah={draw:"单击绘制首个节点",pointHover:"可拖拽调整节点位置",pointDrag:null,lineHover:"可拖拽调整线位置",lineDrag:null,midPointHover:"单击在该位置新增节点",drawFinish:"单击继续绘制，双击结束绘制"},sh={draw:"单击绘制首个节点",drawContinue:"单击继续绘制",drawFinish:"单击继续绘制，双击结束绘制",midPointHover:"单击在该位置新增节点",pointHover:"可拖拽调整节点位置",pointDrag:null,lineHover:"可拖拽调整面位置",lineDrag:null,polygonHover:"可拖拽调整面位置",polygonDrag:null},uh=fn(fn({},sh),{},{draw:"单击绘制首个节点",drawFinish:"单击结束绘制"}),ch={draw:"拖拽开始绘制",drawFinish:"松开鼠标结束绘制"},lh={lineHover:"可拖拽调整矩形位置",polygonHover:"可拖拽调整矩形位置"},fh={lineHover:"可拖拽调整圆位置",polygonHover:"可拖拽调整圆位置"};var ph=function(t,e){return t===e||t!=t&&e!=e};var hh=function(t,e){for(var n=t.length;n--;)if(ph(t[n][0],e))return n;return-1},dh=Array.prototype.splice;var vh=function(t){var e=this.__data__,n=hh(e,t);return n>=0&&(n==e.length-1?e.pop():dh.call(e,n,1),--this.size,!0)};var yh=function(t){var e=this.__data__,n=hh(e,t);return 0>n?void 0:e[n][1]};var gh=function(t){return hh(this.__data__,t)>-1};var mh=function(t,e){var n=this.__data__,r=hh(n,t);return 0>r?(++this.size,n.push([t,e])):n[r][1]=e,this};function bh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}bh.prototype.clear=function(){this.__data__=[],this.size=0},bh.prototype.delete=vh,bh.prototype.get=yh,bh.prototype.has=gh,bh.prototype.set=mh;var wh=bh;var Eh=function(){this.__data__=new wh,this.size=0};var Dh=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var Ph=function(t){return this.__data__.get(t)};var xh=function(t){return this.__data__.has(t)};var Ah,Mh=function(t){if(!hp(t))return!1;var e=jp(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},kh=yp["__core-js_shared__"],Oh=(Ah=/[^.]+$/.exec(kh&&kh.keys&&kh.keys.IE_PROTO||""))?"Symbol(src)_1."+Ah:"";var Sh=function(t){return!!Oh&&Oh in t},Lh=Function.prototype.toString;var jh=function(t){if(null!=t){try{return Lh.call(t)}catch(t){}try{return t+""}catch(t){}}return""},_h=/^\[object .+?Constructor\]$/,Rh=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ch=function(t){return!(!hp(t)||Sh(t))&&(Mh(t)?Rh:_h).test(jh(t))};var Th=function(t,e){return null==t?void 0:t[e]};var Bh=function(t,e){var n=Th(t,e);return Ch(n)?n:void 0},Fh=Bh(yp,"Map"),Ih=Bh(Object,"create");var Hh=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Uh=Object.prototype.hasOwnProperty;var Nh=function(t){var e=this.__data__;if(Ih){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Uh.call(e,t)?e[t]:void 0},Yh=Object.prototype.hasOwnProperty;var zh=function(t){var e=this.__data__;return Ih?void 0!==e[t]:Yh.call(e,t)};var Xh=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ih&&void 0===e?"__lodash_hash_undefined__":e,this};function Wh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wh.prototype.clear=function(){this.__data__=Ih?Ih(null):{},this.size=0},Wh.prototype.delete=Hh,Wh.prototype.get=Nh,Wh.prototype.has=zh,Wh.prototype.set=Xh;var qh=Wh;var $h=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Gh=function(t,e){var n=t.__data__;return $h(e)?n["string"==typeof e?"string":"hash"]:n.map};var Vh=function(t){var e=Gh(this,t).delete(t);return this.size-=e?1:0,e};var Jh=function(t){return Gh(this,t).get(t)};var Kh=function(t){return Gh(this,t).has(t)};var Zh=function(t,e){var n=Gh(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function Qh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Qh.prototype.clear=function(){this.size=0,this.__data__={hash:new qh,map:new(Fh||wh),string:new qh}},Qh.prototype.delete=Vh,Qh.prototype.get=Jh,Qh.prototype.has=Kh,Qh.prototype.set=Zh;var td=Qh;var ed=function(t,e){var n=this.__data__;if(n instanceof wh){var r=n.__data__;if(!Fh||199>r.length)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new td(r)}return n.set(t,e),this.size=n.size,this};function nd(t){var e=this.__data__=new wh(t);this.size=e.size}nd.prototype.clear=Eh,nd.prototype.delete=Dh,nd.prototype.get=Ph,nd.prototype.has=xh,nd.prototype.set=ed;var rd=nd;var od=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},id=function(){try{var t=Bh(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var ad=function(t,e,n){"__proto__"==e&&id?id(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},sd=Object.prototype.hasOwnProperty;var ud=function(t,e,n){var r=t[e];sd.call(t,e)&&ph(r,n)&&(void 0!==n||e in t)||ad(t,e,n)};var cd=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var s=e[i],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),o?ad(n,s,u):ud(n,s,u)}return n};var ld=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var fd=function(t){return _p(t)&&"[object Arguments]"==jp(t)},pd=Object.prototype,hd=pd.hasOwnProperty,dd=pd.propertyIsEnumerable,vd=fd(function(){return arguments}())?fd:function(t){return _p(t)&&hd.call(t,"callee")&&!dd.call(t,"callee")},yd=vd,gd=Array.isArray;var md=function(){return!1},bd=Pr((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?yp.Buffer:void 0;t.exports=(o?o.isBuffer:void 0)||md})),wd=/^(?:0|[1-9]\d*)$/;var Ed=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&wd.test(t))&&t>-1&&t%1==0&&e>t};var Dd=function(t){return"number"==typeof t&&t>-1&&t%1==0&&9007199254740991>=t},Pd={};Pd["[object Float32Array]"]=Pd["[object Float64Array]"]=Pd["[object Int8Array]"]=Pd["[object Int16Array]"]=Pd["[object Int32Array]"]=Pd["[object Uint8Array]"]=Pd["[object Uint8ClampedArray]"]=Pd["[object Uint16Array]"]=Pd["[object Uint32Array]"]=!0,Pd["[object Arguments]"]=Pd["[object Array]"]=Pd["[object ArrayBuffer]"]=Pd["[object Boolean]"]=Pd["[object DataView]"]=Pd["[object Date]"]=Pd["[object Error]"]=Pd["[object Function]"]=Pd["[object Map]"]=Pd["[object Number]"]=Pd["[object Object]"]=Pd["[object RegExp]"]=Pd["[object Set]"]=Pd["[object String]"]=Pd["[object WeakMap]"]=!1;var xd=function(t){return _p(t)&&Dd(t.length)&&!!Pd[jp(t)]};var Ad=function(t){return function(e){return t(e)}},Md=Pr((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n&&dp.process,i=function(){try{var t=r&&r.require&&r.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),kd=Md&&Md.isTypedArray,Od=kd?Ad(kd):xd,Sd=Object.prototype.hasOwnProperty;var Ld=function(t,e){var n=gd(t),r=!n&&yd(t),o=!n&&!r&&bd(t),i=!n&&!r&&!o&&Od(t),a=n||r||o||i,s=a?ld(t.length,String):[],u=s.length;for(var c in t)!e&&!Sd.call(t,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ed(c,u))||s.push(c);return s},jd=Object.prototype;var _d=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||jd)};var Rd=function(t,e){return function(n){return t(e(n))}},Cd=Rd(Object.keys,Object),Td=Object.prototype.hasOwnProperty;var Bd=function(t){if(!_d(t))return Cd(t);var e=[];for(var n in Object(t))Td.call(t,n)&&"constructor"!=n&&e.push(n);return e};var Fd=function(t){return null!=t&&Dd(t.length)&&!Mh(t)};var Id=function(t){return Fd(t)?Ld(t):Bd(t)};var Hd=function(t,e){return t&&cd(e,Id(e),t)};var Ud=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Nd=Object.prototype.hasOwnProperty;var Yd=function(t){if(!hp(t))return Ud(t);var e=_d(t),n=[];for(var r in t)("constructor"!=r||!e&&Nd.call(t,r))&&n.push(r);return n};var zd=function(t){return Fd(t)?Ld(t,!0):Yd(t)};var Xd=function(t,e){return t&&cd(e,zd(e),t)},Wd=Pr((function(t,e){var n=e&&!e.nodeType&&e,r=n&&t&&!t.nodeType&&t,o=r&&r.exports===n?yp.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=i?i(n):new t.constructor(n);return t.copy(r),r}}));var qd=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var $d=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i};var Gd=function(){return[]},Vd=Object.prototype.propertyIsEnumerable,Jd=Object.getOwnPropertySymbols,Kd=Jd?function(t){return null==t?[]:$d(Jd(t=Object(t)),(function(e){return Vd.call(t,e)}))}:Gd;var Zd=function(t,e){return cd(t,Kd(t),e)};var Qd=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},tv=Rd(Object.getPrototypeOf,Object),ev=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Qd(e,Kd(t)),t=tv(t);return e}:Gd;var nv=function(t,e){return cd(t,ev(t),e)};var rv=function(t,e,n){var r=e(t);return gd(t)?r:Qd(r,n(t))};var ov=function(t){return rv(t,Id,Kd)};var iv=function(t){return rv(t,zd,ev)},av=Bh(yp,"DataView"),sv=Bh(yp,"Promise"),uv=Bh(yp,"Set"),cv=Bh(yp,"WeakMap"),lv="[object Map]",fv="[object Promise]",pv="[object Set]",hv="[object WeakMap]",dv="[object DataView]",vv=jh(av),yv=jh(Fh),gv=jh(sv),mv=jh(uv),bv=jh(cv),wv=jp;(av&&wv(new av(new ArrayBuffer(1)))!=dv||Fh&&wv(new Fh)!=lv||sv&&wv(sv.resolve())!=fv||uv&&wv(new uv)!=pv||cv&&wv(new cv)!=hv)&&(wv=function(t){var e=jp(t),n="[object Object]"==e?t.constructor:void 0,r=n?jh(n):"";if(r)switch(r){case vv:return dv;case yv:return lv;case gv:return fv;case mv:return pv;case bv:return hv}return e});var Ev=wv,Dv=Object.prototype.hasOwnProperty;var Pv=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Dv.call(t,"index")&&(n.index=t.index,n.input=t.input),n},xv=yp.Uint8Array;var Av=function(t){var e=new t.constructor(t.byteLength);return new xv(e).set(new xv(t)),e};var Mv=function(t,e){var n=e?Av(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},kv=/\w*$/;var Ov=function(t){var e=new t.constructor(t.source,kv.exec(t));return e.lastIndex=t.lastIndex,e},Sv=Dp?Dp.prototype:void 0,Lv=Sv?Sv.valueOf:void 0;var jv=function(t){return Lv?Object(Lv.call(t)):{}};var _v=function(t,e){var n=e?Av(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var Rv=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return Av(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return Mv(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return _v(t,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Ov(t);case"[object Symbol]":return jv(t)}},Cv=Object.create,Tv=function(){function t(){}return function(e){if(!hp(e))return{};if(Cv)return Cv(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var Bv=function(t){return"function"!=typeof t.constructor||_d(t)?{}:Tv(tv(t))};var Fv=function(t){return _p(t)&&"[object Map]"==Ev(t)},Iv=Md&&Md.isMap,Hv=Iv?Ad(Iv):Fv;var Uv=function(t){return _p(t)&&"[object Set]"==Ev(t)},Nv=Md&&Md.isSet,Yv=Nv?Ad(Nv):Uv,zv="[object Arguments]",Xv="[object Function]",Wv="[object Object]",qv={};qv[zv]=qv["[object Array]"]=qv["[object ArrayBuffer]"]=qv["[object DataView]"]=qv["[object Boolean]"]=qv["[object Date]"]=qv["[object Float32Array]"]=qv["[object Float64Array]"]=qv["[object Int8Array]"]=qv["[object Int16Array]"]=qv["[object Int32Array]"]=qv["[object Map]"]=qv["[object Number]"]=qv[Wv]=qv["[object RegExp]"]=qv["[object Set]"]=qv["[object String]"]=qv["[object Symbol]"]=qv["[object Uint8Array]"]=qv["[object Uint8ClampedArray]"]=qv["[object Uint16Array]"]=qv["[object Uint32Array]"]=!0,qv["[object Error]"]=qv[Xv]=qv["[object WeakMap]"]=!1;var $v=function t(e,n,r,o,i,a){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=i?r(e,o,i,a):r(e)),void 0!==s)return s;if(!hp(e))return e;var f=gd(e);if(f){if(s=Pv(e),!u)return qd(e,s)}else{var p=Ev(e),h=p==Xv||"[object GeneratorFunction]"==p;if(bd(e))return Wd(e,u);if(p==Wv||p==zv||h&&!i){if(s=c||h?{}:Bv(e),!u)return c?nv(e,Xd(s,e)):Zd(e,Hd(s,e))}else{if(!qv[p])return i?e:{};s=Rv(e,p,u)}}a||(a=new rd);var d=a.get(e);if(d)return d;a.set(e,s),Yv(e)?e.forEach((function(o){s.add(t(o,n,r,o,e,a))})):Hv(e)&&e.forEach((function(o,i){s.set(i,t(o,n,r,i,e,a))}));var v=f?void 0:(l?c?iv:ov:c?zd:Id)(e);return od(v||e,(function(o,i){v&&(o=e[i=o]),ud(s,i,t(o,n,r,i,e,a))})),s};var Gv=function(t){return $v(t,5)};var Vv=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r};var Jv=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var Kv=function(t){return this.__data__.has(t)};function Zv(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new td;++e<n;)this.add(t[e])}Zv.prototype.add=Zv.prototype.push=Jv,Zv.prototype.has=Kv;var Qv=Zv;var ty=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};var ey=function(t,e){return t.has(e)};var ny=function(t,e,n,r,o,i){var a=1&n,s=t.length,u=e.length;if(!(s==u||a&&u>s))return!1;var c=i.get(t),l=i.get(e);if(c&&l)return c==e&&l==t;var f=-1,p=!0,h=2&n?new Qv:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var d=t[f],v=e[f];if(r)var y=a?r(v,d,f,e,t,i):r(d,v,f,t,e,i);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!ty(e,(function(t,e){if(!ey(h,e)&&(d===t||o(d,t,n,r,i)))return h.push(e)}))){p=!1;break}}else if(d!==v&&!o(d,v,n,r,i)){p=!1;break}}return i.delete(t),i.delete(e),p};var ry=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n};var oy=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n},iy=Dp?Dp.prototype:void 0,ay=iy?iy.valueOf:void 0;var sy=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new xv(t),new xv(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ph(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=ry;case"[object Set]":if(s||(s=oy),t.size!=e.size&&!(1&r))return!1;var u=a.get(t);if(u)return u==e;r|=2,a.set(t,e);var c=ny(s(t),s(e),r,o,i,a);return a.delete(t),c;case"[object Symbol]":if(ay)return ay.call(t)==ay.call(e)}return!1},uy=Object.prototype.hasOwnProperty;var cy=function(t,e,n,r,o,i){var a=1&n,s=ov(t),u=s.length;if(u!=ov(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:uy.call(e,l)))return!1}var f=i.get(t),p=i.get(e);if(f&&p)return f==e&&p==t;var h=!0;i.set(t,e),i.set(e,t);for(var d=a;++c<u;){var v=t[l=s[c]],y=e[l];if(r)var g=a?r(y,v,l,e,t,i):r(v,y,l,t,e,i);if(!(void 0===g?v===y||o(v,y,n,r,i):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(h=!1)}return i.delete(t),i.delete(e),h},ly="[object Arguments]",fy="[object Array]",py="[object Object]",hy=Object.prototype.hasOwnProperty;var dy=function(t,e,n,r,o,i){var a=gd(t),s=gd(e),u=a?fy:Ev(t),c=s?fy:Ev(e),l=(u=u==ly?py:u)==py,f=(c=c==ly?py:c)==py,p=u==c;if(p&&bd(t)){if(!bd(e))return!1;a=!0,l=!1}if(p&&!l)return i||(i=new rd),a||Od(t)?ny(t,e,n,r,o,i):sy(t,e,u,n,r,o,i);if(!(1&n)){var h=l&&hy.call(t,"__wrapped__"),d=f&&hy.call(e,"__wrapped__");if(h||d){var v=h?t.value():t,y=d?e.value():e;return i||(i=new rd),o(v,y,n,r,i)}}return!!p&&(i||(i=new rd),cy(t,e,n,r,o,i))};var vy=function t(e,n,r,o,i){return e===n||(null==e||null==n||!_p(e)&&!_p(n)?e!=e&&n!=n:dy(e,n,r,o,t,i))};var yy=function(t,e){return vy(t,e)};var gy=function(t,e,n){(void 0!==n&&!ph(t[e],n)||void 0===n&&!(e in t))&&ad(t,e,n)};var my=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++o];if(!1===n(i[u],u,i))break}return e}},by=my();var wy=function(t){return _p(t)&&Fd(t)},Ey=Function.prototype.toString,Dy=Object.prototype.hasOwnProperty,Py=Ey.call(Object);var xy=function(t){if(!_p(t)||"[object Object]"!=jp(t))return!1;var e=tv(t);if(null===e)return!0;var n=Dy.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ey.call(n)==Py};var Ay=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var My=function(t){return cd(t,zd(t))};var ky=function(t,e,n,r,o,i,a){var s=Ay(t,n),u=Ay(e,n),c=a.get(u);if(c)gy(t,n,c);else{var l=i?i(s,u,n+"",t,e,a):void 0,f=void 0===l;if(f){var p=gd(u),h=!p&&bd(u),d=!p&&!h&&Od(u);l=u,p||h||d?gd(s)?l=s:wy(s)?l=qd(s):h?(f=!1,l=Wd(u,!0)):d?(f=!1,l=_v(u,!0)):l=[]:xy(u)||yd(u)?(l=s,yd(s)?l=My(s):hp(s)&&!Mh(s)||(l=Bv(u))):f=!1}f&&(a.set(u,l),o(l,u,r,i,a),a.delete(u)),gy(t,n,l)}};var Oy=function t(e,n,r,o,i){e!==n&&by(n,(function(a,s){if(i||(i=new rd),hp(a))ky(e,n,s,r,t,o,i);else{var u=o?o(Ay(e,s),a,s+"",e,n,i):void 0;void 0===u&&(u=a),gy(e,s,u)}}),zd)};var Sy=function(t){return t};var Ly=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},jy=Math.max;var _y=function(t,e,n){return e=jy(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=jy(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var s=Array(e+1);++o<e;)s[o]=r[o];return s[e]=n(a),Ly(t,this,s)}};var Ry=function(t){return function(){return t}},Cy=Date.now;var Ty=function(t){var e=0,n=0;return function(){var r=Cy(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}},By=Ty(id?function(t,e){return id(t,"toString",{configurable:!0,enumerable:!1,value:Ry(e),writable:!0})}:Sy);var Fy=function(t,e){return By(_y(t,e,Sy),t+"")};var Iy=function(t,e,n){if(!hp(n))return!1;var r=typeof e;return!!("number"==r?Fd(n)&&Ed(e,n.length):"string"==r&&e in n)&&ph(n[e],t)};var Hy=function(t){return Fy((function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&Iy(n[0],n[1],a)&&(i=3>o?void 0:i,o=1),e=Object(e);++r<o;){var s=n[r];s&&t(e,s,r,i)}return e}))},Uy=Hy((function(t,e,n){Oy(t,e,n)}));var Ny=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o};var Yy=function(t,e){return Ny(e,(function(e){return[e,t[e]]}))};var zy=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n};var Xy=function(t){return function(e){var n=Ev(e);return"[object Map]"==n?ry(e):"[object Set]"==n?zy(e):Yy(e,t(e))}}(Id),Wy=Pr((function(t){!function(e,n){if(e){for(var r,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u=1;20>u;++u)o[111+u]="f"+u;for(u=0;9>=u;++u)o[u+96]=""+u;v.prototype.bind=function(t,e,n){var r=this;return r._bindMultiple.call(r,t=t instanceof Array?t:[t],e,n),r},v.prototype.unbind=function(t,e){return this.bind.call(this,t,(function(){}),e)},v.prototype.trigger=function(t,e){var n=this;return n._directMap[t+":"+e]&&n._directMap[t+":"+e]({},t),n},v.prototype.reset=function(){var t=this;return t._callbacks={},t._directMap={},t},v.prototype.stopCallback=function(t,e){if((" "+e.className+" ").indexOf(" mousetrap ")>-1)return!1;if(d(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},v.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},v.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);r=null},v.init=function(){var t=v(n);for(var e in t)"_"!==e.charAt(0)&&(v[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},v.init(),e.Mousetrap=v,t.exports&&(t.exports=v)}function c(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function l(t){if("keypress"==t.type){var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}return o[t.which]?o[t.which]:i[t.which]?i[t.which]:String.fromCharCode(t.which).toLowerCase()}function f(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function p(t,e,n){return n||(n=function(){if(!r)for(var t in r={},o)t>95&&112>t||o.hasOwnProperty(t)&&(r[o[t]]=t);return r}()[t]?"keydown":"keypress"),"keypress"==n&&e.length&&(n="keydown"),n}function h(t,e){var n,r,o,i=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),o=0;n.length>o;++o)s[r=n[o]]&&(r=s[r]),e&&"keypress"!=e&&a[r]&&(r=a[r],i.push("shift")),f(r)&&i.push(r);return{key:r,modifiers:i,action:e=p(r,i,e)}}function d(t,e){return null!==t&&t!==n&&(t===e||d(t.parentNode,e))}function v(t){var e=this;if(t=t||n,!(e instanceof v))return new v(t);e.target=t,e._callbacks={},e._directMap={};var r,o={},i=!1,a=!1,s=!1;function u(t){t=t||{};var e,n=!1;for(e in o)t[e]?n=!0:o[e]=0;n||(s=!1)}function p(t,n,r,i,a,s){var u,c,l,p=[],h=r.type;if(!e._callbacks[t])return[];for("keyup"==h&&f(t)&&(n=[t]),u=0;e._callbacks[t].length>u;++u){if(c=e._callbacks[t][u],i||!c.seq||o[c.seq]==c.level)if(h==c.action)if("keypress"==h&&!r.metaKey&&!r.ctrlKey||(l=c.modifiers,n.sort().join(",")===l.sort().join(",")))(!i&&c.combo==a||i&&c.seq==i&&c.level==s)&&e._callbacks[t].splice(u,1),p.push(c)}return p}function d(t,n,r,o){e.stopCallback(n,n.target||n.srcElement,r,o)||!1===t(n,r)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(n),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(n))}function y(t){"number"!=typeof t.which&&(t.which=t.keyCode);var n=l(t);n&&("keyup"!=t.type||i!==n?e.handleKey(n,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):i=!1)}function g(t,e,n,a){function c(e){return function(){s=e,++o[t],clearTimeout(r),r=setTimeout(u,1e3)}}function f(e){d(n,e,t),"keyup"!==a&&(i=l(e)),setTimeout(u,10)}o[t]=0;for(var p=0;e.length>p;++p){var v=p+1===e.length?f:c(a||h(e[p+1]).action);m(e[p],v,a,t,p)}}function m(t,n,r,o,i){e._directMap[t+":"+r]=n;var a,s=(t=t.replace(/\s+/g," ")).split(" ");s.length>1?g(t,s,n,r):(a=h(t,r),e._callbacks[a.key]=e._callbacks[a.key]||[],p(a.key,a.modifiers,{type:a.action},o,t,i),e._callbacks[a.key][o?"unshift":"push"]({callback:n,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:t}))}e._handleKey=function(t,e,n){var r,o=p(t,e,n),i={},c=0,l=!1;for(r=0;o.length>r;++r)o[r].seq&&(c=Math.max(c,o[r].level));for(r=0;o.length>r;++r)if(o[r].seq){if(o[r].level!=c)continue;l=!0,i[o[r].seq]=1,d(o[r].callback,n,o[r].combo,o[r].seq)}else l||d(o[r].callback,n,o[r].combo);var h="keypress"==n.type&&a;n.type!=s||f(t)||h||u(i),a=l&&"keydown"==n.type},e._bindMultiple=function(t,e,n){for(var r=0;t.length>r;++r)m(t[r],e,n)},c(t,"keypress",y),c(t,"keydown",y),c(t,"keyup",y)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)}));var qy,$y=function(t){return t&&t.length?t[0]:void 0},Gy=(qy=1,function(t){return"".concat(t,"-").concat(qy++)}),Vy=function(t,e){var n,r;return!(!t||!e||(null===(n=t.properties)||void 0===n?void 0:n.id)!==(null===(r=e.properties)||void 0===r?void 0:r.id))},Jy=function(t){var e=t.target,n=t.targetHandler,r=t.otherHandler;return t.data.map((function(t,o){var i,a=Vy(t,e)?n:r;return null!==(i=null==a?void 0:a(t,o))&&void 0!==i?i:t}))},Ky=function(){return{id:Gy("point"),isHover:!1,isActive:!1,isDrag:!1,createTime:Date.now()}},Zy=function(){return{id:Gy("line"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},Qy=function(){return{id:Gy("polygon"),isHover:!1,isActive:!1,isDrag:!1,isDraw:!1,createTime:Date.now()}},tg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Dn(t,fn(fn({},Ky()),e))},eg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"Feature",properties:fn(fn({},Zy()),{},{nodes:t},e),geometry:{type:"LineString",coordinates:Hn(An(t))}}},ng=function(t){return xn(t,{id:Gy("dashLine")})},rg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"Feature",properties:fn(fn({},Qy()),{},{nodes:t},e),geometry:{type:"Polygon",coordinates:[Hn(An([].concat(dn(t),[$y(t)])))]}}},og=function(t){return t.forEach((function(t){t.bbox=$n(t)})),t},ig=function(t){return t.map((function(t,e){if(t.geometry.type.startsWith("Multi")){var n=t.geometry.type.replace("Multi","");return t.geometry.coordinates.map((function(r){return{type:"Feature",properties:fn(fn({},t.properties),{},{multiIndex:e}),geometry:{type:n,coordinates:r}}}))}return t})).flat()},ag=function(t){var e=[],n={};return t.forEach((function(t){var r,o=null===(r=t.properties)||void 0===r?void 0:r.multiIndex;if("number"==typeof o){var i=n[o];if(i)i.geometry.coordinates.push(t.geometry.coordinates);else{var a="Multi".concat(t.geometry.type),s={type:"Feature",properties:fn({},t.properties),geometry:{type:a,coordinates:[t.geometry.coordinates]}};n[o]=s,e.push(s)}}else e.push(t)})),e},sg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},ug=function(t){return function(t,e,n){void 0===n&&(n={});for(var r=Jn(t).coordinates,o=0,i=0;r.length>i&&(o>e||i!==r.length-1);i++){if(o>=e){var a=e-o;if(a){var s=qr(r[i],r[i-1])-180;return Wr(r[i],a,s,n)}return Dn(r[i])}o+=zr(r[i],r[i+1],n)}return Dn(r[r.length-1])}(t,ap(t,{units:"meters"})/2,{units:"meters"})},cg=function(t,e){var n=e.format,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[];if(e.showTotalDistance){var i=ug(t),a=ap(t,{units:"meters"}),s=Hn(t).map((function(t){return Dn(t)}));i.properties=fn({id:Gy("text"),isActive:!1,meters:a,text:n(a,s),type:"totalDistance"},r),o.push(i)}else for(var u=t.geometry.coordinates,c=0;u.length-1>c;c++){var l=Dn(u[c]),f=Dn(u[c+1]),p=zr(l,f,{units:"meters"}),h=$r(An([l,f]));h.properties=fn({id:Gy("text"),isActive:!1,meters:p,text:n(p,[l,f]),type:"distance"},r),o.push(h)}return o},lg=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.format,o=np(t);return Vr(t,{properties:fn({meters:o,text:r(o,t),type:"area",isActive:!1},n)})},fg=function(t){var e,n,r,o,i,a,s,u=t.getContainer();return null!==(e=null!==(n=null!==(r=null!==(o=null!==(i=null!==(a=null!==(s=null==u?void 0:u.querySelector(".l7-marker-container"))&&void 0!==s?s:null==u?void 0:u.querySelector(".BMap_mask"))&&void 0!==a?a:null==u?void 0:u.querySelector("#tdt-L7"))&&void 0!==i?i:t.getMapCanvasContainer())&&void 0!==o?o:null==u?void 0:u.querySelector(".l7-scene"))&&void 0!==r?r:null==u?void 0:u.querySelector(".l7-control-container"))&&void 0!==n?n:null==u?void 0:u.querySelector(".l7-marker-container2"))&&void 0!==e?e:null},pg=function(t){return t.lngLat||t.lnglat||t.latlng},hg=function(t){var e=pg(t);return[e.lng,e.lat]},dg=function(t){return[t.lng,t.lat]},vg=function(t){for(var e=Number.MAX_SAFE_INTEGER,n=0,r=t.length,o=0;r>o;o++)e>t[o]&&(e=t[o],n=o);return n},yg=function(t,e){var n=[],r=[];return t.forEach((function(t){yy(t,e)?r.length&&(n.push(r),r=[]):r.push(t)})),r.length&&n.push(r),n},gg=function(t,e,n,r){var o=[];o=e.map((function(e){var n,r,o=null===(n=e.properties)||void 0===n?void 0:n.line;return(null===(r=e.properties)||void 0===r?void 0:r.isActive)&&o?yg(o.properties.nodes.map((function(t){return t.geometry.coordinates})),t).filter((function(t){return t.length>1})).map((function(t){return xn(t)})):[o]})).flat().filter((function(t){return t})),o.length||e.forEach((function(t){var e=Kn(t);if(/linestring/i.test(e)&&o.push(t),/polygon/i.test(e)){var n,r,i=sp(t);return(n=o).push.apply(n,dn(null!==(r=null==i?void 0:i.features)&&void 0!==r?r:[i]))}}));var i=n.lineAdsorbPixel,a=hn(t,2),s=r.lngLatToPixel([a[0],a[1]]),u=s.x,c=s.y,l=o.filter((function(t){return Hn(t).length>1})).map((function(e){return function(t,e,n){void 0===n&&(n={});var r=Dn([1/0,1/0],{dist:1/0}),o=0;return Yn(t,(function(t){for(var i=Vn(t),a=0;i.length-1>a;a++){var s=Dn(i[a]);s.properties.dist=zr(e,s,n);var u=Dn(i[a+1]);u.properties.dist=zr(e,u,n);var c=zr(s,u,n),l=Math.max(s.properties.dist,u.properties.dist),f=qr(s,u),p=Wr(e,l,f+90,n),h=Wr(e,l,f-90,n),d=Qf(xn([p.geometry.coordinates,h.geometry.coordinates]),xn([s.geometry.coordinates,u.geometry.coordinates])),v=null;d.features.length>0&&((v=d.features[0]).properties.dist=zr(e,v,n),v.properties.location=o+zr(s,v,n)),r.properties.dist>s.properties.dist&&((r=s).properties.index=a,r.properties.location=o),r.properties.dist>u.properties.dist&&((r=u).properties.index=a+1,r.properties.location=o+c),v&&r.properties.dist>v.properties.dist&&((r=v).properties.index=a),o+=c}})),r}(e,t)}));if(!l.length)return null;var f=l.map((function(t){var e=hn(t.geometry.coordinates,2),n=r.lngLatToPixel([e[0],e[1]]),o=n.y;return Math.pow(u-n.x,2)+Math.pow(c-o,2)})),p=vg(f);return Math.pow(f[p],.5)>i?null:l[p].geometry.coordinates},mg=function(t,e,n){var r,o=hn(null!==(r=t.bbox)&&void 0!==r?r:og([t])[0].bbox,4),i=o[2],a=o[3],s=e.lngLatToContainer([o[0],o[1]]),u=s.x,c=s.y,l=e.lngLatToContainer([i,a]),f=l.x,p=l.y,h=e.containerToLngLat([u-n,c+n]),d=h.lng,v=h.lat,y=e.containerToLngLat([f+n,p-n]),g=y.lng,m=y.lat;return[Math.min(d,g),Math.min(v,m),Math.max(d,g),Math.max(v,m)]},bg=function(t,e){var n=hn(e,4),r=n[0],o=n[1],i=n[2],a=n[3],s=hn(t,2),u=s[0],c=s[1];return!(r>u||u>i||o>c||c>a)},wg=function(t){var e=t.adsorbOptions,n=t.draw,r=t.position,o=t.scene,i=e.data,a=e.pointAdsorbPixel,s=e.lineAdsorbPixel,u=[];if(u="allDrawData"===i?kg.instances.map((function(t){return t.getData(!0)})).flat():"drawData"===i?n.getData(!0):i instanceof Function?i(r):i,u=u.filter((function(t){var e;if(null===(e=t.properties)||void 0===e?void 0:e.isActive)return!0;var n=mg(t,o,a);if(bg(r,n))return!0;var i=mg(t,o,s);return!!bg(r,i)})),e.pointAdsorbPixel>0){var c=function(t,e,n,r){var o=n.pointAdsorbPixel,i=[];if(e.length&&(i=e.map((function(e){var n,r=null!==(n=e.properties)&&void 0!==n?n:{},o=r.nodes,i=void 0===o?[]:o,a=r.isActive;return void 0!==a&&a?i.filter((function(e){return!yy(e.geometry.coordinates,t)})):i})).flat().filter((function(t){return t}))),i.length||(i=Hn(An(e)).map((function(t){return Dn(t)}))),i=i.filter((function(e){var n=mg(e,r,o);return bg(t,n)})),!i.length)return null;var a=hn(t,2),s=r.lngLatToPixel([a[0],a[1]]),u=s.x,c=s.y,l=i.map((function(t){var e=hn(t.geometry.coordinates,2),n=r.lngLatToPixel([e[0],e[1]]),o=n.y;return Math.pow(u-n.x,2)+Math.pow(c-o,2)})),f=vg(l);return Math.pow(l[f],.5)>o?null:i[f].geometry.coordinates}(r,u,e,o);if(c)return c}if(e.lineAdsorbPixel>0){var l=gg(r,u,e,o);if(l)return l}return r},Eg=function(t,e){var n=hn(e,2),r=n[0],o=n[1];t.lngLat&&(t.lngLat={lng:r,lat:o}),t.lnglat&&(t.lnglat={lng:r,lat:o})};var Dg=function(){return rn((function t(e,n){en(this,t),this.container=void 0,this.cursor=null,this.options=void 0,this.container=fg(e),this.options=n}),[{key:"setCursor",value:function(t){t!==this.cursor&&this.container&&(this.container.style.cursor=t?this.options[t]:"",this.cursor=t)}},{key:"destroy",value:function(){this.setCursor(null)}}])}();function Pg(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}Pg('.tippy-box[data-animation=fade][data-state=hidden]{opacity:0}[data-tippy-root]{max-width:calc(100vw - 10px)}.tippy-box{position:relative;background-color:#333;color:#fff;border-radius:4px;font-size:14px;line-height:1.4;white-space:normal;outline:0;transition-property:transform,visibility,opacity}.tippy-box[data-placement^=top]>.tippy-arrow{bottom:0}.tippy-box[data-placement^=top]>.tippy-arrow:before{bottom:-7px;left:0;border-width:8px 8px 0;border-top-color:initial;transform-origin:center top}.tippy-box[data-placement^=bottom]>.tippy-arrow{top:0}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{top:-7px;left:0;border-width:0 8px 8px;border-bottom-color:initial;transform-origin:center bottom}.tippy-box[data-placement^=left]>.tippy-arrow{right:0}.tippy-box[data-placement^=left]>.tippy-arrow:before{border-width:8px 0 8px 8px;border-left-color:initial;right:-7px;transform-origin:center left}.tippy-box[data-placement^=right]>.tippy-arrow{left:0}.tippy-box[data-placement^=right]>.tippy-arrow:before{left:-7px;border-width:8px 8px 8px 0;border-right-color:initial;transform-origin:center right}.tippy-box[data-inertia][data-state=visible]{transition-timing-function:cubic-bezier(.54,1.5,.38,1.11)}.tippy-arrow{width:16px;height:16px;color:#333}.tippy-arrow:before{content:"";position:absolute;border-color:transparent;border-style:solid}.tippy-content{position:relative;padding:5px 9px;z-index:1}');Pg(".tippy-box[data-theme~=light]{color:#26323d;box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);background-color:#fff}.tippy-box[data-theme~=light][data-placement^=top]>.tippy-arrow:before{border-top-color:#fff}.tippy-box[data-theme~=light][data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:#fff}.tippy-box[data-theme~=light][data-placement^=left]>.tippy-arrow:before{border-left-color:#fff}.tippy-box[data-theme~=light][data-placement^=right]>.tippy-arrow:before{border-right-color:#fff}.tippy-box[data-theme~=light]>.tippy-backdrop{background-color:#fff}.tippy-box[data-theme~=light]>.tippy-svg-arrow{fill:#fff}");var xg=function(){return rn((function e(n,r){var o=this;en(this,e),this.content="",this.tippy=void 0,this.scene=void 0,this.isMouseInner=!1,this.onMouseMove=function(){o.isMouseInner=!0,o.checkTippyShow()},this.onMouseOut=function(){o.isMouseInner=!1,o.checkTippyShow()},this.setContent=Np((function(t){var e;o.content=null!=t?t:"",null===(e=o.tippy)||void 0===e||e.setContent(null!=t?t:""),o.checkTippyShow()}),16,{maxWait:16});var i=fg(n);this.scene=n,i&&(this.tippy=Te(fg(n),fn(fn({},Je),r)),this.tippy.hide(),n.on(t.SceneEvent.Mousemove,this.onMouseMove),n.on(t.SceneEvent.Mouseout,this.onMouseOut))}),[{key:"getContent",value:function(){return this.content}},{key:"checkTippyShow",value:function(){var t,e;this.content&&this.isMouseInner?null===(t=this.tippy)||void 0===t||t.show():null===(e=this.tippy)||void 0===e||e.hide()}},{key:"destroy",value:function(){var e;this.scene.off(t.SceneEvent.Mousemove,this.onMouseMove),this.scene.off(t.SceneEvent.Mouseout,this.onMouseOut),null===(e=this.tippy)||void 0===e||e.destroy()}}])}(),Ag=function(){return rn((function t(e){var n=e.config;en(this,t),this.historyList=[],this.historyIndex=0,this.config=void 0,this.config=n}),[{key:"save",value:function(t){if(this.config){var e=this.config.maxSize;this.historyIndex&&(this.historyList=this.historyList.slice(this.historyIndex),this.historyIndex=0),e>this.historyList.length||this.historyList.pop();var n=Gv(t);return this.historyList.unshift(n),n}}},{key:"revert",value:function(){if(this.historyList.length&&this.historyList.length-1>this.historyIndex){var t=this.historyList[++this.historyIndex];return t?Gv(t):void 0}}},{key:"redo",value:function(){if(this.historyList.length&&this.historyIndex>0){var t=this.historyList[--this.historyIndex];return t?Gv(t):void 0}}}])}(),Mg=function(e){function n(t){var e,o=t.data,i=t.render,a=t.history,s=t.scene,u=t.bbox;return en(this,n),(e=tn(this,n)).scene=void 0,e.render=void 0,e.data=Gv(r),e.timeout=null,e.diffData={},e.enableBBox=void 0,e.featureType=void 0,e.history=void 0,e.scene=s,e.render=i,a&&(e.history=new Ag({config:a})),o&&e.setData(o),e.featureType=i.polygon?"polygon":i.line?"line":"point",e.enableBBox=u,e}return un(n,e),rn(n,[{key:"saveHistory",value:function(){var t;return null===(t=this.history)||void 0===t?void 0:t.save(this.data)}},{key:"revertHistory",value:function(){var t,e=null===(t=this.history)||void 0===t?void 0:t.revert();if(e)return this.setData(e),e}},{key:"redoHistory",value:function(){var t,e=null===(t=this.history)||void 0===t?void 0:t.redo();if(e)return this.setData(e),e}},{key:"setData",value:function(e){var n,r=this;Object.keys(e).length&&(this.enableBBox&&(null===(n=e[this.featureType])||void 0===n?void 0:n.length)&&(e[this.featureType]=og(e[this.featureType])),this.data=fn(fn({},this.data),e),this.diffData=fn(fn({},this.diffData),e),this.timeout||(this.timeout=requestAnimationFrame((function(){return r.updateDiffData()}))),this.emit(t.SourceEvent.Change,{data:this.data}));return this.data}},{key:"getData",value:function(){return this.data}},{key:"getRenderData",value:function(t){return this.data[t]}},{key:"setRenderData",value:function(e,n){var r="function"==typeof n?n(this.getRenderData(e)):n;return this.setData(on({},e,r)),this.emit(t.SourceEvent.Change,this.data),r}},{key:"updateDiffData",value:function(){var e=this,n=Object.entries(this.diffData);n.length&&(n.forEach((function(t){var n,r=hn(t,2),o=r[0],i=r[1];Array.isArray(i)&&(null===(n=e.getRender(o))||void 0===n||n.setData(i))})),this.emit(t.SourceEvent.Update,this.data,this.diffData),this.diffData={},this.timeout=null,requestAnimationFrame((function(){e.scene.render()})))}},{key:"getRender",value:function(t){return this.render[t]}},{key:"clear",value:function(){this.setData(Vv(Object.keys(this.render).map((function(t){return[t,[]]}))))}}])}(lp),kg=function(e){function r(e,n){var o,i;en(this,r),(i=tn(this,r)).scene=void 0,i.source=void 0,i.render=void 0,i.cursor=void 0,i.options=void 0,i.enabled=!1,i.allowCreate=!1,i.sceneRender=void 0,i.mouseLngLat={lng:0,lat:0},i.popup=void 0,i.addCount=0,i.saveMouseLngLat=Np((function(t){i.mouseLngLat=pg(t)}),100,{maxWait:100}),i.saveHistory=Np((function(){i.options.history&&i.source.saveHistory()}),100),i.bindThis(),i.scene=e,i.sceneRender=new qp(e),i.options=Uy({},i.getDefaultOptions(n),n),i.render=i.initRender(),i.source=new Mg({render:i.render,history:i.options.history||void 0,scene:e,bbox:null!==(o=i.options.bbox)&&void 0!==o&&o}),i.cursor=new Dg(e,i.options.cursor);var a=i.options,s=a.initialData,u=a.popup;return s&&i.setData(s),u&&(i.popup=new xg(e,u instanceof Object?u:{})),i.saveHistory(),i.bindCommonEvent(),i.emit(t.DrawEvent.Init,i),i.bindEnableEvent(),r.instances.push(i),i}return un(r,e),rn(r,[{key:"addable",get:function(){var t=this.getData(),e=this.options,n=e.multiple,r=e.maxCount,o=t.find((function(t){var e;return null===(e=t.properties)||void 0===e?void 0:e.isDraw}));return!(!this.enabled||!this.allowCreate)&&(!!(n&&0>=r||o)||!(!n&&this.addCount>=1)&&(0>=r||r>t.length))}},{key:"getOptions",value:function(){return this.options}},{key:"getEditItem",value:function(){return this.editItem}},{key:"getDragItem",value:function(){return this.dragItem}},{key:"setHelper",value:function(t){var e,n,r=this.options.helper;if(r){var o=null!==(e=t in r?r[t]:t)&&void 0!==e?e:null;null===(n=this.popup)||void 0===n||n.setContent(o)}}},{key:"isEnable",value:function(){return this.enabled}},{key:"bindThis",value:function(){this.initRender=this.initRender.bind(this),this.getData=this.getData.bind(this),this.setData=this.setData.bind(this),this.emitChangeEvent=this.emitChangeEvent.bind(this),this.saveHistory=this.saveHistory.bind(this),this.onSceneMouseMove=this.onSceneMouseMove.bind(this),this.revertHistory=this.revertHistory.bind(this),this.redoHistory=this.redoHistory.bind(this),this.removeActiveFeature=this.removeActiveFeature.bind(this),this.bindCommonEvent=this.bindCommonEvent.bind(this),this.bindEnableEvent=this.bindEnableEvent.bind(this),this.unbindEnableEvent=this.unbindEnableEvent.bind(this),this.setActiveFeature=this.setActiveFeature.bind(this)}},{key:"bindCommonEvent",value:function(){var e=this;this.on(t.DrawEvent.Add,this.emitChangeEvent),this.on(t.DrawEvent.Add,(function(){e.addCount++})),this.on(t.DrawEvent.Edit,this.emitChangeEvent),this.on(t.DrawEvent.Remove,this.emitChangeEvent),this.on(t.DrawEvent.Clear,this.emitChangeEvent),this.on(t.DrawEvent.AddNode,this.saveHistory),this.on(t.DrawEvent.RemoveNode,this.emitChangeEvent),this.bindEmitSelectEvent(!0)}},{key:"bindEmitSelectEvent",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=null,o=function(){var n,o,i,a=e.getData(!0).find((function(t){var e;return null===(e=t.properties)||void 0===e?void 0:e.isActive}))||null;(null===(n=r)||void 0===n||null===(o=n.properties)||void 0===o?void 0:o.id)!==(null==a||null===(i=a.properties)||void 0===i?void 0:i.id)&&(r=a,e.emit(t.DrawEvent.Select,a))};this.source.on(t.SourceEvent.Change,o),n&&o()}},{key:"bindEnableEvent",value:function(){this.unbindKeyboardEvent(),this.scene.setMapStatus({doubleClickZoom:!1}),this.scene.on(t.SceneEvent.Mousemove,this.saveMouseLngLat),this.bindKeyboardEvent()}},{key:"unbindEnableEvent",value:function(){this.scene.setMapStatus({doubleClickZoom:!0}),this.scene.off(t.SceneEvent.Mousemove,this.saveMouseLngLat),this.unbindKeyboardEvent()}},{key:"bindKeyboardEvent",value:function(){var t=this,e=this.options.keyboard||{},n=e.revert,r=e.redo,o=e.remove;o&&Wy.bind(o,(function(){t.removeActiveFeature()})),this.options.history&&(n&&Wy.bind(n,this.revertHistory),r&&Wy.bind(r,this.redoHistory))}},{key:"unbindKeyboardEvent",value:function(){var t=this.options.keyboard||{},e=t.revert,n=t.redo,r=t.remove;r&&Wy.unbind(r),this.options.history&&(e&&Wy.unbind(e),n&&Wy.unbind(n))}},{key:"emitChangeEvent",value:function(){this.emit(t.DrawEvent.Change,this.getData()),this.saveHistory()}},{key:"revertHistory",value:function(){this.enabled&&this.options.history&&this.source.revertHistory()&&(this.correctDrawItem(),this.emit(t.DrawEvent.Change,this.getData()))}},{key:"redoHistory",value:function(){this.enabled&&this.options.history&&this.source.redoHistory()&&(this.correctDrawItem(),this.emit(t.DrawEvent.Change,this.getData()))}},{key:"getRenderLayers",value:function(){return Vv(Xy(this.render).map((function(t){var e=hn(t,2);return[e[0],e[1].getLayers()]})))}},{key:"getTargetFeature",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getData(!0),o=null;t&&(o=null!==(e=r.find((function(e){var n,r;return(null===(n=e.properties)||void 0===n?void 0:n.id)===("string"==typeof t?t:null===(r=t.properties)||void 0===r?void 0:r.id)})))&&void 0!==e?e:null,!o&&t instanceof Object&&(o=null!==(n=r.find((function(e){return yy(t.geometry,e.geometry)})))&&void 0!==n?n:null));return o}},{key:"removeActiveFeature",value:function(){var t=this.getData(!0).find((function(t){var e,n=null!==(e=t.properties)&&void 0!==e?e:{};return n.isActive||n.isDraw}));return t&&this.removeFeature(t),t}},{key:"removeFeature",value:function(e){var n=this.getData(!0),r=this.getTargetFeature(e);r&&(this.setData(n.filter((function(t){return!Vy(r,t)}))),this.emit(t.DrawEvent.Remove,e,this.getData()))}},{key:"correctDrawItem",value:function(){this.getData(!0).find((function(t){var e;return null===(e=t.properties)||void 0===e?void 0:e.isDraw}))&&this.onSceneMouseMove({type:"mousemove",lnglat:this.mouseLngLat,lngLat:this.mouseLngLat})}},{key:"initRender",value:function(){var t,e={},n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=gn(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return t.length>r?{done:!1,value:t[r++]}:{done:!0}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(this.getRenderTypes());try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r]=new(0,Gp[r])(this.scene,{style:this.options.style[r]})}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"getCommonOptions",value:function(t){return{initialData:[],autoActive:!0,cursor:Gv(n),editable:!0,style:Gv(oh),multiple:!0,history:Gv(Ge),keyboard:Gv(Ve),popup:!0,helper:{},maxCount:-1}}},{key:"setCursor",value:function(t){this.cursor.setCursor(t)}},{key:"resetCursor",value:function(){this.setCursor(this.addable?"draw":null)}},{key:"enable",value:function(){var e=this;this.allowCreate=0>=arguments.length||void 0===arguments[0]||arguments[0],this.addCount=0,this.enabled=!0,this.bindEnableEvent(),this.resetCursor(),this.setHelper(this.addable?"draw":null),setTimeout((function(){e.emit(t.DrawEvent.Enable,e)}),0)}},{key:"disable",value:function(){var e=this;this.resetFeatures(),this.enabled=!1,this.setCursor(null),this.unbindEnableEvent(),this.addCount=0,this.setHelper(null),setTimeout((function(){e.emit(t.DrawEvent.Disable,e)}),0)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.source.clear(),this.emit(t.DrawEvent.Clear,this),e&&this.disable()}},{key:"show",value:function(){return Object.values(this.render).forEach((function(t){t.show()}))}},{key:"hide",value:function(){return Object.values(this.render).forEach((function(t){t.hide()}))}},{key:"destroy",value:function(){var e,n=this;Object.values(this.render).forEach((function(t){t.destroy()})),Object.values(t.RenderEvent).forEach((function(t){Object.values(n.render).forEach((function(e){e.removeAllListeners(t)})),n.sceneRender.removeAllListeners(t)})),setTimeout((function(){Object.values(t.DrawEvent).forEach((function(t){n.removeAllListeners(t)}))}),0),null===(e=this.popup)||void 0===e||e.destroy(),this.cursor.destroy(),this.emit(t.DrawEvent.Destroy,this);var o=r.instances.indexOf(this);o>-1&&r.instances.splice(o,1)}}])}(lp);kg.instances=[];var Og=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0},Sg=function(e){function n(){return en(this,n),tn(this,n,arguments)}return un(n,e),rn(n,[{key:"pointRender",get:function(){return this.render.point}},{key:"dragPoint",get:function(){return this.getPointData().find((function(t){return t.properties.isDrag}))}},{key:"editPoint",get:function(){return this.getPointData().find((function(t){return t.properties.isActive}))}},{key:"hoverPoint",get:function(){return this.getPointData().find((function(t){return t.properties.isHover}))}},{key:"getDragPoint",value:function(){return this.dragPoint}},{key:"getEditPoint",value:function(){return this.editPoint}},{key:"getPointData",value:function(){return this.source.getRenderData("point")}},{key:"setPointData",value:function(t){return this.source.setRenderData("point",t)}},{key:"bindPointRenderEvent",value:function(){var e,n,r,o,i,a;null===(e=this.pointRender)||void 0===e||e.on(t.RenderEvent.UnClick,this.onPointCreate.bind(this)),null===(n=this.pointRender)||void 0===n||n.on(t.RenderEvent.Mousemove,this.onPointMouseMove.bind(this)),null===(r=this.pointRender)||void 0===r||r.on(t.RenderEvent.Mouseout,this.onPointMouseOut.bind(this)),null===(o=this.pointRender)||void 0===o||o.on(t.RenderEvent.Dragstart,this.onPointDragStart.bind(this)),null===(i=this.pointRender)||void 0===i||i.on(t.RenderEvent.Dragging,this.onPointDragging.bind(this)),null===(a=this.pointRender)||void 0===a||a.on(t.RenderEvent.Dragend,this.onPointDragEnd.bind(this))}},{key:"handleCreatePoint",value:function(t){var e=this.options,n=e.autoActive,r=e.editable,o=tg(t);return this.setPointData((function(t){return Jy({target:o,data:[].concat(dn(t),[o]),targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isHover:r,isActive:n&&r})},otherHandler:function(t){t.properties=fn(fn({},t.properties),{},{isHover:!1,isActive:!1,isDrag:!1})}})})),o}},{key:"handlePointHover",value:function(t){return this.setCursor("pointHover"),Vy(t,this.hoverPoint)||this.setPointData((function(e){return Jy({target:t,data:e,targetHandler:function(t){t.properties.isHover=!0},otherHandler:function(t){t.properties.isHover=!1}})})),t}},{key:"handlePointUnHover",value:function(t){return this.resetCursor(),this.setPointData((function(t){return t.map((function(t){return t.properties.isHover=!1,t}))})),t}},{key:"handlePointDragStart",value:function(t){return this.setPointData((function(e){return Jy({target:t,data:e,targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDrag:!0,isActive:!0})},otherHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1})}})})),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),t}},{key:"handlePointDragging",value:function(t,e){return this.setPointData((function(n){return Jy({target:t,data:n,targetHandler:function(t){t.geometry.coordinates=dg(e)}})})),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("pointDrag"),t}},{key:"handlePointDragEnd",value:function(t){return this.setPointData((function(e){return Jy({target:t,data:e,targetHandler:function(t){t.properties.isDrag=!1}})})),this.scene.setMapStatus({dragEnable:!0}),this.setCursor("pointHover"),t}},{key:"onPointCreate",value:function(t){return this.handleCreatePoint(dg(pg(t)))}},{key:"onPointMouseMove",value:function(t){return this.handlePointHover(t.feature)}},{key:"onPointMouseOut",value:function(t){return this.handlePointUnHover(t.feature)}},{key:"onPointDragStart",value:function(t){if(this.options.editable)return this.handlePointDragStart(t.feature)}},{key:"onPointDragging",value:function(t){var e=this.dragPoint;if(this.options.editable&&e)return this.handlePointDragging(e,pg(t))}},{key:"onPointDragEnd",value:function(t){var e=this.dragPoint;if(this.options.editable&&e)return this.handlePointDragEnd(e)}},{key:"enablePointRenderAction",value:function(){var t,e,n,r,o=this.options.editable;this.enabled&&(null===(e=this.pointRender)||void 0===e||e.enableCreate());(null===(t=this.pointRender)||void 0===t||t.enableClick(),o)&&(null===(n=this.pointRender)||void 0===n||n.enableHover(),null===(r=this.pointRender)||void 0===r||r.enableDrag())}},{key:"disablePointRenderAction",value:function(){var t,e,n,r;null===(t=this.pointRender)||void 0===t||t.disableCreate(),null===(e=this.pointRender)||void 0===e||e.disableHover(),null===(n=this.pointRender)||void 0===n||n.disableDrag(),null===(r=this.pointRender)||void 0===r||r.disableClick()}}])}(kg),Lg=function(e){function n(){return en(this,n),tn(this,n,arguments)}return un(n,e),rn(n,[{key:"midPointRender",get:function(){return this.render.midPoint}},{key:"getCommonOptions",value:function(t){return fn(fn({},an(sn(n.prototype),"getCommonOptions",this).call(this,t)),{},{showMidPoint:!0})}},{key:"bindMidPointRenderEvent",value:function(){var e,n,r;null===(e=this.midPointRender)||void 0===e||e.on(t.RenderEvent.Click,this.onMidPointClick.bind(this)),null===(n=this.midPointRender)||void 0===n||n.on(t.RenderEvent.Mousemove,this.onMidPointHover.bind(this)),null===(r=this.midPointRender)||void 0===r||r.on(t.RenderEvent.Mouseout,this.onMidPointUnHover.bind(this))}},{key:"getMidPointData",value:function(){return this.source.getRenderData("midPoint")}},{key:"setMidPointData",value:function(t){return this.source.setRenderData("midPoint",t)}},{key:"getMidPointsByLine",value:function(t){var e=t.properties.nodes;if(!this.options.showMidPoint||2>e.length)return[];for(var n=[],r=0;e.length-1>r;r++){var o,i,a,s,u=$r(An([e[r],e[r+1]]),{properties:{id:Gy("midPoint"),startId:null!==(o=null===(i=e[r].properties)||void 0===i?void 0:i.id)&&void 0!==o?o:"",endId:null!==(a=null===(s=e[r+1].properties)||void 0===s?void 0:s.id)&&void 0!==a?a:""}});n.push(u)}return n}},{key:"onMidPointHover",value:function(t){this.setCursor("pointHover")}},{key:"onMidPointUnHover",value:function(t){this.resetCursor()}},{key:"enableMidPointRenderAction",value:function(){var t,e;null===(t=this.midPointRender)||void 0===t||t.enableClick(),null===(e=this.midPointRender)||void 0===e||e.enableHover()}},{key:"disableMidPointRenderAction",value:function(){var t,e;null===(t=this.midPointRender)||void 0===t||t.disableClick(),null===(e=this.midPointRender)||void 0===e||e.disableHover()}}])}(Sg),jg=function(e){function n(){var t;en(this,n);for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];return(t=tn(this,n,[].concat(r))).prevCreateTime=Date.now(),t.previousPosition=[0,0],t}return un(n,e),rn(n,[{key:"isDragTrigger",get:function(){return"drag"===this.options.trigger}},{key:"isClickTrigger",get:function(){return"click"===this.options.trigger}},{key:"editLine",get:function(){return this.getLineData().find((function(t){var e=t.properties;return!e.isDraw&&e.isActive}))}},{key:"lineRender",get:function(){return this.render.line}},{key:"dragLine",get:function(){return this.getLineData().find((function(t){return t.properties.isDrag}))}},{key:"drawLine",get:function(){return this.getLineData().find((function(t){return t.properties.isDraw}))}},{key:"hoverLine",get:function(){return this.getLineData().find((function(t){return t.properties.isHover}))}},{key:"getDragLine",value:function(){return this.dragLine}},{key:"getDrawLine",value:function(){return this.drawLine}},{key:"getEditLine",value:function(){return this.editLine}},{key:"getDefaultOptions",value:function(t){var e=fn(fn({},this.getCommonOptions(t)),{},{showMidPoint:!0,distanceOptions:!1,helper:Gv(ah),dragOptions:Gv(Ze)});return t.distanceOptions&&(e.distanceOptions=fn(fn({},qe),e.distanceOptions)),t.adsorbOptions&&(e.adsorbOptions=fn(fn({},Ke),e.adsorbOptions),e.bbox=!0),"drag"===t.trigger&&(e.autoActive=!1,e.helper=fn(fn({},e.helper),ch)),e}},{key:"getAdsorbPosition",value:function(t){var e=this.options.adsorbOptions;return"boolean"==typeof e?t:wg({adsorbOptions:e,position:t,scene:this.scene,draw:this})}},{key:"bindSceneEvent",value:function(){this.sceneRender.on(t.RenderEvent.Mousemove,this.onSceneMouseMove.bind(this))}},{key:"bindPointRenderEvent",value:function(){var e;an(sn(n.prototype),"bindPointRenderEvent",this).call(this),null===(e=this.pointRender)||void 0===e||e.on(t.RenderEvent.Click,this.onPointClick.bind(this))}},{key:"bindLineRenderEvent",value:function(){var e,n,r,o,i,a;null===(e=this.lineRender)||void 0===e||e.on(t.RenderEvent.UnClick,this.onLineUnClick.bind(this)),null===(n=this.lineRender)||void 0===n||n.on(t.RenderEvent.Mousemove,this.onLineMouseMove.bind(this)),null===(r=this.lineRender)||void 0===r||r.on(t.RenderEvent.Mouseout,this.onLineMouseOut.bind(this)),null===(o=this.lineRender)||void 0===o||o.on(t.RenderEvent.Dragstart,this.onLineDragStart.bind(this)),null===(i=this.lineRender)||void 0===i||i.on(t.RenderEvent.Dragging,this.onLineDragging.bind(this)),null===(a=this.lineRender)||void 0===a||a.on(t.RenderEvent.Dragend,this.onLineDragEnd.bind(this))}},{key:"getDashLineDistanceTexts",value:function(t,e){var n=e.showTotalDistance,r=e.format;return e.showDashDistance?t.map((function(t){return cg(t,{showTotalDistance:n,format:r},{isActive:!0,type:"dash"})})).flat():[]}},{key:"getLineDistanceTexts",value:function(t,e){var n=e.showTotalDistance,r=e.format,o=e.showWhen,i=[];if(o.includes("active")){var a=t.filter((function(t){return t.properties.isActive&&t.properties.nodes.length>1}));i.push.apply(i,dn(a.map((function(t){return cg(t,{showTotalDistance:n,format:r},{isActive:!0})})).flat()))}if(o.includes("normal")){var s=t.filter((function(t){return!t.properties.isActive&&t.properties.nodes.length>1}));i.push.apply(i,dn(s.map((function(t){return cg(t,{showTotalDistance:n,format:r})})).flat()))}return i}},{key:"getDistanceTexts",value:function(){var t=this.options.distanceOptions;if(!t)return[];var e=[],n=t.showWhen,r=t.showDashDistance,o=t.format,i=t.showTotalDistance;return e.push.apply(e,dn(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!1,format:o,showDashDistance:r})).concat(dn(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:i,format:o,showWhen:n})))),e}},{key:"getAllTexts",value:function(){return this.getDistanceTexts()}},{key:"handleCreateLine",value:function(t){var e=eg([t],{isActive:!0,isDraw:!0});return this.setLineData((function(t){return Jy({target:e,data:[].concat(dn(t),[e]),otherHandler:function(t){t.properties.isActive=!1}})})),this.setPointData([t]),this.setTextData(this.getAllTexts()),e}},{key:"syncLineNodes",value:function(t,e){return t.properties.nodes=e,t.geometry.coordinates=Hn(An(e)),this.setLineData((function(e){return e.map((function(e){return Vy(e,t)?t:e}))})),Vy(this.editLine,t)&&this.setMidPointData(this.getMidPointsByLine(t)),this.setPointData(t.properties.nodes),this.setTextData(this.getAllTexts()),t}},{key:"setActiveLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setLineData((function(n){return Jy({target:t,data:n,targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},e)},otherHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})})),this.setPointData(t.properties.nodes.map((function(t){return t.properties=fn(fn({},t.properties),{},{isHover:!1,isActive:!1}),t}))),this.setMidPointData(this.getMidPointsByLine(t)),this.setDashLineData([]),this.setTextData(this.getAllTexts()),t}},{key:"clearActiveLine",value:function(){this.source.setData({point:[],line:this.getLineData().map((function(t){return t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),t})),midPoint:[],text:this.getAllTexts()})}},{key:"handleLineUnClick",value:function(t){return this.clearActiveLine(),t}},{key:"handleLineHover",value:function(t){if(!this.drawLine)return this.setCursor("lineHover"),Vy(t,this.hoverLine)||this.setLineData((function(e){return Jy({target:t,data:e,targetHandler:function(t){t.properties.isHover=!0},otherHandler:function(t){t.properties.isHover=!1}})})),t}},{key:"handleLineUnHover",value:function(t){if(!this.drawLine)return this.resetCursor(),this.setLineData((function(t){return t.map((function(t){return t.properties.isHover=!1,t}))})),t}},{key:"handleLineDragStart",value:function(t){return this.setActiveLine(t,{isDrag:!0,isActive:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("lineDrag"),t}},{key:"handleLineDragging",value:function(t,e){var n=e.lng,r=e.lat,o=t.properties.nodes,i=hn(this.previousPosition,2),a=i[0],s=i[1];return o.forEach((function(t){var e=t.geometry.coordinates;t.geometry.coordinates=[sg(e[0]+n-a),sg(e[1]+r-s)]})),this.syncLineNodes(t,o),this.setActiveLine(t,{isDrag:!0}),this.setCursor("lineDrag"),this.previousPosition=[n,r],t}},{key:"handleLineDragEnd",value:function(t){return t.properties.isDrag=!1,this.setLineData((function(t){return t})),this.scene.setMapStatus({dragEnable:!0}),t}},{key:"resetAdsorbLngLat",value:function(t){if(this.options.adsorbOptions){var e=this.getAdsorbPosition(dg(pg(t)));return e&&Eg(t,e),e}}},{key:"onPointCreate",value:function(t){if(!this.editLine){this.resetAdsorbLngLat(t);var e=an(sn(n.prototype),"onPointCreate",this).call(this,t),r=this.drawLine;if(e)return r?(this.syncLineNodes(r,[].concat(dn(r.properties.nodes),[e])),this.setDashLineData([])):this.handleCreateLine(e),e}}},{key:"onPointDragStart",value:function(t){if(this.editLine)return this.setHelper("pointDrag"),an(sn(n.prototype),"onPointDragStart",this).call(this,t)}},{key:"onPointDragging",value:function(t){var e=an(sn(n.prototype),"onPointDragging",this).call(this,t);if(e){var r=this.resetAdsorbLngLat(t);r&&(e.geometry.coordinates=Gv(r))}var o=this.editLine;return o&&e&&(this.syncLineNodes(o,o.properties.nodes.map((function(t){return Vy(e,t)?e:t}))),this.setActiveLine(o)),e}},{key:"onPointDragEnd",value:function(t){if(this.editLine){var e=an(sn(n.prototype),"onPointDragEnd",this).call(this,t);return this.setPointData((function(t){return t.map((function(t){return t.properties.isActive=!1,t}))})),this.setHelper("pointHover"),e}}},{key:"onLineUnClick",value:function(t){var e=this.editLine;if(e)return this.handleLineUnClick(e)}},{key:"onLineMouseMove",value:function(t){if(!this.drawLine)return this.dragLine||this.drawLine||!this.options.editable||this.setHelper("lineHover"),this.handleLineHover(t.feature)}},{key:"onLineMouseOut",value:function(t){if(!this.drawLine)return this.dragLine||this.drawLine||this.setHelper(this.addable?"draw":null),this.handleLineUnHover(t.feature)}},{key:"onLineDragStart",value:function(t){if(this.options.editable&&!this.drawLine)return this.previousPosition=hg(t),this.setHelper("lineDrag"),this.handleLineDragStart(t.feature)}},{key:"onLineDragging",value:function(t){var e=this.dragLine;if(e)return this.handleLineDragging(e,pg(t))}},{key:"onLineDragEnd",value:function(t){var e=this.dragLine;if(e)return this.setHelper("lineHover"),this.handleLineDragEnd(e)}},{key:"onPointMouseMove",value:function(t){var e=an(sn(n.prototype),"onPointMouseMove",this).call(this,t);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper("pointHover"),e}},{key:"onPointMouseOut",value:function(t){var e=an(sn(n.prototype),"onPointMouseOut",this).call(this,t);return this.dragLine||this.drawLine||this.dragPoint||this.setHelper(this.addable?"draw":null),e}},{key:"onMidPointHover",value:function(t){an(sn(n.prototype),"onMidPointHover",this).call(this,t),this.setHelper("midPointHover")}},{key:"onMidPointUnHover",value:function(t){an(sn(n.prototype),"onMidPointUnHover",this).call(this,t),this.setHelper(null)}},{key:"onPointClick",value:function(t){}},{key:"getLineData",value:function(){return this.source.getRenderData("line")}},{key:"setLineData",value:function(t){return this.source.setRenderData("line",t)}},{key:"getTextData",value:function(){return this.source.getRenderData("text")}},{key:"setTextData",value:function(t){return this.source.setRenderData("text",t)}},{key:"getDashLineData",value:function(){return this.source.getRenderData("dashLine")}},{key:"setDashLineData",value:function(t){return this.source.setRenderData("dashLine",t)}},{key:"onMidPointClick",value:function(t){var e=this.editLine,n=t.feature;if(e&&n&&!this.dragPoint){var r=e.properties.nodes,o=n.properties,i=o.startId,a=o.endId,s=r.findIndex((function(t){return t.properties.id===i})),u=r.findIndex((function(t){return t.properties.id===a}));if(s>-1&&u>-1){var c=tg(n.geometry.coordinates,{isDrag:!0,isHover:!0});return this.setHelper("pointDrag"),r.splice(u,0,c),e.geometry.coordinates=Hn(An(r)),this.syncLineNodes(e,r),this.setActiveLine(e),c}}}},{key:"enableSceneRenderAction",value:function(){this.sceneRender.enableDrag(),this.sceneRender.enableMouseMove(),this.sceneRender.enableDblClick()}},{key:"disableSceneRenderAction",value:function(){this.sceneRender.disableDrag(),this.sceneRender.disableMouseMove(),this.sceneRender.disableDblClick()}},{key:"enableLineRenderAction",value:function(){var t,e,n,r=this.options.editable;(null===(t=this.lineRender)||void 0===t||t.enableUnClick(),r)&&(null===(e=this.lineRender)||void 0===e||e.enableHover(),null===(n=this.lineRender)||void 0===n||n.enableDrag())}},{key:"disableLineRenderAction",value:function(){var t,e,n;null===(t=this.lineRender)||void 0===t||t.disableUnClick(),null===(e=this.lineRender)||void 0===e||e.disableHover(),null===(n=this.lineRender)||void 0===n||n.disableDrag()}},{key:"onSceneDragStart",value:function(e){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.onPointCreate(e),this.prevCreateTime=Date.now(),this.sceneRender.on(t.RenderEvent.Dragging,this.onSceneDragging))}},{key:"onSceneDragging",value:function(t){var e=this.drawLine,n=Date.now(),r=fn(fn({},Ze),this.options.dragOptions),o=r.dotDistance,i=r.dotDuration;if(this.isDragTrigger&&this.addable&&e&&(!i||n-this.prevCreateTime>=i)){var a=pg(t),s=a.lng,u=a.lat,c=Og(e.properties.nodes).geometry.coordinates,l=this.scene.lngLatToPixel([c[0],c[1]]),f=l.x,p=l.y,h=this.scene.lngLatToPixel([s,u]),d=h.x,v=h.y;o&&Math.pow(o,2)>=Math.pow(d-f,2)+Math.pow(v-p,2)||(this.onPointCreate(t),this.prevCreateTime=n)}}},{key:"onSceneDragEnd",value:function(t){}},{key:"bindSceneDragEvent",value:function(){this.unbindSceneDragEvent(),this.sceneRender.on(t.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.on(t.RenderEvent.Dragging,this.onSceneDragging),this.sceneRender.on(t.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!1})}},{key:"unbindSceneDragEvent",value:function(){this.sceneRender.off(t.RenderEvent.Dragstart,this.onSceneDragStart),this.sceneRender.off(t.RenderEvent.Dragging,this.onSceneDragging),this.sceneRender.off(t.RenderEvent.Dragend,this.onSceneDragEnd),this.scene.setMapStatus({dragEnable:!0})}},{key:"bindEnableEvent",value:function(){an(sn(n.prototype),"bindEnableEvent",this).call(this),this.isDragTrigger&&this.bindSceneDragEvent()}},{key:"unbindEnableEvent",value:function(){an(sn(n.prototype),"unbindEnableEvent",this).call(this),this.isDragTrigger&&this.unbindSceneDragEvent()}},{key:"bindThis",value:function(){an(sn(n.prototype),"bindThis",this).call(this),this.onSceneDragStart=this.onSceneDragStart.bind(this),this.onSceneDragging=this.onSceneDragging.bind(this),this.onSceneDragEnd=this.onSceneDragEnd.bind(this)}}])}(Lg),_g=function(e){function n(){return en(this,n),tn(this,n,arguments)}return un(n,e),rn(n,[{key:"dragItem",get:function(){return this.dragPolygon}},{key:"editItem",get:function(){return this.editPolygon}},{key:"polygonRender",get:function(){return this.render.polygon}},{key:"dragPolygon",get:function(){return this.getPolygonData().find((function(t){return t.properties.isDrag}))}},{key:"drawPolygon",get:function(){return this.getPolygonData().find((function(t){return t.properties.isDraw}))}},{key:"editPolygon",get:function(){return this.getPolygonData().find((function(t){var e=t.properties;return!e.isDraw&&e.isActive}))}},{key:"hoverPolygon",get:function(){return this.getPolygonData().find((function(t){return t.properties.isHover}))}},{key:"getDragPolygon",value:function(){return this.dragPolygon}},{key:"getDrawPolygon",value:function(){return this.drawPolygon}},{key:"getEditPolygon",value:function(){return this.editPolygon}},{key:"getRenderTypes",value:function(){return["polygon","line","dashLine","midPoint","point","text"]}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getPolygonData();return t?e:ag(e)}},{key:"getMainLayer",value:function(){var t,e;return null!==(t=null===(e=this.render.polygon)||void 0===e?void 0:e.getLayers())&&void 0!==t?t:[]}},{key:"getDefaultOptions",value:function(t){var e=fn(fn({},an(sn(n.prototype),"getDefaultOptions",this).call(this,t)),{},{areaOptions:!1,helper:Gv(sh)});return t.areaOptions&&(e.areaOptions=fn(fn({},$e),t.areaOptions)),e}},{key:"getAreaTexts",value:function(t){var e=this.options.areaOptions;if(!e)return[];var n=e.format,r=e.showWhen,o=[],i=t.filter((function(t){return t.geometry.coordinates[0].length>=4}));return r.includes("active")&&i.filter((function(t){return t.properties.isActive})).forEach((function(t){o.push(lg(t,{format:n},{isActive:!0}))})),r.includes("normal")&&i.filter((function(t){return!t.properties.isActive})).forEach((function(t){o.push(lg(t,{format:n},{isActive:!1}))})),o}},{key:"getAllTexts",value:function(){return[].concat(dn(an(sn(n.prototype),"getAllTexts",this).call(this)),dn(this.getAreaTexts(this.getPolygonData())))}},{key:"getPolygonData",value:function(){return this.source.getRenderData("polygon")}},{key:"setPolygonData",value:function(t){return this.source.setRenderData("polygon",t)}},{key:"handleCreatePolygon",value:function(t,e){var n=rg(t,{nodes:t,line:e,isActive:!0,isDraw:!0});return this.setPolygonData((function(t){return Jy({target:n,data:[].concat(dn(t),[n]),otherHandler:function(t){t.properties.isActive=!1}})})),n}},{key:"handlePolygonUnClick",value:function(t){return this.clearActivePolygon(),t}},{key:"handlePolygonHover",value:function(t){return this.setCursor("polygonHover"),Vy(t,this.hoverPolygon)||this.setPolygonData((function(e){return Jy({target:t,data:e,targetHandler:function(t){t.properties.isHover=!0},otherHandler:function(t){t.properties.isHover=!1}})})),t}},{key:"handlePolygonUnHover",value:function(){this.resetCursor(),this.setPolygonData((function(t){return t.map((function(t){return t.properties.isHover=!1,t}))}))}},{key:"handlePolygonDragStart",value:function(t){return this.setActivePolygon(t,{isDrag:!0}),this.scene.setMapStatus({dragEnable:!1}),this.setCursor("polygonDrag"),t}},{key:"bindPolygonRenderEvent",value:function(){var e,n,r,o;null===(e=this.polygonRender)||void 0===e||e.on(t.RenderEvent.UnClick,this.onPolygonUnClick.bind(this)),null===(n=this.polygonRender)||void 0===n||n.on(t.RenderEvent.Mousemove,this.onPolygonHover.bind(this)),null===(r=this.polygonRender)||void 0===r||r.on(t.RenderEvent.Mouseout,this.onPolygonUnHover.bind(this)),null===(o=this.polygonRender)||void 0===o||o.on(t.RenderEvent.Dragstart,this.onPolygonDragStart.bind(this))}},{key:"syncPolygonNodes",value:function(t,e){var n=Hn(An([].concat(dn(e),[$y(e)]))),r=t.properties,o=r.line;if(t.properties.nodes=e,t.geometry.coordinates=[cp(xn(n))?n:n.reverse()],this.setPolygonData((function(e){return e.map((function(e){return Vy(e,t)?t:e}))})),!Vy(this.drawPolygon,t)){var i=o.properties.nodes,a=dn(e),s=$y(a);a.push(i.length===e.length?tg(s.geometry.coordinates):Og(i));var u=Og(a);yy(s.geometry.coordinates,u.geometry.coordinates)||(u.geometry.coordinates=Gv(s.geometry.coordinates)),this.syncLineNodes(o,a)}return t}},{key:"setActivePolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.setActiveLine(t.properties.line,e),this.setPolygonData((function(n){return Jy({target:t,data:n,targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},e)},otherHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})})),this.setTextData(this.getAllTexts()),t}},{key:"clearActivePolygon",value:function(){this.setPolygonData((function(t){return t.map((function(t){return t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),t}))})),this.clearActiveLine()}},{key:"onLineDragStart",value:function(e){var r=an(sn(n.prototype),"onLineDragStart",this).call(this,e),o=this.getPolygonData().find((function(t){return Vy(t.properties.line,r)}));return o&&(this.setActivePolygon(o,{isDrag:!0}),this.emit(t.DrawEvent.DragStart,o,this.getPolygonData())),r}},{key:"onLineUnClick",value:function(t){return this.editLine}},{key:"onLineDragEnd",value:function(e){var r=an(sn(n.prototype),"onLineDragEnd",this).call(this,e),o=this.dragPolygon;return r&&o&&(o.properties.isDrag=!1,this.emit(t.DrawEvent.DragEnd,o,this.getPolygonData()),this.emit(t.DrawEvent.Edit,o,this.getPolygonData())),r}},{key:"onPolygonUnClick",value:function(t){var e=this.editPolygon;if(e)return this.handlePolygonUnClick(e)}},{key:"onPolygonHover",value:function(t){if(!this.drawPolygon)return this.dragPolygon||this.setHelper("polygonHover"),this.handlePolygonHover(t.feature)}},{key:"onPolygonUnHover",value:function(t){if(!this.drawPolygon)return this.setHelper(this.addable?"draw":null),this.handlePolygonUnHover()}},{key:"onPolygonDragStart",value:function(e){if(this.options.editable&&!this.drawPolygon){var n=e.feature;return this.previousPosition=hg(e),this.setHelper("polygonDrag"),this.emit(t.DrawEvent.DragStart,n,this.getPolygonData()),this.handlePolygonDragStart(n)}}},{key:"onMidPointClick",value:function(t){var e=this.editPolygon,r=an(sn(n.prototype),"onMidPointClick",this).call(this,t);if(r&&e){var o=e.properties.line.properties.nodes;this.syncPolygonNodes(e,o.slice(0,o.length-1)),this.setActivePolygon(e)}return r}},{key:"onPointDragEnd",value:function(e){var r=this.editPolygon,o=an(sn(n.prototype),"onPointDragEnd",this).call(this,e);return o&&r&&this.emit(t.DrawEvent.Edit,r,this.getPolygonData()),o}},{key:"enablePolygonRenderAction",value:function(){var t,e,n,r=this.options.editable;(null===(t=this.polygonRender)||void 0===t||t.enableUnClick(),r)&&(null===(e=this.polygonRender)||void 0===e||e.enableHover(),null===(n=this.polygonRender)||void 0===n||n.enableDrag())}},{key:"disablePolygonRenderAction",value:function(){var t,e,n;null===(t=this.polygonRender)||void 0===t||t.disableUnClick(),null===(e=this.polygonRender)||void 0===e||e.disableHover(),null===(n=this.polygonRender)||void 0===n||n.disableDrag()}},{key:"bindEnableEvent",value:function(){an(sn(n.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.enablePolygonRenderAction()}},{key:"unbindEnableEvent",value:function(){an(sn(n.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.disablePolygonRenderAction()}},{key:"bindThis",value:function(){an(sn(n.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this),this.bindPolygonRenderEvent=this.bindPolygonRenderEvent.bind(this)}},{key:"setActiveFeature",value:function(t){var e=this.getTargetFeature(t);e?this.setActivePolygon(e):this.clearActivePolygon()}},{key:"resetFeatures",value:function(){var t=this.getPolygonData();this.drawPolygon&&(t=t.filter((function(t){return!t.properties.isDraw})),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setLineData((function(t){return t.filter((function(t){return!t.properties.isDraw}))})),this.setTextData((function(t){return t.filter((function(t){return!t.properties.isActive}))}))),this.editPolygon&&this.handlePolygonUnClick(this.editPolygon),this.setPolygonData(t.map((function(t){return t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),t})))}}])}(jg),Rg=function(e){function n(){return en(this,n),tn(this,n,arguments)}return un(n,e),rn(n,[{key:"drawLine",get:function(){var t;return null===(t=this.drawPolygon)||void 0===t?void 0:t.properties.line}},{key:"getDefaultOptions",value:function(t){var e=fn(fn({},an(sn(n.prototype),"getDefaultOptions",this).call(this,t)),{},{showMidPoint:!1,trigger:"click",autoActive:!1,helper:Gv(uh)});return"drag"===t.trigger&&(e.helper=fn(fn({},e.helper),ch)),e}},{key:"getMidPointsByLine",value:function(t){return[]}},{key:"handleCreatePolygon",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.properties.nodes;return rg(r.slice(0,r.length-1),fn({nodes:t,line:e},n))}},{key:"handleFirstNodeCreate",value:function(e){var n=tg(e.geometry.coordinates),r=this.handleCreatePolygonLine(e,n,{isDraw:!0,isActive:!0}),o=this.handleCreatePolygon([e,n],r,{isDraw:!0,isActive:!0});return this.setPolygonData((function(t){return Jy({target:o,data:[].concat(dn(t),[o]),targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!0,isActive:!0})}})})),this.emit(t.DrawEvent.AddNode,e,this.drawPolygon,this.getPolygonData()),this.setHelper("drawFinish"),e}},{key:"handleLastNodeCreate",value:function(e){var n=this.options,r=n.autoActive,o=n.editable,i=this.drawPolygon;return i?(this.setLineData((function(t){return[].concat(dn(t),[i.properties.line])})),this.setActivePolygon(i),r&&o||this.handlePolygonUnClick(i),this.emit(t.DrawEvent.Add,i,this.getPolygonData()),this.emit(t.DrawEvent.AddNode,i.properties.nodes[1],this.drawPolygon,this.getPolygonData()),this.setHelper(o?r?"pointHover":"polygonHover":this.addable?"draw":null),e):e}},{key:"onPointCreate",value:function(t){var e=this;if(this.addable&&!this.dragPoint&&!this.editLine&&this.isClickTrigger){var n=this.drawPolygon,r=hg(t),o=this.handleCreatePoint(r);return n?requestAnimationFrame((function(){e.handleLastNodeCreate(o)})):this.handleFirstNodeCreate(o),o}}},{key:"setActivePolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setActiveLine(t.properties.line,e),this.setPolygonData((function(n){return Jy({target:t,data:n,targetHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!0,isDrag:!1,isHover:!1},e)},otherHandler:function(t){t.properties=fn(fn({},t.properties),{},{isDraw:!1,isActive:!1,isDrag:!1})}})})),this.setPointData(t.properties.nodes),this.setDashLineData([]);var n=this.getAllTexts();return this.setTextData(n),t}},{key:"onPointDragging",value:function(t){var e=this.dragPoint;if(e){var n=this.handlePointDragging(e,pg(t)),r=this.editPolygon;return n&&r&&(this.syncPolygonNodes(r,r.properties.nodes.map((function(t){return Vy(t,n)?n:t}))),this.setActivePolygon(r)),n}}},{key:"onSceneDragStart",value:function(t){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&(this.scene.setMapStatus({dragEnable:!1}),this.handleFirstNodeCreate(this.handleCreatePoint(hg(t))))}},{key:"onSceneDragEnd",value:function(t){this.isDragTrigger&&this.addable&&!this.dragPoint&&!this.editLine&&this.drawPolygon&&(this.scene.setMapStatus({dragEnable:!1}),this.handleLastNodeCreate(this.handleCreatePoint(hg(t))))}},{key:"onSceneMouseMove",value:function(t){var e=this.drawPolygon;if(e){var n=e.properties.nodes,r=$y(n),o=Og(n);o.geometry.coordinates=hg(t),this.syncPolygonNodes(e,[r,o]),this.setDashLineData([e.properties.line]),this.setTextData(this.getAllTexts()),this.resetCursor()}}}])}(_g),Cg=function(e){function n(t,e){var r;return en(this,n),(r=tn(this,n,[t,e])).bindPointRenderEvent(),r.bindSceneEvent(),r.bindMidPointRenderEvent(),r.bindLineRenderEvent(),r.bindPolygonRenderEvent(),r}return un(n,e),rn(n,[{key:"getDefaultOptions",value:function(t){var e=fn(fn({},an(sn(n.prototype),"getDefaultOptions",this).call(this,t)),{},{showMidPoint:!1,circleSteps:60});return e.distanceOptions&&(e.distanceOptions.showTotalDistance=!0,void 0===e.distanceOptions.showOnRadius&&(e.distanceOptions.showOnRadius=!0)),e.helper&&(e.helper=fn(fn({},e.helper),fh)),e}},{key:"getDistanceTexts",value:function(){var t=this.options.distanceOptions;if(!t)return[];var e=[],n=t.showWhen,r=t.showDashDistance,o=t.format,i=t.showTotalDistance;return e.push.apply(e,dn(this.getDashLineDistanceTexts(this.getDashLineData(),{showTotalDistance:!0,format:o,showDashDistance:r})).concat(dn(this.getLineDistanceTexts(this.getLineData(),{showTotalDistance:i,format:o,showWhen:n})))),e}},{key:"setData",value:function(t){var e=this,n=t.map((function(t){var n,r,o;t.properties=fn(fn({},Qy()),t.properties);var i=null===(n=t.properties)||void 0===n?void 0:n.nodes;if(2!==(null===(r=i)||void 0===r?void 0:r.length)){var a=hn($r(t).geometry.coordinates,2),s=a[0],u=a[1],c=$n(t),l=c[2],f=(c[1]+c[3])/2;i=[tg([s,u]),tg([l,f])],t.properties.nodes=i}var p=i[0],h=i[1],d=!!(null===(o=t.properties)||void 0===o?void 0:o.isActive),v=t.properties.line;return v||(v=e.handleCreatePolygonLine(p,h,{isActive:d}),t.properties.line=v),e.handleCreatePolygon([p,h],v,fn(fn({},t.properties),{},{isActive:d}))}));this.source.setData({point:[],midPoint:[],dashLine:[],polygon:n,line:n.map((function(t){return t.properties.line}))}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getBoundaryPositions(t,e).map((function(t){return tg(t)}));return eg(r,n)}},{key:"syncPolygonNodes",value:function(t,e){var n=t.properties.line,r=this.getBoundaryPositions(e[0],e[1]);return t.properties.nodes=e,t.geometry.coordinates=[r],this.setPolygonData((function(e){return e.map((function(e){return Vy(e,t)?t:e}))})),this.setPointData(t.properties.isDraw?[e[0]]:e),n.properties.nodes.forEach((function(t,e){t.geometry.coordinates=r[e]})),n.geometry.coordinates=r,t}},{key:"onLineDragging",value:function(e){var r=this.dragPolygon,o=hn(this.previousPosition,2),i=o[0],a=o[1],s=an(sn(n.prototype),"onLineDragging",this).call(this,e);if(r){var u=hn(hg(e),2),c=u[0],l=u[1];r.properties.nodes.forEach((function(t){var e=hn(t.geometry.coordinates,2),n=e[1];t.geometry.coordinates=[sg(e[0]+c-i),sg(n+l-a)]})),this.syncPolygonNodes(r,r.properties.nodes),this.setActivePolygon(r,{isDrag:!0}),this.emit(t.DrawEvent.Dragging,r,this.getPolygonData())}return s}},{key:"getBoundaryPositions",value:function(t,e){for(var n=this.options.circleSteps,r=zr(t,e,{units:"meters"}),o=[],i=0;n>i;i++)o.push(Wr(t,r,-360*i/n,{units:"meters"}).geometry.coordinates.map((function(t){return sg(t,6)})));return o.push(o[0]),o}}])}(Rg),Tg=function(e){function n(e,r){var o;return en(this,n),(o=tn(this,n,[e,r])).drawLineFinish=function(){var e,n=o.drawLine,r=null!==(e=null==n?void 0:n.properties.nodes)&&void 0!==e?e:[];if(n&&(null==r?void 0:r.length)>1){o.setActiveLine(n);var i=o.options,a=i.autoActive,s=i.editable;a&&s||o.handleLineUnClick(n),o.setHelper(s&&a?"pointHover":o.addable?"draw":null),o.emit(t.DrawEvent.Add,n,o.getLineData())}},o.sceneRender.on(t.RenderEvent.DblClick,o.drawLineFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o}return un(n,e),rn(n,[{key:"dragItem",get:function(){return this.dragLine}},{key:"editItem",get:function(){return this.editLine}},{key:"getMainLayer",value:function(){var t,e;return null!==(t=null===(e=this.render.line)||void 0===e?void 0:e.getLayers())&&void 0!==t?t:[]}},{key:"setData",value:function(t){var e=ig(t).map((function(t){var e,n;return t.properties=fn(fn({},Zy()),null!==(e=t.properties)&&void 0!==e?e:{}),(null===(n=t.properties.nodes)||void 0===n?void 0:n.length)||(t.properties.nodes=Hn(t).map((function(t){return tg(t)}))),t}));this.source.setData({point:[],midPoint:[],dashLine:[],line:e}),this.setTextData(this.getAllTexts()),this.editLine&&this.setActiveLine(this.editLine)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getLineData();return t?e:ag(e)}},{key:"getRenderTypes",value:function(){return["line","dashLine","midPoint","point","text"]}},{key:"bindPointRenderEvent",value:function(){var e;an(sn(n.prototype),"bindPointRenderEvent",this).call(this),null===(e=this.pointRender)||void 0===e||e.on(t.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"onPointClick",value:function(t){var e,n=this,r=this.drawLine,o=null!==(e=null==r?void 0:r.properties.nodes)&&void 0!==e?e:[],i=t.feature;if(Vy(i,Og(o)))requestAnimationFrame((function(){n.drawLineFinish()}));else{var a=hn(i.geometry.coordinates,2);t.lngLat={lng:a[0],lat:a[1]},this.onPointCreate(t)}}},{key:"removeNode",value:function(e,n){var r,o=this.getTargetFeature(n),i=this.getTargetFeature(e,null!==(r=null==o?void 0:o.properties.nodes)&&void 0!==r?r:[]);if(o&&i){var a,s=null!==(a=null==o?void 0:o.properties.nodes)&&void 0!==a?a:[];if(3>s.length)return;this.syncLineNodes(o,s.filter((function(t){return!Vy(i,t)}))),this.emit(t.DrawEvent.RemoveNode,i,o,this.getLineData()),this.emit(t.DrawEvent.Edit,o,this.getLineData())}}},{key:"onPointContextMenu",value:function(t){var e,n=this.editLine,r=t.feature,o=null!==(e=null==n?void 0:n.properties.nodes)&&void 0!==e?e:[];if(n&&o.length>=3)return this.removeNode(r,n),this.scene.setMapStatus({dragEnable:!0}),r}},{key:"onPointCreate",value:function(e){if(this.addable){var r=an(sn(n.prototype),"onPointCreate",this).call(this,e);return r&&(this.setHelper("drawFinish"),this.emit(t.DrawEvent.AddNode,r,this.drawLine,this.getLineData())),r}}},{key:"onPointDragEnd",value:function(e){var r=this.editLine,o=an(sn(n.prototype),"onPointDragEnd",this).call(this,e);return r&&o&&this.emit(t.DrawEvent.Edit,r,this.getLineData()),o}},{key:"onLineDragStart",value:function(e){var r=an(sn(n.prototype),"onLineDragStart",this).call(this,e);return r&&this.emit(t.DrawEvent.DragStart,r,this.getLineData()),r}},{key:"onLineDragging",value:function(e){var r=an(sn(n.prototype),"onLineDragging",this).call(this,e);return r&&this.emit(t.DrawEvent.Dragging,r,this.getLineData()),r}},{key:"onLineDragEnd",value:function(e){var r=an(sn(n.prototype),"onLineDragEnd",this).call(this,e);return r&&(this.emit(t.DrawEvent.DragEnd,r,this.getLineData()),this.emit(t.DrawEvent.Edit,r,this.getLineData())),r}},{key:"onMidPointClick",value:function(e){var r=this.editLine,o=an(sn(n.prototype),"onMidPointClick",this).call(this,e);return r&&o&&(this.emit(t.DrawEvent.Edit,r,this.getLineData()),this.emit(t.DrawEvent.AddNode,o,r,this.getLineData())),o}},{key:"onSceneMouseMove",value:function(t){var e=this.drawLine;if(e){var n,r=Og(e.properties.nodes),o=hg(t);if(this.options.adsorbOptions)o=null!==(n=this.getAdsorbPosition(o))&&void 0!==n?n:o;this.setDashLineData([ng([o,r.geometry.coordinates])]),this.setTextData(this.getAllTexts())}}},{key:"onSceneDragEnd",value:function(t){this.isDragTrigger&&this.addable&&this.drawLine&&this.drawLineFinish()}},{key:"setActiveFeature",value:function(t){var e=this.getTargetFeature(t);e?this.setActiveLine(e):this.clearActiveLine()}},{key:"resetFeatures",value:function(){var t=this.getLineData();this.drawLine&&(t=t.filter((function(t){return!t.properties.isDraw})),this.source.setData({point:[],dashLine:[],midPoint:[]}),this.setTextData((function(t){return t.filter((function(t){return!t.properties.isActive}))}))),this.editLine&&this.handleLineUnClick(this.editLine),this.setLineData(t.map((function(t){return t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),t})))}},{key:"enablePointRenderAction",value:function(){var t;(an(sn(n.prototype),"enablePointRenderAction",this).call(this),this.options.editable)&&(null===(t=this.pointRender)||void 0===t||t.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var t;an(sn(n.prototype),"disablePointRenderAction",this).call(this),null===(t=this.pointRender)||void 0===t||t.disableContextMenu()}},{key:"bindEnableEvent",value:function(){an(sn(n.prototype),"bindEnableEvent",this).call(this),this.enableSceneRenderAction(),this.enablePointRenderAction(),this.enableLineRenderAction(),this.enableMidPointRenderAction(),this.sceneRender.enableDblClick()}},{key:"unbindEnableEvent",value:function(){an(sn(n.prototype),"unbindEnableEvent",this).call(this),this.disableSceneRenderAction(),this.disablePointRenderAction(),this.disableLineRenderAction(),this.disableMidPointRenderAction(),this.sceneRender.disableDblClick()}},{key:"bindThis",value:function(){an(sn(n.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this),this.bindSceneEvent=this.bindSceneEvent.bind(this),this.bindLineRenderEvent=this.bindLineRenderEvent.bind(this),this.bindMidPointRenderEvent=this.bindMidPointRenderEvent.bind(this)}}])}(jg),Bg=function(e){function n(t,e){var r;return en(this,n),(r=tn(this,n,[t,e])).bindPointRenderEvent(),r}return un(n,e),rn(n,[{key:"dragItem",get:function(){return this.dragPoint}},{key:"editItem",get:function(){return this.editPoint}},{key:"getDefaultOptions",value:function(t){var e=fn(fn({},this.getCommonOptions(t)),{},{helper:Gv(ih),initialData:t.initialData});return e.style.point=eh,e}},{key:"bindEnableEvent",value:function(){an(sn(n.prototype),"bindEnableEvent",this).call(this),this.enablePointRenderAction()}},{key:"unbindEnableEvent",value:function(){an(sn(n.prototype),"unbindEnableEvent",this).call(this),this.disablePointRenderAction()}},{key:"getRenderTypes",value:function(){return["point"]}},{key:"getMainLayer",value:function(){var t,e;return null!==(t=null===(e=this.render.point)||void 0===e?void 0:e.getLayers())&&void 0!==t?t:[]}},{key:"setData",value:function(t){this.setPointData(ig(t).map((function(t){return t.properties=fn(fn({},Ky()),t.properties),t})))}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.getPointData();return t?e:ag(e)}},{key:"onPointCreate",value:function(e){if(this.addable){var r=an(sn(n.prototype),"onPointCreate",this).call(this,e);if(r)return this.options.editable&&this.setHelper("pointHover"),this.emit(t.DrawEvent.Add,r,this.getData()),r}else this.setPointData((function(t){return t.map((function(t){return t.properties=fn(fn({},t.properties),{},{isHover:!1,isActive:!1}),t}))}))}},{key:"onPointMouseMove",value:function(t){var e=an(sn(n.prototype),"onPointMouseMove",this).call(this,t);return this.options.editable&&!this.dragPoint&&this.setHelper("pointHover"),e}},{key:"onPointMouseOut",value:function(t){var e=an(sn(n.prototype),"onPointMouseOut",this).call(this,t);return this.setHelper(this.addable?"draw":null),e}},{key:"onPointDragStart",value:function(e){var r=an(sn(n.prototype),"onPointDragStart",this).call(this,e);return this.setHelper("pointDrag"),this.emit(t.DrawEvent.DragStart,r,this.getData()),r}},{key:"onPointDragging",value:function(e){var r=an(sn(n.prototype),"onPointDragging",this).call(this,e);return r&&this.options.editable&&this.emit(t.DrawEvent.Dragging,r,this.getData()),r}},{key:"onPointDragEnd",value:function(e){var r=an(sn(n.prototype),"onPointDragEnd",this).call(this,e);return r&&this.options.editable&&(this.setHelper("pointHover"),this.emit(t.DrawEvent.DragEnd,r,this.getData()),this.emit(t.DrawEvent.Edit,r,this.getData())),r}},{key:"bindThis",value:function(){an(sn(n.prototype),"bindThis",this).call(this),this.bindPointRenderEvent=this.bindPointRenderEvent.bind(this)}},{key:"onSceneMouseMove",value:function(t){}},{key:"setActiveFeature",value:function(t){var e=this.getTargetFeature(t);this.setPointData((function(t){return t.map((function(t){return t.properties.isActive=Vy(e,t),t}))}))}},{key:"resetFeatures",value:function(){this.setPointData((function(t){return t.map((function(t){return t.properties=fn(fn({},t.properties),{},{isDrag:!1,isActive:!1,isHover:!1}),t}))}))}}])}(Sg),Fg=function(e){function n(e,r){var o;return en(this,n),(o=tn(this,n,[e,r])).drawPolygonFinish=function(){var e,n=o.drawPolygon,r=null!==(e=null==n?void 0:n.properties.nodes)&&void 0!==e?e:[];if(n&&r.length>=3){n.properties.isDraw=!1,o.syncPolygonNodes(n,r),o.setActivePolygon(n);var i=o.options,a=i.autoActive,s=i.editable;a&&s||o.handlePolygonUnClick(n),o.setHelper(s?a?"pointHover":"polygonHover":o.addable?"draw":null),o.emit(t.DrawEvent.Add,n,o.getPolygonData())}},o.sceneRender.on(t.RenderEvent.DblClick,o.drawPolygonFinish),o.bindPointRenderEvent(),o.bindSceneEvent(),o.bindMidPointRenderEvent(),o.bindLineRenderEvent(),o.bindPolygonRenderEvent(),o}return un(n,e),rn(n,[{key:"getDefaultOptions",value:function(t){return fn(fn({},an(sn(n.prototype),"getDefaultOptions",this).call(this,t)),{},{liveUpdate:!1})}},{key:"setData",value:function(t){var e=ig(t).map((function(t){var e,n;if(t.properties=fn(fn({},Qy()),null!==(e=t.properties)&&void 0!==e?e:{}),!(null===(n=t.properties.nodes)||void 0===n?void 0:n.length)){var r=Hn(t);r=r.slice(0,r.length-1),t.properties.nodes=r.map((function(t){return tg(t)}))}if(!t.properties.line){var o=t.properties.nodes;t.properties.line=eg([].concat(dn(o),[tg($y(o).geometry.coordinates)]))}return t}));this.source.setData({point:[],midPoint:[],dashLine:[],polygon:e,line:e.map((function(t){return t.properties.line}))}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"onPointCreate",value:function(e){if(this.addable&&!this.dragPoint){var r=an(sn(n.prototype),"onPointCreate",this).call(this,e),o=this.drawPolygon,i=this.drawLine;if(r){if(o)this.syncPolygonNodes(o,[].concat(dn(o.properties.nodes),[r])),this.setDashLineData([ng([hg(e),o.properties.nodes[0].geometry.coordinates])]),o.properties.nodes.length>1&&this.setHelper("drawFinish");else i&&(this.handleCreatePolygon([r],i),this.setHelper("drawContinue"));this.emit(t.DrawEvent.AddNode,r,o,this.getPolygonData())}return r}}},{key:"onPointClick",value:function(t){var e=this,n=this.drawPolygon,r=t.feature;if(n){var o=n.properties.nodes;if(o.length<3||!Vy($y(o),r)&&!Vy(Og(o),r)){var i=hn(r.geometry.coordinates,2);t.lngLat={lng:i[0],lat:i[1]},this.onPointCreate(t)}else requestAnimationFrame((function(){e.drawPolygonFinish()}))}}},{key:"onPointDragging",value:function(t){var e=this.dragPoint,r=this.editPolygon;if(e&&r){var o=r.properties.line;o.properties.nodes=o.properties.nodes.map((function(t){return Vy(t,e)?e:t}));var i=o.properties.nodes,a=i.slice(0,i.length-1),s=$y(i),u=Og(i),c=Vy(s,e)||Vy(u,e);if(c&&(s.geometry.coordinates=u.geometry.coordinates=hg(t)),this.options.adsorbOptions&&c){var l=this.resetAdsorbLngLat(t);l&&(s.geometry.coordinates=u.geometry.coordinates=l)}an(sn(n.prototype),"onPointDragging",this).call(this,t),this.syncPolygonNodes(r,a),this.setActivePolygon(r)}return e}},{key:"onLineDragging",value:function(e){var r=this.dragPolygon,o=an(sn(n.prototype),"onLineDragging",this).call(this,e);if(o&&r){var i=o.properties.nodes;this.syncPolygonNodes(r,i.slice(0,i.length-1)),this.emit(t.DrawEvent.Dragging,r,this.getPolygonData())}return o}},{key:"onMidPointClick",value:function(e){var r=an(sn(n.prototype),"onMidPointClick",this).call(this,e),o=this.editPolygon;return r&&o&&(this.emit(t.DrawEvent.Edit,o,this.getPolygonData()),this.emit(t.DrawEvent.AddNode,r,o,this.getPolygonData())),r}},{key:"onSceneMouseMove",value:function(t){var e,n=this.drawPolygon,r=null!==(e=null==n?void 0:n.properties.nodes)&&void 0!==e?e:[];if(n&&r.length){this.options.adsorbOptions&&this.resetAdsorbLngLat(t);var o=hg(t),i=[];if(i.push(ng([o,$y(r).geometry.coordinates])),r.length>1&&i.push(ng([o,Og(r).geometry.coordinates])),this.options.liveUpdate&&r.length>=2){var a=Hn(An(r));n.geometry.coordinates=[[].concat(dn(a),[o,a[0]])],this.setPolygonData(this.getPolygonData())}this.setDashLineData(i),this.setTextData(this.getAllTexts())}}},{key:"onSceneDragEnd",value:function(t){this.isDragTrigger&&this.addable&&this.drawLine&&this.drawPolygonFinish()}},{key:"removeNode",value:function(e,n){var r,o=this.getTargetFeature(n),i=this.getTargetFeature(e,null!==(r=null==o?void 0:o.properties.nodes)&&void 0!==r?r:[]);if(o&&i){var a,s=null!==(a=null==o?void 0:o.properties.nodes)&&void 0!==a?a:[];if(4>s.length)return;this.syncPolygonNodes(o,s.filter((function(t){return!Vy(i,t)}))),this.emit(t.DrawEvent.RemoveNode,i,o,this.getLineData()),this.emit(t.DrawEvent.Edit,o,this.getPolygonData())}}},{key:"onPointContextMenu",value:function(t){var e,n=this.editPolygon,r=t.feature,o=null!==(e=null==n?void 0:n.properties.nodes)&&void 0!==e?e:[];if(n&&o.length>=4)return o.find((function(t){return Vy(t,r)}))||(r=o[0]),this.removeNode(r,n),r}},{key:"bindPointRenderEvent",value:function(){var e;an(sn(n.prototype),"bindPointRenderEvent",this).call(this),null===(e=this.pointRender)||void 0===e||e.on(t.RenderEvent.Contextmenu,this.onPointContextMenu.bind(this))}},{key:"enablePointRenderAction",value:function(){var t;(an(sn(n.prototype),"enablePointRenderAction",this).call(this),this.options.editable)&&(null===(t=this.pointRender)||void 0===t||t.enableContextMenu())}},{key:"disablePointRenderAction",value:function(){var t;an(sn(n.prototype),"disablePointRenderAction",this).call(this),null===(t=this.pointRender)||void 0===t||t.disableContextMenu()}}])}(_g),Ig=function(e){function n(t,e){var r;return en(this,n),(r=tn(this,n,[t,e])).bindPointRenderEvent(),r.bindSceneEvent(),r.bindMidPointRenderEvent(),r.bindLineRenderEvent(),r.bindPolygonRenderEvent(),r}return un(n,e),rn(n,[{key:"getDefaultOptions",value:function(t){var e=an(sn(n.prototype),"getDefaultOptions",this).call(this,t);return e.helper&&(e.helper=fn(fn({},e.helper),lh)),e}},{key:"setData",value:function(t){var e=this,n=t.map((function(t){var n,r,o;t.properties=fn(fn({},Qy()),null!==(n=t.properties)&&void 0!==n?n:{});var i=t.properties.nodes;if(2!==(null===(r=i)||void 0===r?void 0:r.length)){var a=hn($n(t),4),s=a[2],u=a[3];i=[tg([a[0],a[1]]),tg([s,u])],t.properties.nodes=i}var c=hn(i,2),l=c[0],f=c[1],p=!!(null===(o=t.properties)||void 0===o?void 0:o.isActive),h=t.properties.line;return h||(h=e.handleCreatePolygonLine(l,f,{isActive:p}),t.properties.line=h),e.handleCreatePolygon([l,f],h,fn(fn({},t.properties),{},{isActive:p}))}));this.source.setData({point:[],midPoint:[],dashLine:[],polygon:n,line:n.map((function(t){return t.properties.line}))}),this.setTextData(this.getAllTexts()),this.editPolygon&&this.setActivePolygon(this.editPolygon)}},{key:"handleCreatePolygonLine",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Hn(Xr(An([t,e]))).map((function(n,r){return 0===r?t:2===r?e:tg(n)}));return eg(r,n)}},{key:"syncPolygonNodes",value:function(t,e){var n=t.properties.line,r=Hn(Xr(An(e)));t.properties.nodes=e,t.geometry.coordinates=[r],this.setPolygonData((function(e){return e.map((function(e){return Vy(e,t)?t:e}))})),this.setPointData(t.properties.isDraw?[e[0]]:e);var o=n.properties.nodes,i=r.filter((function(t){return!yy(t,e[0].geometry.coordinates)&&!yy(t,e[1].geometry.coordinates)}));return o.forEach((function(t,n){var r=[0,0];switch(n){case 0:r=e[0].geometry.coordinates;break;case 1:r=i[0];break;case 2:r=e[1].geometry.coordinates;break;case 3:r=i[1];break;case 4:r=Gv(e[0].geometry.coordinates)}t.geometry.coordinates=r})),n.geometry.coordinates=r,t}},{key:"onLineDragging",value:function(e){var r=an(sn(n.prototype),"onLineDragging",this).call(this,e),o=this.dragPolygon;if(r&&o){var i=o.properties.line.properties.nodes;this.syncPolygonNodes(o,[i[0],i[2]]),this.setActivePolygon(o,{isDrag:!0}),this.emit(t.DrawEvent.Dragging,o,this.getPolygonData())}return r}}])}(Rg),Hg=function(t,e){for(var n=t;n&&!Array.from(n.classList).includes(e);)n=n.parentElement;return n},Ug=["point","line","polygon","rect","circle","clear"],Ng={point:"#l7draw-point",line:"#l7draw-line",polygon:"#l7draw-polygon",rect:"#l7draw-rect",circle:"#l7draw-circle",clear:"#l7draw-qingkong"},Yg={point:Bg,line:Tg,polygon:Fg,rect:Ig,circle:Cg},zg="data-draw-type",Xg="l7-draw-control",Wg="".concat(Xg,"__btn"),qg="".concat(Wg,"--active");!function(t){var e,n,r,o,i,a='<svg><symbol id="l7draw-qingkong" viewBox="0 0 1024 1024"><path d="M778.96777344 334.02148437h-148.31542969V284.58300781A71.78466797 71.78466797 0 0 0 556.49462891 215.36914062H467.50537109a71.78466797 71.78466797 0 0 0-74.15771484 69.11499024V334.02148437h-148.31542969a29.66308594 29.66308594 0 1 0 0 59.32617188h29.66308594v326.29394531A88.98925781 88.98925781 0 0 0 363.68457031 808.63085938h296.63085938a88.98925781 88.98925781 0 0 0 88.98925781-88.98925782V393.34765625h29.66308594a29.66308594 29.66308594 0 0 0 0-59.32617188zM452.67382812 284.58300781c0-4.74609375 6.22924805-9.78881836 14.83154297-9.78881836h88.98925782c8.60229492 0 14.83154297 5.04272461 14.83154296 9.78881836V334.02148437H452.67382812V284.53356934z m237.30468751 435.10803223a29.66308594 29.66308594 0 0 1-29.66308594 29.66308593H363.68457031a29.66308594 29.66308594 0 0 1-29.66308593-29.66308594V393.34765625h355.95703124v326.29394531z"  ></path><path d="M437.84228516 660.31542969c6.57531739 0 12.85400391-3.46069336 17.5012207-9.64050294A39.20471192 39.20471192 0 0 0 462.56152344 627.33996582V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 437.84228516 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.50122071 9.64050293A39.20471192 39.20471192 0 0 0 413.12304687 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.50122071 9.64050294zM586.15771484 660.31542969c6.57531739 0 12.85400391-3.46069336 17.50122071-9.64050294a39.20471192 39.20471192 0 0 0 7.21801758-23.33496093V495.5369873a39.20471192 39.20471192 0 0 0-7.21801758-23.33496093A22.09899903 22.09899903 0 0 0 586.15771484 462.56152344c-6.57531739 0-12.85400391 3.46069336-17.5012207 9.64050293A39.20471192 39.20471192 0 0 0 561.43847656 495.5369873v131.80297853c0 8.75061036 2.62023926 17.15515137 7.21801758 23.33496092 4.6472168 6.17980958 10.92590333 9.64050293 17.5012207 9.64050294z"  ></path></symbol><symbol id="l7draw-rect" viewBox="0 0 1024 1024"><path d="M736.14 648.79V330c0-23.16-18.84-42-42-42H375.49c-11.07-19.13-31.74-32.01-55.43-32.01-35.35 0-64.01 28.66-64.01 64.01 0 23.69 12.88 44.36 32.01 55.43v318.8c0 23.16 18.84 42 42 42H648.7c11.07 19.13 31.74 32.01 55.43 32.01 35.35 0 64.01-28.66 64.01-64.01 0.01-23.7-12.87-44.37-32-55.44zM352.06 375.43A64.281 64.281 0 0 0 375.49 352h296.64v296.8a64.357 64.357 0 0 0-23.43 23.43H352.06v-296.8z"  ></path></symbol><symbol id="l7draw-circle" viewBox="0 0 1024 1024"><path d="M467.013228 557.765038a64.01 64.01 0 1 0 90.52223-90.52539 64.01 64.01 0 1 0-90.52223 90.52539Z"  ></path><path d="M832.16 512.22c0-26.06-15.58-48.46-37.93-58.45-11.21-54.67-38.11-104.92-78.48-145.3-54.42-54.42-126.78-84.4-203.75-84.4s-149.33 29.97-203.75 84.4c-54.42 54.42-84.4 126.79-84.4 203.75s29.97 149.33 84.4 203.75c54.42 54.42 126.78 84.4 203.75 84.4s149.33-29.97 203.75-84.4c40.37-40.37 67.28-90.62 78.48-145.3 22.35-9.98 37.93-32.39 37.93-58.45zM670.5 670.72c-42.34 42.34-98.62 65.65-158.5 65.65-59.87 0-116.16-23.32-158.5-65.65-42.34-42.34-65.65-98.62-65.65-158.5s23.32-116.16 65.65-158.5c42.34-42.34 98.62-65.65 158.5-65.65 59.87 0 116.16 23.32 158.5 65.65 29.9 29.9 50.3 66.77 59.71 106.95-15.81 11.66-26.07 30.4-26.07 51.55s10.26 39.9 26.07 51.55c-9.41 40.18-29.81 77.05-59.71 106.95z"  ></path></symbol><symbol id="l7draw-polygon" viewBox="0 0 1024 1024"><path d="M705.97 640.31c-5.79 0-11.39 0.78-16.72 2.22L381.94 336.66a64.079 64.079 0 0 0 2.14-16.43c0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 23.69 12.88 44.36 32.01 55.43V648.8c-19.13 11.07-32.01 31.74-32.01 55.43 0 35.35 28.66 64.01 64.01 64.01 23.69 0 44.35-12.87 55.42-32l275.05 0.07c11.07 19.14 31.74 32.03 55.44 32.03 35.35 0 64.01-28.66 64.01-64.01s-28.66-64.02-64.02-64.02z m-353.91 8.48V397.22L628.44 672.3l-252.94-0.07a64.411 64.411 0 0 0-23.44-23.44z"  ></path></symbol><symbol id="l7draw-line" viewBox="0 0 1024 1024"><path d="M832.16 449.21c0-35.35-28.66-64.01-64.01-64.01-29.2 0-53.81 19.56-61.5 46.28l-390.9 96.82 72.18-144.18c33.56-1.99 60.17-29.83 60.17-63.89 0-35.35-28.66-64.01-64.01-64.01s-64.01 28.66-64.01 64.01c0 13.04 3.91 25.17 10.61 35.28l-78.42 156.65c-33.58 1.97-60.21 29.81-60.21 63.89 0 35.35 28.66 64.01 64.01 64.01 29.2 0 53.81-19.56 61.5-46.28l390.8-96.79-71.97 143.34c-33.62 1.93-60.28 29.8-60.28 63.9 0 35.35 28.66 64.01 64.01 64.01s64.01-28.66 64.01-64.01c0-13-3.89-25.09-10.54-35.18l78.28-155.93c33.61-1.95 60.28-29.81 60.28-63.91z"  ></path></symbol><symbol id="l7draw-point" viewBox="0 0 1024 1024"><path d="M331.46 330.08m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M384.12 735.84m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path><path d="M769.11 512.7m-64.01 0a64.01 64.01 0 1 0 128.02 0 64.01 64.01 0 1 0-128.02 0Z"  ></path></symbol></svg>',s=(s=document.getElementsByTagName("script"))[s.length-1].getAttribute("data-injectcss");if(s&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(t){console&&console.log(t)}}function u(){i||(i=!0,r())}e=function(){var t,e=document.createElement("div");e.innerHTML=a,a=null,(e=e.getElementsByTagName("svg")[0])&&(e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.width=0,e.style.height=0,e.style.overflow="hidden",(t=document.body).firstChild?function(t,e){e.parentNode.insertBefore(t,e)}(e,t.firstChild):t.appendChild(e))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(e,0):(n=function(){document.removeEventListener("DOMContentLoaded",n,!1),e()},document.addEventListener("DOMContentLoaded",n,!1)):document.attachEvent&&(r=e,o=t.document,i=!1,function t(){try{o.documentElement.doScroll("left")}catch(e){return void setTimeout(t,50)}u()}(),o.onreadystatechange=function(){"complete"==o.readyState&&(o.onreadystatechange=null,u())})}(window);Pg(".l7-draw-control{display:flex;overflow:hidden;background:#fff;border-radius:2px;box-shadow:0 0 20px rgba(0,0,0,.14901960784313725)}.l7-draw-control__btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;padding:0;text-align:center;background:transparent;border-width:0;border-right:1px solid #e0e0e0;outline:0;cursor:pointer;transition:background-color .3s}.l7-draw-control__btn svg{transition:color .3s}.l7-draw-control__btn:hover{background-color:#e5e5e5}.l7-draw-control__btn:hover svg{color:#000}.l7-draw-control__btn:last-child{border-right:0;border-bottom:0}.l7-draw-control__btn .l7-draw-icon{width:26px;height:26px;overflow:hidden;fill:currentColor}.l7-draw-control__btn--active,.l7-draw-control__btn--active:hover{background-color:#0370fe}.l7-draw-control__btn--active:hover svg,.l7-draw-control__btn--active svg{color:#fff}");var $g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Gg=/^\w*$/;var Vg=function(t,e){if(gd(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Rp(t))||(Gg.test(t)||!$g.test(t)||null!=e&&t in Object(e))};function Jg(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Jg.Cache||td),n}Jg.Cache=td;var Kg=Jg;var Zg=function(t){var e=Kg(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e},Qg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tm=/\\(\\)?/g,em=Zg((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Qg,(function(t,n,r,o){e.push(r?o.replace(tm,"$1"):n||t)})),e})),nm=em,rm=Dp?Dp.prototype:void 0,om=rm?rm.toString:void 0;var im=function t(e){if("string"==typeof e)return e;if(gd(e))return Ny(e,t)+"";if(Rp(e))return om?om.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var am=function(t){return null==t?"":im(t)};var sm=function(t,e){return gd(t)?t:Vg(t,e)?[t]:nm(am(t))};var um=function(t){if("string"==typeof t||Rp(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var cm=function(t,e){for(var n=0,r=(e=sm(e,t)).length;null!=t&&r>n;)t=t[um(e[n++])];return n&&n==r?t:void 0};var lm=function(t,e,n){var r=-1,o=t.length;0>e&&(e=-e>o?0:o+e),0>(n=n>o?o:n)&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i};var fm=function(t,e){return 2>e.length?t:cm(t,lm(e,0,-1))};var pm=function(t,e){return e=sm(e,t),null==(t=fm(t,e))||delete t[um(Og(e))]};var hm=function(t){return xy(t)?void 0:t},dm=Dp?Dp.isConcatSpreadable:void 0;var vm=function(t){return gd(t)||yd(t)||!!(dm&&t&&t[dm])};var ym=function t(e,n,r,o,i){var a=-1,s=e.length;for(r||(r=vm),i||(i=[]);++a<s;){var u=e[a];n>0&&r(u)?n>1?t(u,n-1,r,o,i):Qd(i,u):o||(i[i.length]=u)}return i};var gm=function(t){return(null==t?0:t.length)?ym(t,1):[]};var mm=function(t){return By(_y(t,void 0,gm),t+"")}((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ny(e,(function(e){return e=sm(e,t),r||(r=e.length>1),e})),cd(t,iv(t),n),r&&(n=$v(n,7,hm));for(var o=e.length;o--;)pm(n,e[o]);return n})),bm=mm,wm=function(n){function r(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return en(this,r),(n=tn(this,r,[o])).controlOption=void 0,n.sceneInstance=void 0,n.drawMap={},n.btnMap={},n.activeType=null,n.emitDataChange=Np((function(){n.emit(t.ControlEvent.DataChange,n.getDrawData())}),16),n.emitDrawSelect=function(e,r){n.emit(t.ControlEvent.DrawSelect,e,r)},n.sceneInstance=e,n.controlOption=fn(fn({},n.getDefault()),o||{}),n.onBtnClick=n.onBtnClick.bind(n),n}return un(r,n),rn(r,[{key:"getActiveType",value:function(){return this.activeType}},{key:"getDefault",value:function(){return fn(fn({},an(sn(r.prototype),"getDefault",this).call(this)),{},{className:"",buttonClassName:"",activeButtonClassName:"",style:"",position:"topleft",commonDrawOptions:{},drawConfig:{point:!0,line:!0,polygon:!0,rect:!0,circle:!0,clear:!0}})}},{key:"addTo",value:function(t){return an(sn(r.prototype),"addTo",this).call(this,t),this.init(),this}},{key:"onAdd",value:function(){var t=this.controlOption,n=t.className,r=t.style,o=e.DOM.create("div","".concat(Xg," ").concat(n));return r&&o.setAttribute("style",r),o}},{key:"onRemove",value:function(){Object.values(this.drawMap).forEach((function(t){t.clear(!0)}))}},{key:"init",value:function(){var e,n=this,r=[];Object.entries(this.controlOption.drawConfig).filter((function(t){var e=hn(t,2);return e[1]})).sort((function(t,e){var n=hn(t,2)[1],r=hn(e,2)[1],o=Number.MAX_SAFE_INTEGER;return("boolean"==typeof n?o:n.order)-("boolean"==typeof r?o:r.order)})).map((function(t){var e=hn(t,2),n=e[1];return[e[0],"object"===yn(n)?bm(n,"order"):n]})).forEach((function(e){var o=hn(e,2),i=o[0],a=o[1];if("object"===yn(a)&&a.button){var s=a.button;s.classList.contains("l7-draw-control__btn")||s.classList.add("l7-draw-control__btn"),n.btnMap[i]=s,r.push(s)}else if(a&&Ug.includes(i)){var u=n.initBtn(i);u.addEventListener("click",n.onBtnClick),r.push(u),n.btnMap[i]=u;var c=Yg[i];if(c&&n.sceneInstance){var l=new c(n.sceneInstance,fn(fn({},n.controlOption.commonDrawOptions),"boolean"==typeof a?{}:a));l.on(t.DrawEvent.Change,n.emitDataChange),l.on(t.DrawEvent.Select,(function(t){n.emitDrawSelect(i,t),t&&Object.values(n.drawMap).forEach((function(t){t!==l&&t.setActiveFeature(null)}))})),n.drawMap[i]=l}}})),(e=this.container).append.apply(e,r),this.controlOption.defaultActiveType&&this.onDrawClick(this.controlOption.defaultActiveType)}},{key:"getDrawData",value:function(){return Vv(Xy(this.drawMap).map((function(t){var e=hn(t,2);return[e[0],e[1].getData()]})))}},{key:"getTypeDraw",value:function(t){var e;return null!==(e=this.drawMap[t])&&void 0!==e?e:null}},{key:"onBtnClick",value:function(t){var e=Hg(t.target,Wg);if(e){var n=e.getAttribute(zg);"clear"===n?this.clearDrawData():this.onDrawClick(n)}}},{key:"setActiveType",value:function(n){var r=null,o=this.activeType;if(o){var i,a=this.btnMap[o];if(a){e.DOM.removeClass(a,qg);var s=this.controlOption.activeButtonClassName;s&&e.DOM.removeClass(a,s)}null===(i=this.drawMap[o])||void 0===i||i.disable(),r=null}if(o!==n&&n){var u;null===(u=this.drawMap[n])||void 0===u||u.enable();var c=this.btnMap[n];c&&e.DOM.addClass(c,"".concat(qg," ").concat(this.controlOption.activeButtonClassName)),r=n}this.activeType=r,this.emit(t.ControlEvent.DrawChange,r)}},{key:"onDrawClick",value:function(t){this.setActiveType(t)}},{key:"clearDrawData",value:function(){Object.values(this.drawMap).forEach((function(t){null==t||t.clear()})),this.emit(t.ControlEvent.DrawClear)}},{key:"initBtn",value:function(t){var n=e.DOM.create("button","".concat(Wg," ").concat(this.controlOption.buttonClassName));return n.innerHTML='<svg class="l7-draw-icon" aria-hidden="true">\n      <use xlink:href="'.concat(Ng[t],'"></use>\n    </svg>'),n.setAttribute(zg,t),n.type="button",n}}])}(e.Control);t.ACTIVE_COLOR=Jp,t.BaseMode=kg,t.CircleDrawer=Cg,t.DEFAULT_ADSORB_CONFIG=Ke,t.DEFAULT_AREA_OPTIONS=$e,t.DEFAULT_CIRCLE_HELPER_CONFIG=fh,t.DEFAULT_COMMON_OPTIONS=Kp,t.DEFAULT_CURSOR_MAP=n,t.DEFAULT_DISTANCE_OPTIONS=qe,t.DEFAULT_DRAG_OPTIONS=Ze,t.DEFAULT_DRAG_POLYGON_HELPER_CONFIg=uh,t.DEFAULT_HISTORY_CONFIG=Ge,t.DEFAULT_KEYBOARD_CONFIG=Ve,t.DEFAULT_LINE_HELPER_CONFIG=ah,t.DEFAULT_MID_POINT_STYLE=th,t.DEFAULT_NODE_NORMAL_STYLE=Qp,t.DEFAULT_NODE_STYLE=nh,t.DEFAULT_POINT_HELPER_CONFIG=ih,t.DEFAULT_POINT_NORMAL_STYLE=Zp,t.DEFAULT_POINT_STYLE=eh,t.DEFAULT_POLYGON_HELPER_CONFIG=sh,t.DEFAULT_POPUP_CONFIG=Je,t.DEFAULT_RECT_HELPER_CONFIG=lh,t.DEFAULT_SOURCE_DATA=r,t.DEFAULT_STYLE=oh,t.DEFAULT_TEXT_NORMAL_STYLE=rh,t.DEFAULT_TRIGGER_DRAG_HELPER_CONFIG=ch,t.DashLineRender=pp,t.DragPolygonMode=Rg,t.DrawCircle=Cg,t.DrawControl=wm,t.DrawLine=Tg,t.DrawPoint=Bg,t.DrawPolygon=Fg,t.DrawRect=Ig,t.LayerRender=fp,t.LineDrawer=Tg,t.LineMode=jg,t.LineRender=Yp,t.MidPointMode=Lg,t.MidPointRender=zp,t.NORMAL_COLOR=Vp,t.PointDrawer=Bg,t.PointMode=Sg,t.PointRender=Xp,t.PolygonDrawer=Fg,t.PolygonMode=_g,t.PolygonRender=Wp,t.RENDER_MAP=Gp,t.RectDrawer=Ig,t.SceneRender=qp,t.Source=Mg,t.TextRender=$p,t.calcAreaText=lg,t.calcDistanceTextsByLine=cg,t.createDashLine=ng,t.createLineFeature=eg,t.createPointFeature=tg,t.createPolygonFeature=rg,t.findMinIndex=vg,t.getAdsorbPosition=wg,t.getDefaultLineProperties=Zy,t.getDefaultPointProperties=Ky,t.getDefaultPolygonProperties=Qy,t.getLineCenterPoint=ug,t.getLngLat=pg,t.getMapDom=fg,t.getParentByClassName=Hg,t.getPixelExpandBBox=mg,t.getPosition=hg,t.getPrecisionNumber=sg,t.getSingleColorStyle=function(t){return{point:{normal:{color:t},hover:{color:t},active:{color:t}},line:{normal:{color:t},hover:{color:t},active:{color:t}},polygon:{normal:{color:t},hover:{color:t},active:{color:t},style:{opacity:.2}},text:{normal:{color:t},active:{color:t}},midPoint:{normal:{color:t}},dashLine:{normal:{color:t}}}},t.getUuid=Gy,t.injectFeaturesBBox=og,t.isDev=!1,t.isPositionInBBox=bg,t.isSameFeature=Vy,t.joinMultiFeatures=ag,t.resetEventLngLat=Eg,t.splitByPosition=yg,t.splitMultiFeatures=ig,t.transLngLat2Position=dg,t.updateTargetFeature=Jy,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=l7-draw.min.js.map
